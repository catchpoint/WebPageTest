import{ObjectWrapper as e,ParsedURL as t,Color as s,Settings as i,ResourceType as r,UIString as o,ls as n,Console as a,EventTarget as l,Base64 as d,Throttler as c,Revealer as h}from"../common/common.js";import{InspectorFrontendHost as u,ResourceLoader as g,userMetrics as m,UserMetrics as p,Platform as _,InspectorFrontendHostAPI as b}from"../host/host.js";import{Multimap as f,SetUtilities as v,StringUtilities as y,ls as k,ArrayUtilities as S,DateUtilities as w,NumberUtilities as C}from"../platform/platform.js";import{InspectorBackend as I}from"../protocol_client/protocol_client.js";import{TextUtils as R,ContentProvider as T,TextRange as x,Text as M,StaticContentProvider as P}from"../text_utils/text_utils.js";import{Runtime as L}from"../root/root.js";const E=new Map;class N extends e.ObjectWrapper{constructor(e){super(),this._target=e}target(){return this._target}preSuspendModel(e){return Promise.resolve()}suspendModel(e){return Promise.resolve()}resumeModel(){return Promise.resolve()}postResumeModel(){return Promise.resolve()}dispose(){}static register(e,t,s){E.set(e,{capabilities:t,autostart:s})}static get registeredModels(){return E}}class A extends I.TargetBase{constructor(e,t,s,i,r,o,n,a){switch(super(i===D.Node,r,o,a),this._targetManager=e,this._name=s,this._inspectedURL="",this._inspectedURLName="",this._capabilitiesMask=0,i){case D.Frame:this._capabilitiesMask=O.Browser|O.Storage|O.DOM|O.JS|O.Log|O.Network|O.Target|O.Tracing|O.Emulation|O.Input|O.Inspector|O.Audits|O.WebAuthn|O.IO,r||(this._capabilitiesMask|=O.DeviceEmulation|O.ScreenCapture|O.Security|O.ServiceWorker);break;case D.ServiceWorker:this._capabilitiesMask=O.JS|O.Log|O.Network|O.Target|O.Inspector|O.IO,r||(this._capabilitiesMask|=O.Browser);break;case D.Worker:this._capabilitiesMask=O.JS|O.Log|O.Network|O.Target|O.IO;break;case D.Node:this._capabilitiesMask=O.JS;break;case D.Browser:this._capabilitiesMask=O.Target|O.IO}this._type=i,this._parentTarget=r,this._id=t,this._modelByConstructor=new Map,this._isSuspended=n}createModels(e){this._creatingModels=!0,this.model(SDK.ResourceTreeModel);const t=Array.from(N.registeredModels.keys());for(const s of t){(N.registeredModels.get(s).autostart||e.has(s))&&this.model(s)}this._creatingModels=!1}id(){return this._id}name(){return this._name||this._inspectedURLName}type(){return this._type}markAsNodeJSForTest(){super.markAsNodeJSForTest(),this._type=D.Node}targetManager(){return this._targetManager}hasAllCapabilities(e){return(this._capabilitiesMask&e)===e}decorateLabel(e){return this._type===D.Worker||this._type===D.ServiceWorker?"âš™ "+e:e}parentTarget(){return this._parentTarget}dispose(e){super.dispose(e),this._targetManager.removeTarget(this);for(const e of this._modelByConstructor.values())e.dispose()}model(e){if(!this._modelByConstructor.get(e)){const t=N.registeredModels.get(e);if(void 0===t)throw"Model class is not registered @"+(new Error).stack;if((this._capabilitiesMask&t.capabilities)===t.capabilities){const t=new e(this);this._modelByConstructor.set(e,t),this._creatingModels||this._targetManager.modelAdded(this,e,t)}}return this._modelByConstructor.get(e)||null}models(){return this._modelByConstructor}inspectedURL(){return this._inspectedURL}setInspectedURL(e){this._inspectedURL=e;const s=t.ParsedURL.fromString(e);this._inspectedURLName=s?s.lastPathComponentWithFragment():"#"+this._id,this.parentTarget()||u.InspectorFrontendHostInstance.inspectedURLChanged(e||""),this._targetManager.dispatchEventToListeners(q.InspectedURLChanged,this),this._name||this._targetManager.dispatchEventToListeners(q.NameChanged,this)}async suspend(e){if(this._isSuspended)return Promise.resolve();this._isSuspended=!0,await Promise.all(Array.from(this.models().values(),(t=>t.preSuspendModel(e)))),await Promise.all(Array.from(this.models().values(),(t=>t.suspendModel(e))))}async resume(){if(!this._isSuspended)return Promise.resolve();this._isSuspended=!1,await Promise.all(Array.from(this.models().values(),(e=>e.resumeModel()))),await Promise.all(Array.from(this.models().values(),(e=>e.postResumeModel())))}suspended(){return this._isSuspended}}const O={Browser:1,DOM:2,JS:4,Log:8,Network:16,Target:32,ScreenCapture:64,Tracing:128,Emulation:256,Security:512,Input:1024,Inspector:2048,DeviceEmulation:4096,Storage:8192,ServiceWorker:16384,Audits:32768,WebAuthn:65536,IO:1<<17,None:0},D={Frame:"frame",ServiceWorker:"service-worker",Worker:"worker",Node:"node",Browser:"browser"};let B;class F extends e.ObjectWrapper{constructor(){super(),this._targets=new Set,this._observers=new Set,this._modelListeners=new f,this._modelObservers=new f,this._isSuspended=!1}static instance({forceNew:e}={forceNew:!1}){return B&&!e||(B=new F),B}static removeInstance(){B=void 0}async suspendAllTargets(e){if(this._isSuspended)return;this._isSuspended=!0,this.dispatchEventToListeners(q.SuspendStateChanged);const t=Array.from(this._targets.values(),(t=>t.suspend(e)));await Promise.all(t)}async resumeAllTargets(){if(!this._isSuspended)return;this._isSuspended=!1,this.dispatchEventToListeners(q.SuspendStateChanged);const e=Array.from(this._targets.values(),(e=>e.resume()));await Promise.all(e)}allTargetsSuspended(){return this._isSuspended}models(e){const t=[];for(const s of this._targets){const i=s.model(e);i&&t.push(i)}return t}inspectedURL(){const e=this.mainTarget();return e?e.inspectedURL():""}observeModels(e,t){const s=this.models(e);this._modelObservers.set(e,t);for(const e of s)t.modelAdded(e)}unobserveModels(e,t){this._modelObservers.delete(e,t)}modelAdded(e,t,s){for(const e of this._modelObservers.get(t).values())e.modelAdded(s)}_modelRemoved(e,t,s){for(const e of this._modelObservers.get(t).values())e.modelRemoved(s)}addModelListener(e,t,s,i){for(const r of this.models(e))r.addEventListener(t,s,i);this._modelListeners.set(t,{modelClass:e,thisObject:i,listener:s})}removeModelListener(e,t,s,i){if(this._modelListeners.has(t)){for(const r of this.models(e))r.removeEventListener(t,s,i);for(const r of this._modelListeners.get(t))r.modelClass===e&&r.listener===s&&r.thisObject===i&&this._modelListeners.delete(t,r)}}observeTargets(e){if(this._observers.has(e))throw new Error("Observer can only be registered once");for(const t of this._targets)e.targetAdded(t);this._observers.add(e)}unobserveTargets(e){this._observers.delete(e)}createTarget(e,t,s,i,r,o,n){const a=new A(this,e,t,s,i,r||"",this._isSuspended,n||null);o&&a.pageAgent().waitForDebugger(),a.createModels(new Set(this._modelObservers.keysArray())),this._targets.add(a);for(const e of[...this._observers])e.targetAdded(a);for(const e of a.models().keys()){const t=a.models().get(e);this.modelAdded(a,e,t)}for(const e of this._modelListeners.keysArray())for(const t of this._modelListeners.get(e)){const s=a.model(t.modelClass);s&&s.addEventListener(e,t.listener,t.thisObject)}return a}removeTarget(e){if(this._targets.has(e)){this._targets.delete(e);for(const t of e.models().keys()){const s=e.models().get(t);this._modelRemoved(e,t,s)}for(const t of[...this._observers])t.targetRemoved(e);for(const t of this._modelListeners.keysArray())for(const s of this._modelListeners.get(t)){const i=e.model(s.modelClass);i&&i.removeEventListener(t,s.listener,s.thisObject)}}}targets(){return[...this._targets]}targetById(e){return this.targets().find((t=>t.id()===e))||null}mainTarget(){return this._targets.size?this._targets.values().next().value:null}}const q={AvailableTargetsChanged:Symbol("AvailableTargetsChanged"),InspectedURLChanged:Symbol("InspectedURLChanged"),NameChanged:Symbol("NameChanged"),SuspendStateChanged:Symbol("SuspendStateChanged")};var U=Object.freeze({__proto__:null,SDKModel:N,Target:A,Capability:O,Type:D,TargetManager:F,Events:q,Observer:class{targetAdded(e){}targetRemoved(e){}},SDKModelObserver:class{modelAdded(e){}modelRemoved(e){}}});const H=[{name:"-webkit-app-region",keywords:["none","drag","no-drag"]},{name:"-webkit-border-horizontal-spacing",inherited:!0},{name:"-webkit-border-image"},{name:"-webkit-border-vertical-spacing",inherited:!0},{name:"-webkit-box-align",keywords:["stretch","start","center","end","baseline"]},{name:"-webkit-box-decoration-break",keywords:["slice","clone"]},{name:"-webkit-box-direction",inherited:!0,keywords:["normal","reverse"]},{name:"-webkit-box-flex"},{name:"-webkit-box-ordinal-group"},{name:"-webkit-box-orient",keywords:["horizontal","vertical"]},{name:"-webkit-box-pack",keywords:["start","center","end","justify"]},{name:"-webkit-box-reflect"},{longhands:["break-after"],name:"-webkit-column-break-after"},{longhands:["break-before"],name:"-webkit-column-break-before"},{longhands:["break-inside"],name:"-webkit-column-break-inside"},{name:"-webkit-font-smoothing",inherited:!0},{name:"-webkit-highlight",inherited:!0},{name:"-webkit-hyphenate-character",inherited:!0},{name:"-webkit-line-break",inherited:!0,keywords:["auto","loose","normal","strict","after-white-space","anywhere"]},{name:"-webkit-line-clamp"},{name:"-webkit-locale",inherited:!0},{longhands:["-webkit-mask-image","-webkit-mask-position-x","-webkit-mask-position-y","-webkit-mask-size","-webkit-mask-repeat-x","-webkit-mask-repeat-y","-webkit-mask-origin","-webkit-mask-clip"],name:"-webkit-mask"},{longhands:["-webkit-mask-box-image-source","-webkit-mask-box-image-slice","-webkit-mask-box-image-width","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat"],name:"-webkit-mask-box-image"},{name:"-webkit-mask-box-image-outset"},{name:"-webkit-mask-box-image-repeat"},{name:"-webkit-mask-box-image-slice"},{name:"-webkit-mask-box-image-source"},{name:"-webkit-mask-box-image-width"},{name:"-webkit-mask-clip"},{name:"-webkit-mask-composite"},{name:"-webkit-mask-image"},{name:"-webkit-mask-origin"},{longhands:["-webkit-mask-position-x","-webkit-mask-position-y"],name:"-webkit-mask-position"},{name:"-webkit-mask-position-x"},{name:"-webkit-mask-position-y"},{longhands:["-webkit-mask-repeat-x","-webkit-mask-repeat-y"],name:"-webkit-mask-repeat"},{name:"-webkit-mask-repeat-x"},{name:"-webkit-mask-repeat-y"},{name:"-webkit-mask-size"},{name:"-webkit-perspective-origin-x"},{name:"-webkit-perspective-origin-y"},{name:"-webkit-print-color-adjust",inherited:!0,keywords:["economy","exact"]},{name:"-webkit-rtl-ordering",inherited:!0,keywords:["logical","visual"]},{name:"-webkit-ruby-position",inherited:!0,keywords:["before","after"]},{name:"-webkit-tap-highlight-color",inherited:!0},{name:"-webkit-text-combine",inherited:!0},{name:"-webkit-text-decorations-in-effect",inherited:!0},{longhands:["-webkit-text-emphasis-style","-webkit-text-emphasis-color"],name:"-webkit-text-emphasis",inherited:!0},{name:"-webkit-text-emphasis-color",inherited:!0},{name:"-webkit-text-emphasis-position",inherited:!0},{name:"-webkit-text-emphasis-style",inherited:!0},{name:"-webkit-text-fill-color",inherited:!0},{name:"-webkit-text-orientation",inherited:!0},{name:"-webkit-text-security",inherited:!0,keywords:["none","disc","circle","square"]},{longhands:["-webkit-text-stroke-width","-webkit-text-stroke-color"],name:"-webkit-text-stroke",inherited:!0},{name:"-webkit-text-stroke-color",inherited:!0},{name:"-webkit-text-stroke-width",inherited:!0},{name:"-webkit-transform-origin-x"},{name:"-webkit-transform-origin-y"},{name:"-webkit-transform-origin-z"},{name:"-webkit-user-drag",keywords:["auto","none","element"]},{name:"-webkit-user-modify",inherited:!0,keywords:["read-only","read-write","read-write-plaintext-only"]},{name:"-webkit-writing-mode",inherited:!0},{name:"additive-symbols"},{name:"advance-override"},{name:"advance-proportional-override"},{name:"align-content"},{name:"align-items"},{name:"align-self"},{keywords:["baseline","alphabetic","ideographic","middle","central","mathematical"],svg:!0,name:"alignment-baseline"},{name:"all"},{longhands:["animation-duration","animation-timing-function","animation-delay","animation-iteration-count","animation-direction","animation-fill-mode","animation-play-state","animation-name","animation-timeline"],name:"animation"},{name:"animation-delay"},{name:"animation-direction",keywords:["normal","reverse","alternate","alternate-reverse"]},{name:"animation-duration"},{name:"animation-fill-mode",keywords:["none","forwards","backwards","both"]},{name:"animation-iteration-count",keywords:["infinite"]},{name:"animation-name",keywords:["none"]},{name:"animation-play-state",keywords:["running","paused"]},{name:"animation-timeline",keywords:["none","auto"]},{name:"animation-timing-function",keywords:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},{name:"appearance"},{name:"ascent-override"},{name:"aspect-ratio",keywords:["auto"]},{name:"backdrop-filter",keywords:["none"]},{name:"backface-visibility",keywords:["visible","hidden"]},{longhands:["background-image","background-position-x","background-position-y","background-size","background-repeat-x","background-repeat-y","background-attachment","background-origin","background-clip","background-color"],name:"background"},{name:"background-attachment",keywords:["scroll","fixed","local"]},{name:"background-blend-mode",keywords:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},{name:"background-clip",keywords:["border-box","padding-box","content-box"]},{name:"background-color",keywords:["currentcolor"]},{name:"background-image",keywords:["auto","none"]},{name:"background-origin",keywords:["border-box","padding-box","content-box"]},{longhands:["background-position-x","background-position-y"],name:"background-position"},{name:"background-position-x"},{name:"background-position-y"},{longhands:["background-repeat-x","background-repeat-y"],name:"background-repeat"},{name:"background-repeat-x"},{name:"background-repeat-y"},{name:"background-size",keywords:["auto","cover","contain"]},{name:"baseline-shift",svg:!0,keywords:["sub","super"]},{name:"block-size",keywords:["auto"]},{longhands:["border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],name:"border"},{longhands:["border-block-start-color","border-block-start-style","border-block-start-width","border-block-end-color","border-block-end-style","border-block-end-width"],name:"border-block"},{longhands:["border-block-start-color","border-block-end-color"],name:"border-block-color"},{longhands:["border-block-end-width","border-block-end-style","border-block-end-color"],name:"border-block-end"},{name:"border-block-end-color"},{name:"border-block-end-style"},{name:"border-block-end-width"},{longhands:["border-block-start-width","border-block-start-style","border-block-start-color"],name:"border-block-start"},{name:"border-block-start-color"},{name:"border-block-start-style"},{name:"border-block-start-width"},{longhands:["border-block-start-style","border-block-end-style"],name:"border-block-style"},{longhands:["border-block-start-width","border-block-end-width"],name:"border-block-width"},{longhands:["border-bottom-width","border-bottom-style","border-bottom-color"],name:"border-bottom"},{name:"border-bottom-color",keywords:["currentcolor"]},{name:"border-bottom-left-radius"},{name:"border-bottom-right-radius"},{name:"border-bottom-style",keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},{name:"border-bottom-width",keywords:["thin","medium","thick"]},{name:"border-collapse",inherited:!0,keywords:["separate","collapse"]},{longhands:["border-top-color","border-right-color","border-bottom-color","border-left-color"],name:"border-color"},{name:"border-end-end-radius"},{name:"border-end-start-radius"},{longhands:["border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat"],name:"border-image"},{name:"border-image-outset"},{name:"border-image-repeat",keywords:["stretch","repeat","round","space"]},{name:"border-image-slice"},{name:"border-image-source",keywords:["none"]},{name:"border-image-width",keywords:["auto"]},{longhands:["border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-end-color","border-inline-end-style","border-inline-end-width"],name:"border-inline"},{longhands:["border-inline-start-color","border-inline-end-color"],name:"border-inline-color"},{longhands:["border-inline-end-width","border-inline-end-style","border-inline-end-color"],name:"border-inline-end"},{name:"border-inline-end-color"},{name:"border-inline-end-style"},{name:"border-inline-end-width"},{longhands:["border-inline-start-width","border-inline-start-style","border-inline-start-color"],name:"border-inline-start"},{name:"border-inline-start-color"},{name:"border-inline-start-style"},{name:"border-inline-start-width"},{longhands:["border-inline-start-style","border-inline-end-style"],name:"border-inline-style"},{longhands:["border-inline-start-width","border-inline-end-width"],name:"border-inline-width"},{longhands:["border-left-width","border-left-style","border-left-color"],name:"border-left"},{name:"border-left-color",keywords:["currentcolor"]},{name:"border-left-style",keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},{name:"border-left-width",keywords:["thin","medium","thick"]},{longhands:["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],name:"border-radius"},{longhands:["border-right-width","border-right-style","border-right-color"],name:"border-right"},{name:"border-right-color",keywords:["currentcolor"]},{name:"border-right-style",keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},{name:"border-right-width",keywords:["thin","medium","thick"]},{longhands:["-webkit-border-horizontal-spacing","-webkit-border-vertical-spacing"],name:"border-spacing",inherited:!0},{name:"border-start-end-radius"},{name:"border-start-start-radius"},{keywords:["none"],longhands:["border-top-style","border-right-style","border-bottom-style","border-left-style"],name:"border-style"},{longhands:["border-top-width","border-top-style","border-top-color"],name:"border-top"},{name:"border-top-color",keywords:["currentcolor"]},{name:"border-top-left-radius"},{name:"border-top-right-radius"},{name:"border-top-style",keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},{name:"border-top-width",keywords:["thin","medium","thick"]},{longhands:["border-top-width","border-right-width","border-bottom-width","border-left-width"],name:"border-width"},{name:"bottom",keywords:["auto"]},{name:"box-shadow",keywords:["none"]},{name:"box-sizing",keywords:["content-box","border-box"]},{name:"break-after",keywords:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},{name:"break-before",keywords:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},{name:"break-inside",keywords:["auto","avoid","avoid-column","avoid-page"]},{svg:!0,name:"buffered-rendering"},{name:"caption-side",inherited:!0,keywords:["top","bottom"]},{name:"caret-color",inherited:!0,keywords:["auto","currentcolor"]},{name:"clear",keywords:["none","left","right","both","inline-start","inline-end"]},{name:"clip",keywords:["auto"]},{name:"clip-path",keywords:["none"]},{name:"clip-rule",svg:!0,inherited:!0,keywords:["nonzero","evenodd"]},{name:"color",inherited:!0,keywords:["currentcolor"]},{name:"color-interpolation",svg:!0,inherited:!0,keywords:["auto","srgb","linearrgb"]},{svg:!0,name:"color-interpolation-filters",inherited:!0},{name:"color-rendering",svg:!0,inherited:!0,keywords:["auto","optimizespeed","optimizequality"]},{name:"color-scheme",inherited:!0},{name:"column-count",keywords:["auto"]},{name:"column-fill",keywords:["balance","auto"]},{name:"column-gap",keywords:["normal"]},{longhands:["column-rule-width","column-rule-style","column-rule-color"],name:"column-rule"},{name:"column-rule-color",keywords:["currentcolor"]},{name:"column-rule-style",keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},{name:"column-rule-width",keywords:["thin","medium","thick"]},{name:"column-span",keywords:["none","all"]},{name:"column-width",keywords:["auto"]},{longhands:["column-width","column-count"],name:"columns"},{name:"contain",keywords:["none","strict","content","size","layout","style","paint"]},{name:"contain-intrinsic-size",keywords:["auto"]},{name:"content"},{name:"content-visibility",keywords:["visible","auto","hidden","hidden-matchable"]},{name:"counter-increment",keywords:["none"]},{name:"counter-reset",keywords:["none"]},{name:"counter-set",keywords:["none"]},{name:"cursor",inherited:!0,keywords:["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out","grab","grabbing"]},{svg:!0,name:"cx"},{svg:!0,name:"cy"},{name:"d",svg:!0,keywords:["none"]},{name:"descent-override"},{name:"direction",inherited:!0,keywords:["ltr","rtl"]},{keywords:["inline","block","list-item","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","-webkit-box","-webkit-inline-box","flex","inline-flex","grid","inline-grid","contents","flow-root","none"],name:"display"},{name:"dominant-baseline",svg:!0,inherited:!0,keywords:["auto","alphabetic","ideographic","middle","central","mathematical","hanging"]},{name:"empty-cells",inherited:!0,keywords:["show","hide"]},{name:"end"},{name:"fallback"},{name:"fill",svg:!0,inherited:!0},{svg:!0,inherited:!0,name:"fill-opacity"},{name:"fill-rule",svg:!0,inherited:!0,keywords:["nonzero","evenodd"]},{name:"filter",keywords:["none"]},{longhands:["flex-grow","flex-shrink","flex-basis"],name:"flex"},{name:"flex-basis",keywords:["auto"]},{name:"flex-direction",keywords:["row","row-reverse","column","column-reverse"]},{longhands:["flex-direction","flex-wrap"],name:"flex-flow"},{name:"flex-grow"},{name:"flex-shrink"},{name:"flex-wrap",keywords:["nowrap","wrap","wrap-reverse"]},{name:"float",keywords:["none","left","right","inline-start","inline-end"]},{name:"flood-color",svg:!0,keywords:["currentcolor"]},{name:"flood-opacity",svg:!0},{longhands:["font-style","font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian","font-weight","font-stretch","font-size","line-height","font-family"],name:"font",inherited:!0},{name:"font-display"},{name:"font-family",inherited:!0},{name:"font-feature-settings",inherited:!0,keywords:["normal"]},{name:"font-kerning",inherited:!0,keywords:["auto","normal","none"]},{name:"font-optical-sizing",inherited:!0,keywords:["auto","none"]},{name:"font-size",inherited:!0,keywords:["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller","-webkit-xxx-large"]},{name:"font-size-adjust",inherited:!0,keywords:["none"]},{name:"font-stretch",inherited:!0,keywords:["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"]},{name:"font-style",inherited:!0,keywords:["normal","italic","oblique"]},{longhands:["font-variant-ligatures","font-variant-caps","font-variant-numeric","font-variant-east-asian"],name:"font-variant",inherited:!0},{inherited:!0,keywords:["normal","small-caps","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps"],name:"font-variant-caps"},{inherited:!0,keywords:["normal","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"],name:"font-variant-east-asian"},{name:"font-variant-ligatures",inherited:!0,keywords:["normal","none","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual"]},{inherited:!0,keywords:["normal","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero"],name:"font-variant-numeric"},{name:"font-variation-settings",inherited:!0,keywords:["normal"]},{name:"font-weight",inherited:!0,keywords:["normal","bold","bolder","lighter"]},{name:"forced-color-adjust",inherited:!0,keywords:["auto","none"]},{longhands:["row-gap","column-gap"],name:"gap"},{longhands:["grid-template-rows","grid-template-columns","grid-template-areas","grid-auto-flow","grid-auto-rows","grid-auto-columns"],name:"grid"},{longhands:["grid-row-start","grid-column-start","grid-row-end","grid-column-end"],name:"grid-area"},{name:"grid-auto-columns",keywords:["auto","min-content","max-content"]},{name:"grid-auto-flow",keywords:["row","column"]},{name:"grid-auto-rows",keywords:["auto","min-content","max-content"]},{longhands:["grid-column-start","grid-column-end"],name:"grid-column"},{name:"grid-column-end",keywords:["auto"]},{longhands:["column-gap"],name:"grid-column-gap"},{name:"grid-column-start",keywords:["auto"]},{longhands:["row-gap","column-gap"],name:"grid-gap"},{longhands:["grid-row-start","grid-row-end"],name:"grid-row"},{name:"grid-row-end",keywords:["auto"]},{longhands:["row-gap"],name:"grid-row-gap"},{name:"grid-row-start",keywords:["auto"]},{longhands:["grid-template-rows","grid-template-columns","grid-template-areas"],name:"grid-template"},{keywords:["none"],name:"grid-template-areas"},{name:"grid-template-columns",keywords:["none"]},{name:"grid-template-rows",keywords:["none"]},{name:"height",keywords:["auto","fit-content","min-content","max-content"]},{name:"hyphens",inherited:!0,keywords:["none","manual","auto"]},{name:"image-orientation",inherited:!0},{name:"image-rendering",inherited:!0,keywords:["auto","optimizespeed","optimizequality","-webkit-optimize-contrast","pixelated"]},{name:"inherits"},{name:"initial-value"},{name:"inline-size",keywords:["auto"]},{longhands:["top","right","bottom","left"],name:"inset"},{longhands:["inset-block-start","inset-block-end"],name:"inset-block"},{name:"inset-block-end"},{name:"inset-block-start"},{longhands:["inset-inline-start","inset-inline-end"],name:"inset-inline"},{name:"inset-inline-end"},{name:"inset-inline-start"},{name:"isolation",keywords:["auto","isolate"]},{name:"justify-content"},{name:"justify-items"},{name:"justify-self"},{name:"left",keywords:["auto"]},{inherited:!0,keywords:["normal"],name:"letter-spacing"},{name:"lighting-color",svg:!0,keywords:["currentcolor"]},{name:"line-break",inherited:!0,keywords:["auto","loose","normal","strict","anywhere"]},{name:"line-gap-override"},{name:"line-height",inherited:!0,keywords:["normal"]},{name:"line-height-step",inherited:!0},{longhands:["list-style-position","list-style-image","list-style-type"],name:"list-style",inherited:!0},{name:"list-style-image",inherited:!0,keywords:["none"]},{name:"list-style-position",inherited:!0,keywords:["outside","inside"]},{name:"list-style-type",inherited:!0,keywords:["disc","circle","square","disclosure-open","disclosure-closed","decimal","decimal-leading-zero","arabic-indic","bengali","cambodian","khmer","devanagari","gujarati","gurmukhi","kannada","lao","malayalam","mongolian","myanmar","oriya","persian","urdu","telugu","tibetan","thai","lower-roman","upper-roman","lower-greek","lower-alpha","lower-latin","upper-alpha","upper-latin","cjk-earthly-branch","cjk-heavenly-stem","ethiopic-halehame","ethiopic-halehame-am","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","hangul","hangul-consonant","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","hebrew","armenian","lower-armenian","upper-armenian","georgian","cjk-ideographic","simp-chinese-formal","simp-chinese-informal","trad-chinese-formal","trad-chinese-informal","hiragana","katakana","hiragana-iroha","katakana-iroha","none"]},{longhands:["margin-top","margin-right","margin-bottom","margin-left"],name:"margin"},{longhands:["margin-block-start","margin-block-end"],name:"margin-block"},{name:"margin-block-end",keywords:["auto"]},{name:"margin-block-start",keywords:["auto"]},{name:"margin-bottom",keywords:["auto"]},{longhands:["margin-inline-start","margin-inline-end"],name:"margin-inline"},{name:"margin-inline-end",keywords:["auto"]},{name:"margin-inline-start",keywords:["auto"]},{name:"margin-left",keywords:["auto"]},{name:"margin-right",keywords:["auto"]},{name:"margin-top",keywords:["auto"]},{longhands:["marker-start","marker-mid","marker-end"],inherited:!0,name:"marker",svg:!0},{svg:!0,inherited:!0,keywords:["none"],name:"marker-end"},{svg:!0,inherited:!0,keywords:["none"],name:"marker-mid"},{svg:!0,inherited:!0,keywords:["none"],name:"marker-start"},{svg:!0,name:"mask"},{keywords:["luminance","alpha"],svg:!0,name:"mask-type"},{name:"math-depth",inherited:!0},{name:"math-shift",inherited:!0,keywords:["normal","compact"]},{name:"math-style",inherited:!0,keywords:["normal","compact"]},{keywords:["none"],name:"max-block-size"},{name:"max-height",keywords:["none"]},{keywords:["none"],name:"max-inline-size"},{name:"max-width",keywords:["none"]},{name:"max-zoom"},{name:"min-block-size"},{name:"min-height"},{name:"min-inline-size"},{name:"min-width"},{name:"min-zoom"},{name:"mix-blend-mode",keywords:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},{name:"negative"},{name:"object-fit",keywords:["fill","contain","cover","none","scale-down"]},{name:"object-position"},{longhands:["offset-position","offset-path","offset-distance","offset-rotate","offset-anchor"],name:"offset"},{name:"offset-anchor",keywords:["auto"]},{name:"offset-distance"},{name:"offset-path",keywords:["none"]},{name:"offset-position",keywords:["auto"]},{name:"offset-rotate",keywords:["auto","reverse"]},{name:"opacity"},{name:"order"},{name:"orientation"},{name:"origin-trial-test-property",keywords:["normal","none"]},{name:"orphans",inherited:!0},{longhands:["outline-color","outline-style","outline-width"],name:"outline"},{name:"outline-color",keywords:["currentcolor"]},{name:"outline-offset"},{name:"outline-style",keywords:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},{name:"outline-width",keywords:["thin","medium","thick"]},{longhands:["overflow-x","overflow-y"],name:"overflow"},{name:"overflow-anchor",inherited:!1,keywords:["visible","none","auto"]},{name:"overflow-block"},{name:"overflow-clip-margin"},{name:"overflow-inline"},{name:"overflow-wrap",inherited:!0,keywords:["normal","break-word","anywhere"]},{name:"overflow-x",keywords:["visible","hidden","scroll","auto","overlay","clip"]},{name:"overflow-y",keywords:["visible","hidden","scroll","auto","overlay","clip"]},{longhands:["overscroll-behavior-x","overscroll-behavior-y"],name:"overscroll-behavior"},{name:"overscroll-behavior-block"},{name:"overscroll-behavior-inline"},{name:"overscroll-behavior-x",keywords:["auto","contain","none"]},{name:"overscroll-behavior-y",keywords:["auto","contain","none"]},{name:"pad"},{longhands:["padding-top","padding-right","padding-bottom","padding-left"],name:"padding"},{longhands:["padding-block-start","padding-block-end"],name:"padding-block"},{name:"padding-block-end"},{name:"padding-block-start"},{name:"padding-bottom"},{longhands:["padding-inline-start","padding-inline-end"],name:"padding-inline"},{name:"padding-inline-end"},{name:"padding-inline-start"},{name:"padding-left"},{name:"padding-right"},{name:"padding-top"},{name:"page",keywords:["auto"]},{longhands:["break-after"],name:"page-break-after"},{longhands:["break-before"],name:"page-break-before"},{longhands:["break-inside"],name:"page-break-inside"},{name:"page-orientation"},{svg:!0,inherited:!0,keywords:["normal","fill","stroke","markers"],name:"paint-order"},{name:"perspective",keywords:["none"]},{name:"perspective-origin"},{longhands:["align-content","justify-content"],name:"place-content"},{longhands:["align-items","justify-items"],name:"place-items"},{longhands:["align-self","justify-self"],name:"place-self"},{name:"pointer-events",inherited:!0,keywords:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","bounding-box","all"]},{name:"position",keywords:["static","relative","absolute","fixed","sticky"]},{name:"prefix"},{name:"quotes",inherited:!0,keywords:["auto","none"]},{svg:!0,name:"r"},{name:"range"},{name:"resize",keywords:["none","both","horizontal","vertical","block","inline"]},{name:"right",keywords:["auto"]},{name:"rotate"},{name:"row-gap",keywords:["normal"]},{inherited:!0,name:"ruby-position"},{name:"rx",svg:!0,keywords:["auto"]},{name:"ry",svg:!0,keywords:["auto"]},{name:"scale"},{name:"scroll-behavior",keywords:["auto","smooth"]},{name:"scroll-customization"},{longhands:["scroll-margin-top","scroll-margin-right","scroll-margin-bottom","scroll-margin-left"],name:"scroll-margin"},{longhands:["scroll-margin-block-start","scroll-margin-block-end"],name:"scroll-margin-block"},{name:"scroll-margin-block-end"},{name:"scroll-margin-block-start"},{name:"scroll-margin-bottom"},{longhands:["scroll-margin-inline-start","scroll-margin-inline-end"],name:"scroll-margin-inline"},{name:"scroll-margin-inline-end"},{name:"scroll-margin-inline-start"},{name:"scroll-margin-left"},{name:"scroll-margin-right"},{name:"scroll-margin-top"},{longhands:["scroll-padding-top","scroll-padding-right","scroll-padding-bottom","scroll-padding-left"],name:"scroll-padding"},{longhands:["scroll-padding-block-start","scroll-padding-block-end"],name:"scroll-padding-block"},{name:"scroll-padding-block-end",keywords:["auto"]},{name:"scroll-padding-block-start",keywords:["auto"]},{name:"scroll-padding-bottom",keywords:["auto"]},{longhands:["scroll-padding-inline-start","scroll-padding-inline-end"],name:"scroll-padding-inline"},{name:"scroll-padding-inline-end",keywords:["auto"]},{name:"scroll-padding-inline-start",keywords:["auto"]},{name:"scroll-padding-left",keywords:["auto"]},{name:"scroll-padding-right",keywords:["auto"]},{name:"scroll-padding-top",keywords:["auto"]},{name:"scroll-snap-align",keywords:["none","start","end","center"]},{name:"scroll-snap-stop",keywords:["normal","always"]},{name:"scroll-snap-type",keywords:["none","x","y","block","inline","both","mandatory","proximity"]},{name:"scrollbar-gutter",inherited:!1,keywords:["auto","stable","always"]},{name:"scrollbar-width",inherited:!1,keywords:["auto","thin","none"]},{name:"shape-image-threshold"},{name:"shape-margin",keywords:["none"]},{name:"shape-outside",keywords:["none"]},{name:"shape-rendering",svg:!0,inherited:!0,keywords:["auto","optimizespeed","crispedges","geometricprecision"]},{name:"size"},{name:"source"},{name:"speak",inherited:!0,keywords:["none","normal","spell-out","digits","literal-punctuation","no-punctuation"]},{name:"speak-as"},{name:"src"},{name:"start"},{name:"stop-color",svg:!0,keywords:["currentcolor"]},{name:"stop-opacity",svg:!0},{name:"stroke",svg:!0,inherited:!0},{name:"stroke-dasharray",svg:!0,inherited:!0,keywords:["none"]},{name:"stroke-dashoffset",svg:!0,inherited:!0},{name:"stroke-linecap",svg:!0,inherited:!0,keywords:["butt","round","square"]},{name:"stroke-linejoin",svg:!0,inherited:!0,keywords:["miter","bevel","round"]},{name:"stroke-miterlimit",svg:!0,inherited:!0},{svg:!0,inherited:!0,name:"stroke-opacity"},{svg:!0,inherited:!0,name:"stroke-width"},{name:"suffix"},{name:"symbols"},{name:"syntax"},{name:"system"},{name:"tab-size",inherited:!0},{name:"table-layout",keywords:["auto","fixed"]},{name:"text-align",inherited:!0,keywords:["left","right","center","justify","-webkit-left","-webkit-right","-webkit-center","start","end"]},{name:"text-align-last",inherited:!0,keywords:["auto","start","end","left","right","center","justify"]},{name:"text-anchor",svg:!0,inherited:!0,keywords:["start","middle","end"]},{name:"text-combine-upright",inherited:!0,keywords:["none","all"]},{longhands:["text-decoration-line","text-decoration-thickness","text-decoration-style","text-decoration-color"],name:"text-decoration"},{name:"text-decoration-color",keywords:["currentcolor"]},{name:"text-decoration-line",keywords:["none","underline","overline","line-through","blink"]},{name:"text-decoration-skip-ink",inherited:!0,keywords:["none","auto"]},{name:"text-decoration-style",keywords:["solid","double","dotted","dashed","wavy"]},{name:"text-decoration-thickness",inherited:!0,keywords:["auto","from-font"]},{name:"text-indent",inherited:!0},{name:"text-justify",inherited:!0,keywords:["auto","none","inter-word","distribute"]},{name:"text-orientation",inherited:!0,keywords:["sideways","mixed","upright"]},{name:"text-overflow",keywords:["clip","ellipsis"]},{name:"text-rendering",inherited:!0,keywords:["auto","optimizespeed","optimizelegibility","geometricprecision"]},{name:"text-shadow",inherited:!0,keywords:["none"]},{name:"text-size-adjust",inherited:!0,keywords:["none","auto"]},{name:"text-transform",inherited:!0,keywords:["capitalize","uppercase","lowercase","none","math-auto"]},{name:"text-underline-offset",inherited:!0,keywords:["auto"]},{name:"text-underline-position",inherited:!0,keywords:["auto","from-font","under","left","right"]},{name:"time-range"},{name:"top",keywords:["auto"]},{name:"touch-action",keywords:["auto","none","pan-x","pan-left","pan-right","pan-y","pan-up","pan-down","pinch-zoom","manipulation"]},{name:"transform",keywords:["none"]},{name:"transform-box",keywords:["fill-box","view-box"]},{name:"transform-origin"},{name:"transform-style",keywords:["flat","preserve-3d"]},{longhands:["transition-property","transition-duration","transition-timing-function","transition-delay"],name:"transition"},{name:"transition-delay"},{name:"transition-duration"},{name:"transition-property",keywords:["none"]},{name:"transition-timing-function",keywords:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},{name:"translate"},{name:"unicode-bidi",keywords:["normal","embed","bidi-override","isolate","plaintext","isolate-override"]},{name:"unicode-range"},{name:"user-select",inherited:!0,keywords:["auto","none","text","all"]},{name:"user-zoom"},{keywords:["none","non-scaling-stroke"],svg:!0,name:"vector-effect"},{name:"vertical-align",keywords:["baseline","sub","super","text-top","text-bottom","middle"]},{name:"viewport-fit"},{name:"visibility",inherited:!0,keywords:["visible","hidden","collapse"]},{name:"white-space",inherited:!0,keywords:["none","normal","pre","pre-wrap","pre-line","nowrap","-webkit-nowrap","break-spaces"]},{name:"widows",inherited:!0},{name:"width",keywords:["auto","fit-content","min-content","max-content"]},{keywords:["auto"],name:"will-change"},{name:"word-break",inherited:!0,keywords:["normal","break-all","keep-all","break-word"]},{inherited:!0,keywords:["normal"],name:"word-spacing"},{name:"writing-mode",inherited:!0,keywords:["horizontal-tb","vertical-rl","vertical-lr"]},{svg:!0,name:"x"},{svg:!0,name:"y"},{name:"z-index",keywords:["auto"]},{name:"zoom"}],j={"-webkit-app-region":{values:["none","drag","no-drag"]},"-webkit-box-align":{values:["stretch","start","center","end","baseline"]},"-webkit-box-decoration-break":{values:["slice","clone"]},"-webkit-box-direction":{values:["normal","reverse"]},"-webkit-box-orient":{values:["horizontal","vertical"]},"-webkit-box-pack":{values:["start","center","end","justify"]},"-webkit-line-break":{values:["auto","loose","normal","strict","after-white-space","anywhere"]},"-webkit-print-color-adjust":{values:["economy","exact"]},"-webkit-rtl-ordering":{values:["logical","visual"]},"-webkit-ruby-position":{values:["before","after"]},"-webkit-text-security":{values:["none","disc","circle","square"]},"-webkit-user-drag":{values:["auto","none","element"]},"-webkit-user-modify":{values:["read-only","read-write","read-write-plaintext-only"]},"alignment-baseline":{values:["baseline","alphabetic","ideographic","middle","central","mathematical"]},"animation-direction":{values:["normal","reverse","alternate","alternate-reverse"]},"animation-fill-mode":{values:["none","forwards","backwards","both"]},"animation-iteration-count":{values:["infinite"]},"animation-name":{values:["none"]},"animation-play-state":{values:["running","paused"]},"animation-timeline":{values:["none","auto"]},"animation-timing-function":{values:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},"aspect-ratio":{values:["auto"]},"backdrop-filter":{values:["none"]},"backface-visibility":{values:["visible","hidden"]},"background-attachment":{values:["scroll","fixed","local"]},"background-blend-mode":{values:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},"background-clip":{values:["border-box","padding-box","content-box"]},"background-color":{values:["currentcolor"]},"background-image":{values:["auto","none"]},"background-origin":{values:["border-box","padding-box","content-box"]},"background-size":{values:["auto","cover","contain"]},"baseline-shift":{values:["sub","super"]},"block-size":{values:["auto"]},"border-bottom-color":{values:["currentcolor"]},"border-bottom-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-bottom-width":{values:["thin","medium","thick"]},"border-collapse":{values:["separate","collapse"]},"border-image-repeat":{values:["stretch","repeat","round","space"]},"border-image-source":{values:["none"]},"border-image-width":{values:["auto"]},"border-left-color":{values:["currentcolor"]},"border-left-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-left-width":{values:["thin","medium","thick"]},"border-right-color":{values:["currentcolor"]},"border-right-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-right-width":{values:["thin","medium","thick"]},"border-style":{values:["none"]},"border-top-color":{values:["currentcolor"]},"border-top-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"border-top-width":{values:["thin","medium","thick"]},bottom:{values:["auto"]},"box-shadow":{values:["none"]},"box-sizing":{values:["content-box","border-box"]},"break-after":{values:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},"break-before":{values:["auto","avoid","avoid-column","avoid-page","column","left","page","recto","right","verso"]},"break-inside":{values:["auto","avoid","avoid-column","avoid-page"]},"caption-side":{values:["top","bottom"]},"caret-color":{values:["auto","currentcolor"]},clear:{values:["none","left","right","both","inline-start","inline-end"]},clip:{values:["auto"]},"clip-path":{values:["none"]},"clip-rule":{values:["nonzero","evenodd"]},color:{values:["currentcolor"]},"color-interpolation":{values:["auto","srgb","linearrgb"]},"color-rendering":{values:["auto","optimizespeed","optimizequality"]},"column-count":{values:["auto"]},"column-fill":{values:["balance","auto"]},"column-gap":{values:["normal"]},"column-rule-color":{values:["currentcolor"]},"column-rule-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"column-rule-width":{values:["thin","medium","thick"]},"column-span":{values:["none","all"]},"column-width":{values:["auto"]},contain:{values:["none","strict","content","size","layout","style","paint"]},"contain-intrinsic-size":{values:["auto"]},"content-visibility":{values:["visible","auto","hidden","hidden-matchable"]},"counter-increment":{values:["none"]},"counter-reset":{values:["none"]},"counter-set":{values:["none"]},cursor:{values:["auto","default","none","context-menu","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out","grab","grabbing"]},d:{values:["none"]},direction:{values:["ltr","rtl"]},display:{values:["inline","block","list-item","inline-block","table","inline-table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption","-webkit-box","-webkit-inline-box","flex","inline-flex","grid","inline-grid","contents","flow-root","none"]},"dominant-baseline":{values:["auto","alphabetic","ideographic","middle","central","mathematical","hanging"]},"empty-cells":{values:["show","hide"]},"fill-rule":{values:["nonzero","evenodd"]},filter:{values:["none"]},"flex-basis":{values:["auto"]},"flex-direction":{values:["row","row-reverse","column","column-reverse"]},"flex-wrap":{values:["nowrap","wrap","wrap-reverse"]},float:{values:["none","left","right","inline-start","inline-end"]},"flood-color":{values:["currentcolor"]},"font-feature-settings":{values:["normal"]},"font-kerning":{values:["auto","normal","none"]},"font-optical-sizing":{values:["auto","none"]},"font-size":{values:["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller","-webkit-xxx-large"]},"font-size-adjust":{values:["none"]},"font-stretch":{values:["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"]},"font-style":{values:["normal","italic","oblique"]},"font-variant-caps":{values:["normal","small-caps","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps"]},"font-variant-east-asian":{values:["normal","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"]},"font-variant-ligatures":{values:["normal","none","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual"]},"font-variant-numeric":{values:["normal","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero"]},"font-variation-settings":{values:["normal"]},"font-weight":{values:["normal","bold","bolder","lighter"]},"forced-color-adjust":{values:["auto","none"]},"grid-auto-columns":{values:["auto","min-content","max-content"]},"grid-auto-flow":{values:["row","column"]},"grid-auto-rows":{values:["auto","min-content","max-content"]},"grid-column-end":{values:["auto"]},"grid-column-start":{values:["auto"]},"grid-row-end":{values:["auto"]},"grid-row-start":{values:["auto"]},"grid-template-areas":{values:["none"]},"grid-template-columns":{values:["none"]},"grid-template-rows":{values:["none"]},height:{values:["auto","fit-content","min-content","max-content"]},hyphens:{values:["none","manual","auto"]},"image-rendering":{values:["auto","optimizespeed","optimizequality","-webkit-optimize-contrast","pixelated"]},"inline-size":{values:["auto"]},isolation:{values:["auto","isolate"]},left:{values:["auto"]},"letter-spacing":{values:["normal"]},"lighting-color":{values:["currentcolor"]},"line-break":{values:["auto","loose","normal","strict","anywhere"]},"line-height":{values:["normal"]},"list-style-image":{values:["none"]},"list-style-position":{values:["outside","inside"]},"list-style-type":{values:["disc","circle","square","disclosure-open","disclosure-closed","decimal","decimal-leading-zero","arabic-indic","bengali","cambodian","khmer","devanagari","gujarati","gurmukhi","kannada","lao","malayalam","mongolian","myanmar","oriya","persian","urdu","telugu","tibetan","thai","lower-roman","upper-roman","lower-greek","lower-alpha","lower-latin","upper-alpha","upper-latin","cjk-earthly-branch","cjk-heavenly-stem","ethiopic-halehame","ethiopic-halehame-am","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","hangul","hangul-consonant","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","hebrew","armenian","lower-armenian","upper-armenian","georgian","cjk-ideographic","simp-chinese-formal","simp-chinese-informal","trad-chinese-formal","trad-chinese-informal","hiragana","katakana","hiragana-iroha","katakana-iroha","none"]},"margin-block-end":{values:["auto"]},"margin-block-start":{values:["auto"]},"margin-bottom":{values:["auto"]},"margin-inline-end":{values:["auto"]},"margin-inline-start":{values:["auto"]},"margin-left":{values:["auto"]},"margin-right":{values:["auto"]},"margin-top":{values:["auto"]},"marker-end":{values:["none"]},"marker-mid":{values:["none"]},"marker-start":{values:["none"]},"mask-type":{values:["luminance","alpha"]},"math-shift":{values:["normal","compact"]},"math-style":{values:["normal","compact"]},"max-block-size":{values:["none"]},"max-height":{values:["none"]},"max-inline-size":{values:["none"]},"max-width":{values:["none"]},"mix-blend-mode":{values:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},"object-fit":{values:["fill","contain","cover","none","scale-down"]},"offset-anchor":{values:["auto"]},"offset-path":{values:["none"]},"offset-position":{values:["auto"]},"offset-rotate":{values:["auto","reverse"]},"origin-trial-test-property":{values:["normal","none"]},"outline-color":{values:["currentcolor"]},"outline-style":{values:["none","hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"outline-width":{values:["thin","medium","thick"]},"overflow-anchor":{values:["visible","none","auto"]},"overflow-wrap":{values:["normal","break-word","anywhere"]},"overflow-x":{values:["visible","hidden","scroll","auto","overlay","clip"]},"overflow-y":{values:["visible","hidden","scroll","auto","overlay","clip"]},"overscroll-behavior-x":{values:["auto","contain","none"]},"overscroll-behavior-y":{values:["auto","contain","none"]},page:{values:["auto"]},"paint-order":{values:["normal","fill","stroke","markers"]},perspective:{values:["none"]},"pointer-events":{values:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","bounding-box","all"]},position:{values:["static","relative","absolute","fixed","sticky"]},quotes:{values:["auto","none"]},resize:{values:["none","both","horizontal","vertical","block","inline"]},right:{values:["auto"]},"row-gap":{values:["normal"]},rx:{values:["auto"]},ry:{values:["auto"]},"scroll-behavior":{values:["auto","smooth"]},"scroll-padding-block-end":{values:["auto"]},"scroll-padding-block-start":{values:["auto"]},"scroll-padding-bottom":{values:["auto"]},"scroll-padding-inline-end":{values:["auto"]},"scroll-padding-inline-start":{values:["auto"]},"scroll-padding-left":{values:["auto"]},"scroll-padding-right":{values:["auto"]},"scroll-padding-top":{values:["auto"]},"scroll-snap-align":{values:["none","start","end","center"]},"scroll-snap-stop":{values:["normal","always"]},"scroll-snap-type":{values:["none","x","y","block","inline","both","mandatory","proximity"]},"scrollbar-gutter":{values:["auto","stable","always"]},"scrollbar-width":{values:["auto","thin","none"]},"shape-margin":{values:["none"]},"shape-outside":{values:["none"]},"shape-rendering":{values:["auto","optimizespeed","crispedges","geometricprecision"]},speak:{values:["none","normal","spell-out","digits","literal-punctuation","no-punctuation"]},"stop-color":{values:["currentcolor"]},"stroke-dasharray":{values:["none"]},"stroke-linecap":{values:["butt","round","square"]},"stroke-linejoin":{values:["miter","bevel","round"]},"table-layout":{values:["auto","fixed"]},"text-align":{values:["left","right","center","justify","-webkit-left","-webkit-right","-webkit-center","start","end"]},"text-align-last":{values:["auto","start","end","left","right","center","justify"]},"text-anchor":{values:["start","middle","end"]},"text-combine-upright":{values:["none","all"]},"text-decoration-color":{values:["currentcolor"]},"text-decoration-line":{values:["none","underline","overline","line-through","blink"]},"text-decoration-skip-ink":{values:["none","auto"]},"text-decoration-style":{values:["solid","double","dotted","dashed","wavy"]},"text-decoration-thickness":{values:["auto","from-font"]},"text-justify":{values:["auto","none","inter-word","distribute"]},"text-orientation":{values:["sideways","mixed","upright"]},"text-overflow":{values:["clip","ellipsis"]},"text-rendering":{values:["auto","optimizespeed","optimizelegibility","geometricprecision"]},"text-shadow":{values:["none"]},"text-size-adjust":{values:["none","auto"]},"text-transform":{values:["capitalize","uppercase","lowercase","none","math-auto"]},"text-underline-offset":{values:["auto"]},"text-underline-position":{values:["auto","from-font","under","left","right"]},top:{values:["auto"]},"touch-action":{values:["auto","none","pan-x","pan-left","pan-right","pan-y","pan-up","pan-down","pinch-zoom","manipulation"]},transform:{values:["none"]},"transform-box":{values:["fill-box","view-box"]},"transform-style":{values:["flat","preserve-3d"]},"transition-property":{values:["none"]},"transition-timing-function":{values:["linear","ease","ease-in","ease-out","ease-in-out","jump-both","jump-end","jump-none","jump-start","step-start","step-end"]},"unicode-bidi":{values:["normal","embed","bidi-override","isolate","plaintext","isolate-override"]},"user-select":{values:["auto","none","text","all"]},"vector-effect":{values:["none","non-scaling-stroke"]},"vertical-align":{values:["baseline","sub","super","text-top","text-bottom","middle"]},visibility:{values:["visible","hidden","collapse"]},"white-space":{values:["none","normal","pre","pre-wrap","pre-line","nowrap","-webkit-nowrap","break-spaces"]},width:{values:["auto","fit-content","min-content","max-content"]},"will-change":{values:["auto"]},"word-break":{values:["normal","break-all","keep-all","break-word"]},"word-spacing":{values:["normal"]},"writing-mode":{values:["horizontal-tb","vertical-rl","vertical-lr"]},"z-index":{values:["auto"]}},z=new Map([["-epub-caption-side","caption-side"],["-epub-text-combine","-webkit-text-combine"],["-epub-text-emphasis","-webkit-text-emphasis"],["-epub-text-emphasis-color","-webkit-text-emphasis-color"],["-epub-text-emphasis-style","-webkit-text-emphasis-style"],["-epub-text-orientation","-webkit-text-orientation"],["-epub-text-transform","text-transform"],["-epub-word-break","word-break"],["-epub-writing-mode","-webkit-writing-mode"],["-webkit-align-content","align-content"],["-webkit-align-items","align-items"],["-webkit-align-self","align-self"],["-webkit-animation","animation"],["-webkit-animation-delay","animation-delay"],["-webkit-animation-direction","animation-direction"],["-webkit-animation-duration","animation-duration"],["-webkit-animation-fill-mode","animation-fill-mode"],["-webkit-animation-iteration-count","animation-iteration-count"],["-webkit-animation-name","animation-name"],["-webkit-animation-play-state","animation-play-state"],["-webkit-animation-timing-function","animation-timing-function"],["-webkit-appearance","appearance"],["-webkit-backface-visibility","backface-visibility"],["-webkit-background-clip","background-clip"],["-webkit-background-origin","background-origin"],["-webkit-background-size","background-size"],["-webkit-border-after","border-block-end"],["-webkit-border-after-color","border-block-end-color"],["-webkit-border-after-style","border-block-end-style"],["-webkit-border-after-width","border-block-end-width"],["-webkit-border-before","border-block-start"],["-webkit-border-before-color","border-block-start-color"],["-webkit-border-before-style","border-block-start-style"],["-webkit-border-before-width","border-block-start-width"],["-webkit-border-bottom-left-radius","border-bottom-left-radius"],["-webkit-border-bottom-right-radius","border-bottom-right-radius"],["-webkit-border-end","border-inline-end"],["-webkit-border-end-color","border-inline-end-color"],["-webkit-border-end-style","border-inline-end-style"],["-webkit-border-end-width","border-inline-end-width"],["-webkit-border-radius","border-radius"],["-webkit-border-start","border-inline-start"],["-webkit-border-start-color","border-inline-start-color"],["-webkit-border-start-style","border-inline-start-style"],["-webkit-border-start-width","border-inline-start-width"],["-webkit-border-top-left-radius","border-top-left-radius"],["-webkit-border-top-right-radius","border-top-right-radius"],["-webkit-box-shadow","box-shadow"],["-webkit-box-sizing","box-sizing"],["-webkit-clip-path","clip-path"],["-webkit-column-count","column-count"],["-webkit-column-gap","column-gap"],["-webkit-column-rule","column-rule"],["-webkit-column-rule-color","column-rule-color"],["-webkit-column-rule-style","column-rule-style"],["-webkit-column-rule-width","column-rule-width"],["-webkit-column-span","column-span"],["-webkit-column-width","column-width"],["-webkit-columns","columns"],["-webkit-filter","filter"],["-webkit-flex","flex"],["-webkit-flex-basis","flex-basis"],["-webkit-flex-direction","flex-direction"],["-webkit-flex-flow","flex-flow"],["-webkit-flex-grow","flex-grow"],["-webkit-flex-shrink","flex-shrink"],["-webkit-flex-wrap","flex-wrap"],["-webkit-font-feature-settings","font-feature-settings"],["-webkit-justify-content","justify-content"],["-webkit-logical-height","block-size"],["-webkit-logical-width","inline-size"],["-webkit-margin-after","margin-block-end"],["-webkit-margin-before","margin-block-start"],["-webkit-margin-end","margin-inline-end"],["-webkit-margin-start","margin-inline-start"],["-webkit-max-logical-height","max-block-size"],["-webkit-max-logical-width","max-inline-size"],["-webkit-min-logical-height","min-block-size"],["-webkit-min-logical-width","min-inline-size"],["-webkit-opacity","opacity"],["-webkit-order","order"],["-webkit-padding-after","padding-block-end"],["-webkit-padding-before","padding-block-start"],["-webkit-padding-end","padding-inline-end"],["-webkit-padding-start","padding-inline-start"],["-webkit-perspective","perspective"],["-webkit-perspective-origin","perspective-origin"],["-webkit-shape-image-threshold","shape-image-threshold"],["-webkit-shape-margin","shape-margin"],["-webkit-shape-outside","shape-outside"],["-webkit-text-size-adjust","text-size-adjust"],["-webkit-transform","transform"],["-webkit-transform-origin","transform-origin"],["-webkit-transform-style","transform-style"],["-webkit-transition","transition"],["-webkit-transition-delay","transition-delay"],["-webkit-transition-duration","transition-duration"],["-webkit-transition-property","transition-property"],["-webkit-transition-timing-function","transition-timing-function"],["-webkit-user-select","user-select"],["word-wrap","overflow-wrap"]]);class V{constructor(e,t){this._values=[],this._longhands=new Map,this._shorthands=new Map,this._inherited=new Set,this._svgProperties=new Set,this._propertyValues=new Map,this._aliasesFor=t;for(let t=0;t<e.length;++t){const s=e[t],i=s.name;if(!CSS.supports(i,"initial"))continue;this._values.push(i),s.inherited&&this._inherited.add(i),s.svg&&this._svgProperties.add(i);const r=e[t].longhands;if(r){this._longhands.set(i,r);for(let e=0;e<r.length;++e){const t=r[e];let s=this._shorthands.get(t);s||(s=[],this._shorthands.set(t,s)),s.push(i)}}}this._values.sort(V._sortPrefixesToEnd),this._valuesSet=new Set(this._values);const s=new Map;for(const[e,t]of Object.entries(j))s.set(e,new Set(t.values));for(const[e,t]of Object.entries(ie))s.has(e)?v.addAll(s.get(e),t.values):s.set(e,new Set(t.values));for(const[e,t]of s){for(const s of oe)!t.has(s)&&CSS.supports(e,s)&&t.add(s);this._propertyValues.set(e,[...t])}this._nameValuePresets=[],this._nameValuePresetsIncludingSVG=[];for(const e of this._valuesSet){const t=this._specificPropertyValues(e).filter((t=>CSS.supports(e,t))).sort(V._sortPrefixesToEnd).map((t=>`${e}: ${t}`));this.isSVGProperty(e)||this._nameValuePresets.push(...t),this._nameValuePresetsIncludingSVG.push(...t)}}static _sortPrefixesToEnd(e,t){const s=e.startsWith("-webkit-"),i=t.startsWith("-webkit-");return s&&!i?1:!s&&i||e<t?-1:e>t?1:0}allProperties(){return this._values}nameValuePresets(e){return e?this._nameValuePresetsIncludingSVG:this._nameValuePresets}isSVGProperty(e){return e=e.toLowerCase(),this._svgProperties.has(e)}longhands(e){return this._longhands.get(e)||null}shorthands(e){return this._shorthands.get(e)||null}isColorAwareProperty(e){return te.has(e.toLowerCase())||this.isCustomProperty(e.toLowerCase())}isFontFamilyProperty(e){return"font-family"===e.toLowerCase()}isAngleAwareProperty(e){const t=e.toLowerCase();return te.has(t)||se.has(t)}isGridAreaDefiningProperty(e){return"grid"===(e=e.toLowerCase())||"grid-template"===e||"grid-template-areas"===e}isLengthProperty(e){return"line-height"!==(e=e.toLowerCase())&&(Y.has(e)||e.startsWith("margin")||e.startsWith("padding")||-1!==e.indexOf("width")||-1!==e.indexOf("height"))}isBezierAwareProperty(e){return e=e.toLowerCase(),Z.has(e)||this.isCustomProperty(e)}isFontAwareProperty(e){return e=e.toLowerCase(),ee.has(e)||this.isCustomProperty(e)}isCustomProperty(e){return e.startsWith("--")}isShadowProperty(e){return"box-shadow"===(e=e.toLowerCase())||"text-shadow"===e||"-webkit-box-shadow"===e}isStringProperty(e){return"content"===(e=e.toLowerCase())}canonicalPropertyName(e){if(this.isCustomProperty(e))return e;e=e.toLowerCase();const t=this._aliasesFor.get(e);if(t)return t;if(!e||e.length<9||"-"!==e.charAt(0))return e;const s=e.match(/(?:-webkit-)(.+)/);return s&&this._valuesSet.has(s[1])?s[1]:e}isCSSPropertyName(e){return!!((e=e.toLowerCase()).startsWith("--")&&e.length>2||e.startsWith("-moz-")||e.startsWith("-ms-")||e.startsWith("-o-")||e.startsWith("-webkit-"))||this._valuesSet.has(e)}isPropertyInherited(e){return(e=e.toLowerCase()).startsWith("--")||this._inherited.has(this.canonicalPropertyName(e))||this._inherited.has(e)}_specificPropertyValues(e){const t=e.replace(/^-webkit-/,""),s=this._propertyValues;let i=s.get(e)||s.get(t);if(!i){i=[];for(const t of oe)CSS.supports(e,t)&&i.push(t);s.set(e,i)}return i}propertyValues(e){const t=["inherit","initial","revert","unset"];if(e=e.toLowerCase(),t.push(...this._specificPropertyValues(e)),this.isColorAwareProperty(e)){t.push("currentColor");for(const e in s.Nicknames)t.push(e)}return t.sort(V._sortPrefixesToEnd)}propertyUsageWeight(e){return re.get(e)||re.get(this.canonicalPropertyName(e))||0}getValuePreset(e,t){const s=Q.get(e);let i=s?s.get(t):null;if(!i)return null;let r=i.length,o=i.length;return i&&(r=i.indexOf("|"),o=i.lastIndexOf("|"),o=r===o?o:o-1,i=i.replace(/\|/g,"")),{text:i,startColumn:r,endColumn:o}}}const W=/(var\(\s*--.*?\))/g,G=/((?:\[[\w\- ]+\]\s*)*(?:"[^"]+"|'[^']+'))[^'"\[]*\[?[^'"\[]*/;let $=null;function K(){if(!$){$=new V(H,z)}return $}const X=new Map([["linear-gradient","linear-gradient(|45deg, black, transparent|)"],["radial-gradient","radial-gradient(|black, transparent|)"],["repeating-linear-gradient","repeating-linear-gradient(|45deg, black, transparent 100px|)"],["repeating-radial-gradient","repeating-radial-gradient(|black, transparent 100px|)"],["url","url(||)"]]),J=new Map([["blur","blur(|1px|)"],["brightness","brightness(|0.5|)"],["contrast","contrast(|0.5|)"],["drop-shadow","drop-shadow(|2px 4px 6px black|)"],["grayscale","grayscale(|1|)"],["hue-rotate","hue-rotate(|45deg|)"],["invert","invert(|1|)"],["opacity","opacity(|0.5|)"],["saturate","saturate(|0.5|)"],["sepia","sepia(|1|)"],["url","url(||)"]]),Q=new Map([["filter",J],["backdrop-filter",J],["background",X],["background-image",X],["-webkit-mask-image",X],["transform",new Map([["scale","scale(|1.5|)"],["scaleX","scaleX(|1.5|)"],["scaleY","scaleY(|1.5|)"],["scale3d","scale3d(|1.5, 1.5, 1.5|)"],["rotate","rotate(|45deg|)"],["rotateX","rotateX(|45deg|)"],["rotateY","rotateY(|45deg|)"],["rotateZ","rotateZ(|45deg|)"],["rotate3d","rotate3d(|1, 1, 1, 45deg|)"],["skew","skew(|10deg, 10deg|)"],["skewX","skewX(|10deg|)"],["skewY","skewY(|10deg|)"],["translate","translate(|10px, 10px|)"],["translateX","translateX(|10px|)"],["translateY","translateY(|10px|)"],["translateZ","translateZ(|10px|)"],["translate3d","translate3d(|10px, 10px, 10px|)"],["matrix","matrix(|1, 0, 0, 1, 0, 0|)"],["matrix3d","matrix3d(|1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1|)"],["perspective","perspective(|10px|)"]])]]),Y=new Set(["background-position","border-spacing","bottom","font-size","height","left","letter-spacing","max-height","max-width","min-height","min-width","right","text-indent","top","width","word-spacing","grid-row-gap","grid-column-gap","row-gap"]),Z=new Set(["animation","animation-timing-function","transition","transition-timing-function","-webkit-animation","-webkit-animation-timing-function","-webkit-transition","-webkit-transition-timing-function"]),ee=new Set(["font-size","line-height","font-weight","font-family","letter-spacing"]),te=new Set(["background","background-color","background-image","border","border-color","border-image","border-image-source","border-bottom","border-bottom-color","border-left","border-left-color","border-right","border-right-color","border-top","border-top-color","box-shadow","caret-color","color","column-rule","column-rule-color","content","fill","list-style-image","outline","outline-color","stroke","text-decoration-color","text-shadow","-webkit-border-after","-webkit-border-after-color","-webkit-border-before","-webkit-border-before-color","-webkit-border-end","-webkit-border-end-color","-webkit-border-start","-webkit-border-start-color","-webkit-box-reflect","-webkit-box-shadow","-webkit-column-rule-color","-webkit-mask","-webkit-mask-box-image","-webkit-mask-box-image-source","-webkit-mask-image","-webkit-tap-highlight-color","-webkit-text-decoration-color","-webkit-text-emphasis","-webkit-text-emphasis-color","-webkit-text-fill-color","-webkit-text-stroke","-webkit-text-stroke-color"]),se=new Set(["-webkit-border-image","transform","-webkit-transform","rotate","filter","-webkit-filter","backdrop-filter","offset","offset-rotate","font-style"]),ie={"background-repeat":{values:["repeat","repeat-x","repeat-y","no-repeat","space","round"]},content:{values:["normal","close-quote","no-close-quote","no-open-quote","open-quote"]},"baseline-shift":{values:["baseline"]},"max-height":{values:["min-content","max-content","-webkit-fill-available","fit-content"]},color:{values:["black"]},"background-color":{values:["white"]},"box-shadow":{values:["inset"]},"text-shadow":{values:["0 0 black"]},"-webkit-writing-mode":{values:["horizontal-tb","vertical-rl","vertical-lr"]},"writing-mode":{values:["lr","rl","tb","lr-tb","rl-tb","tb-rl"]},"page-break-inside":{values:["avoid"]},cursor:{values:["-webkit-zoom-in","-webkit-zoom-out","-webkit-grab","-webkit-grabbing"]},"border-width":{values:["medium","thick","thin"]},"border-style":{values:["hidden","inset","groove","ridge","outset","dotted","dashed","solid","double"]},size:{values:["a3","a4","a5","b4","b5","landscape","ledger","legal","letter","portrait"]},overflow:{values:["hidden","visible","overlay","scroll"]},"overscroll-behavior":{values:["contain"]},"text-rendering":{values:["optimizeSpeed","optimizeLegibility","geometricPrecision"]},"text-align":{values:["-webkit-auto","-webkit-match-parent"]},"clip-path":{values:["circle","ellipse","inset","polygon","url"]},"color-interpolation":{values:["sRGB","linearRGB"]},"word-wrap":{values:["normal","break-word"]},"font-weight":{values:["100","200","300","400","500","600","700","800","900"]},"-webkit-text-emphasis":{values:["circle","filled","open","dot","double-circle","triangle","sesame"]},"color-rendering":{values:["optimizeSpeed","optimizeQuality"]},"-webkit-text-combine":{values:["horizontal"]},"text-orientation":{values:["sideways-right"]},outline:{values:["inset","groove","ridge","outset","dotted","dashed","solid","double","medium","thick","thin"]},font:{values:["caption","icon","menu","message-box","small-caption","-webkit-mini-control","-webkit-small-control","-webkit-control","status-bar"]},"dominant-baseline":{values:["text-before-edge","text-after-edge","use-script","no-change","reset-size"]},"-webkit-text-emphasis-position":{values:["over","under"]},"alignment-baseline":{values:["before-edge","after-edge","text-before-edge","text-after-edge","hanging"]},"page-break-before":{values:["left","right","always","avoid"]},"border-image":{values:["repeat","stretch","space","round"]},"text-decoration":{values:["blink","line-through","overline","underline","wavy","double","solid","dashed","dotted"]},"font-family":{values:["serif","sans-serif","cursive","fantasy","monospace","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","-webkit-body","-webkit-pictograph"]},zoom:{values:["normal"]},"max-width":{values:["min-content","max-content","-webkit-fill-available","fit-content"]},"-webkit-font-smoothing":{values:["antialiased","subpixel-antialiased"]},border:{values:["hidden","inset","groove","ridge","outset","dotted","dashed","solid","double","medium","thick","thin"]},"font-variant":{values:["small-caps","normal","common-ligatures","no-common-ligatures","discretionary-ligatures","no-discretionary-ligatures","historical-ligatures","no-historical-ligatures","contextual","no-contextual","all-small-caps","petite-caps","all-petite-caps","unicase","titling-caps","lining-nums","oldstyle-nums","proportional-nums","tabular-nums","diagonal-fractions","stacked-fractions","ordinal","slashed-zero","jis78","jis83","jis90","jis04","simplified","traditional","full-width","proportional-width","ruby"]},"vertical-align":{values:["top","bottom","-webkit-baseline-middle"]},"page-break-after":{values:["left","right","always","avoid"]},"-webkit-text-emphasis-style":{values:["circle","filled","open","dot","double-circle","triangle","sesame"]},transform:{values:["scale","scaleX","scaleY","scale3d","rotate","rotateX","rotateY","rotateZ","rotate3d","skew","skewX","skewY","translate","translateX","translateY","translateZ","translate3d","matrix","matrix3d","perspective"]},"align-content":{values:["normal","baseline","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end"]},"justify-content":{values:["normal","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end","left","right"]},"place-content":{values:["normal","space-between","space-around","space-evenly","stretch","center","start","end","flex-start","flex-end","baseline"]},"align-items":{values:["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"]},"justify-items":{values:["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","left","right","legacy"]},"place-items":{values:["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"]},"align-self":{values:["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"]},"justify-self":{values:["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end","left","right"]},"place-self":{values:["normal","stretch","baseline","center","start","end","self-start","self-end","flex-start","flex-end"]},"perspective-origin":{values:["left","center","right","top","bottom"]},"transform-origin":{values:["left","center","right","top","bottom"]},"transition-timing-function":{values:["cubic-bezier","steps"]},"animation-timing-function":{values:["cubic-bezier","steps"]},"-webkit-backface-visibility":{values:["visible","hidden"]},"-webkit-column-break-after":{values:["always","avoid"]},"-webkit-column-break-before":{values:["always","avoid"]},"-webkit-column-break-inside":{values:["avoid"]},"-webkit-column-span":{values:["all"]},"-webkit-column-gap":{values:["normal"]},filter:{values:["url","blur","brightness","contrast","drop-shadow","grayscale","hue-rotate","invert","opacity","saturate","sepia"]},"backdrop-filter":{values:["url","blur","brightness","contrast","drop-shadow","grayscale","hue-rotate","invert","opacity","saturate","sepia"]},"mix-blend-mode":{values:["unset"]},"background-blend-mode":{values:["unset"]},"grid-template-columns":{values:["min-content","max-content"]},"grid-template-rows":{values:["min-content","max-content"]},"grid-auto-flow":{values:["dense"]},background:{values:["repeat","repeat-x","repeat-y","no-repeat","top","bottom","left","right","center","fixed","local","scroll","space","round","border-box","content-box","padding-box","linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"]},"background-image":{values:["linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"]},"background-position":{values:["top","bottom","left","right","center"]},"background-position-x":{values:["left","right","center"]},"background-position-y":{values:["top","bottom","center"]},"background-repeat-x":{values:["repeat","no-repeat"]},"background-repeat-y":{values:["repeat","no-repeat"]},"border-bottom":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"border-left":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"border-right":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"border-top":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"buffered-rendering":{values:["static","dynamic"]},"color-interpolation-filters":{values:["srgb","linearrgb"]},"column-rule":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"flex-flow":{values:["nowrap","row","row-reverse","column","column-reverse","wrap","wrap-reverse"]},height:{values:["-webkit-fill-available"]},"inline-size":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"list-style":{values:["outside","inside","disc","circle","square","decimal","decimal-leading-zero","arabic-indic","bengali","cambodian","khmer","devanagari","gujarati","gurmukhi","kannada","lao","malayalam","mongolian","myanmar","oriya","persian","urdu","telugu","tibetan","thai","lower-roman","upper-roman","lower-greek","lower-alpha","lower-latin","upper-alpha","upper-latin","cjk-earthly-branch","cjk-heavenly-stem","ethiopic-halehame","ethiopic-halehame-am","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","hangul","hangul-consonant","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","hebrew","armenian","lower-armenian","upper-armenian","georgian","cjk-ideographic","simp-chinese-formal","simp-chinese-informal","trad-chinese-formal","trad-chinese-informal","hiragana","katakana","hiragana-iroha","katakana-iroha"]},"max-block-size":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"max-inline-size":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"min-block-size":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"min-height":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"min-inline-size":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"min-width":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"object-position":{values:["top","bottom","left","right","center"]},"shape-outside":{values:["border-box","content-box","padding-box","margin-box"]},"-webkit-appearance":{values:["checkbox","radio","push-button","square-button","button","inner-spin-button","listbox","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","menulist","menulist-button","meter","progress-bar","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","searchfield","searchfield-cancel-button","textfield","textarea"]},"-webkit-border-after":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"-webkit-border-after-style":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"-webkit-border-after-width":{values:["medium","thick","thin"]},"-webkit-border-before":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"-webkit-border-before-style":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"-webkit-border-before-width":{values:["medium","thick","thin"]},"-webkit-border-end":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"-webkit-border-end-style":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"-webkit-border-end-width":{values:["medium","thick","thin"]},"-webkit-border-start":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double","medium","thick","thin"]},"-webkit-border-start-style":{values:["hidden","inset","groove","outset","ridge","dotted","dashed","solid","double"]},"-webkit-border-start-width":{values:["medium","thick","thin"]},"-webkit-logical-height":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"-webkit-logical-width":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"-webkit-margin-collapse":{values:["collapse","separate","discard"]},"-webkit-mask-box-image":{values:["repeat","stretch","space","round"]},"-webkit-mask-box-image-repeat":{values:["repeat","stretch","space","round"]},"-webkit-mask-clip":{values:["text","border","border-box","content","content-box","padding","padding-box"]},"-webkit-mask-composite":{values:["clear","copy","source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","xor","plus-lighter"]},"-webkit-mask-image":{values:["linear-gradient","radial-gradient","repeating-linear-gradient","repeating-radial-gradient","url"]},"-webkit-mask-origin":{values:["border","border-box","content","content-box","padding","padding-box"]},"-webkit-mask-position":{values:["top","bottom","left","right","center"]},"-webkit-mask-position-x":{values:["left","right","center"]},"-webkit-mask-position-y":{values:["top","bottom","center"]},"-webkit-mask-repeat":{values:["repeat","repeat-x","repeat-y","no-repeat","space","round"]},"-webkit-mask-size":{values:["contain","cover"]},"-webkit-max-logical-height":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"-webkit-max-logical-width":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"-webkit-min-logical-height":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"-webkit-min-logical-width":{values:["-webkit-fill-available","min-content","max-content","fit-content"]},"-webkit-perspective-origin-x":{values:["left","right","center"]},"-webkit-perspective-origin-y":{values:["top","bottom","center"]},"-webkit-text-decorations-in-effect":{values:["blink","line-through","overline","underline"]},"-webkit-text-stroke":{values:["medium","thick","thin"]},"-webkit-text-stroke-width":{values:["medium","thick","thin"]},"-webkit-transform-origin-x":{values:["left","right","center"]},"-webkit-transform-origin-y":{values:["top","bottom","center"]},width:{values:["-webkit-fill-available"]}},re=new Map([["align-content",57],["align-items",129],["align-self",55],["animation",175],["animation-delay",114],["animation-direction",113],["animation-duration",137],["animation-fill-mode",132],["animation-iteration-count",124],["animation-name",139],["animation-play-state",104],["animation-timing-function",141],["backface-visibility",123],["background",260],["background-attachment",119],["background-clip",165],["background-color",259],["background-image",246],["background-origin",107],["background-position",237],["background-position-x",108],["background-position-y",93],["background-repeat",234],["background-size",203],["border",263],["border-bottom",233],["border-bottom-color",190],["border-bottom-left-radius",186],["border-bottom-right-radius",185],["border-bottom-style",150],["border-bottom-width",179],["border-collapse",209],["border-color",226],["border-image",89],["border-image-outset",50],["border-image-repeat",49],["border-image-slice",58],["border-image-source",32],["border-image-width",52],["border-left",221],["border-left-color",174],["border-left-style",142],["border-left-width",172],["border-radius",224],["border-right",223],["border-right-color",182],["border-right-style",130],["border-right-width",178],["border-spacing",198],["border-style",206],["border-top",231],["border-top-color",192],["border-top-left-radius",187],["border-top-right-radius",189],["border-top-style",152],["border-top-width",180],["border-width",214],["bottom",227],["box-shadow",213],["box-sizing",216],["caption-side",96],["clear",229],["clip",173],["clip-rule",5],["color",256],["content",219],["counter-increment",111],["counter-reset",110],["cursor",250],["direction",176],["display",262],["empty-cells",99],["fill",140],["fill-opacity",82],["fill-rule",22],["filter",160],["flex",133],["flex-basis",66],["flex-direction",85],["flex-flow",94],["flex-grow",112],["flex-shrink",61],["flex-wrap",68],["float",252],["font",211],["font-family",254],["font-kerning",18],["font-size",264],["font-stretch",77],["font-style",220],["font-variant",161],["font-weight",257],["height",266],["image-rendering",90],["justify-content",127],["left",248],["letter-spacing",188],["line-height",244],["list-style",215],["list-style-image",145],["list-style-position",149],["list-style-type",199],["margin",267],["margin-bottom",241],["margin-left",243],["margin-right",238],["margin-top",253],["mask",20],["max-height",205],["max-width",225],["min-height",217],["min-width",218],["object-fit",33],["opacity",251],["order",117],["orphans",146],["outline",222],["outline-color",153],["outline-offset",147],["outline-style",151],["outline-width",148],["overflow",255],["overflow-wrap",105],["overflow-x",184],["overflow-y",196],["padding",265],["padding-bottom",230],["padding-left",235],["padding-right",232],["padding-top",240],["page",8],["page-break-after",120],["page-break-before",69],["page-break-inside",121],["perspective",92],["perspective-origin",103],["pointer-events",183],["position",261],["quotes",158],["resize",168],["right",245],["shape-rendering",38],["size",64],["speak",118],["src",170],["stop-color",42],["stop-opacity",31],["stroke",98],["stroke-dasharray",36],["stroke-dashoffset",3],["stroke-linecap",30],["stroke-linejoin",21],["stroke-miterlimit",12],["stroke-opacity",34],["stroke-width",87],["table-layout",171],["tab-size",46],["text-align",260],["text-anchor",35],["text-decoration",247],["text-indent",207],["text-overflow",204],["text-rendering",155],["text-shadow",208],["text-transform",202],["top",258],["touch-action",80],["transform",181],["transform-origin",162],["transform-style",86],["transition",193],["transition-delay",134],["transition-duration",135],["transition-property",131],["transition-timing-function",122],["unicode-bidi",156],["unicode-range",136],["vertical-align",236],["visibility",242],["-webkit-appearance",191],["-webkit-backface-visibility",154],["-webkit-background-clip",164],["-webkit-background-origin",40],["-webkit-background-size",163],["-webkit-border-end",9],["-webkit-border-horizontal-spacing",81],["-webkit-border-image",75],["-webkit-border-radius",212],["-webkit-border-start",10],["-webkit-border-start-color",16],["-webkit-border-start-width",13],["-webkit-border-vertical-spacing",43],["-webkit-box-align",101],["-webkit-box-direction",51],["-webkit-box-flex",128],["-webkit-box-ordinal-group",91],["-webkit-box-orient",144],["-webkit-box-pack",106],["-webkit-box-reflect",39],["-webkit-box-shadow",210],["-webkit-column-break-inside",60],["-webkit-column-count",84],["-webkit-column-gap",76],["-webkit-column-rule",25],["-webkit-column-rule-color",23],["-webkit-columns",44],["-webkit-column-span",29],["-webkit-column-width",47],["-webkit-filter",159],["-webkit-font-feature-settings",59],["-webkit-font-smoothing",177],["-webkit-highlight",1],["-webkit-line-break",45],["-webkit-line-clamp",126],["-webkit-margin-after",67],["-webkit-margin-before",70],["-webkit-margin-collapse",14],["-webkit-margin-end",65],["-webkit-margin-start",100],["-webkit-margin-top-collapse",78],["-webkit-mask",19],["-webkit-mask-box-image",72],["-webkit-mask-image",88],["-webkit-mask-position",54],["-webkit-mask-repeat",63],["-webkit-mask-size",79],["-webkit-padding-after",15],["-webkit-padding-before",28],["-webkit-padding-end",48],["-webkit-padding-start",73],["-webkit-print-color-adjust",83],["-webkit-rtl-ordering",7],["-webkit-tap-highlight-color",169],["-webkit-text-emphasis-color",11],["-webkit-text-fill-color",71],["-webkit-text-security",17],["-webkit-text-stroke",56],["-webkit-text-stroke-color",37],["-webkit-text-stroke-width",53],["-webkit-user-drag",95],["-webkit-user-modify",62],["-webkit-user-select",194],["-webkit-writing-mode",4],["white-space",228],["widows",115],["width",268],["will-change",74],["word-break",166],["word-spacing",157],["word-wrap",197],["writing-mode",41],["z-index",239],["zoom",200]]),oe=["auto","none"];var ne=Object.freeze({__proto__:null,CSSMetadata:V,VariableRegex:W,URLRegex:/url\(\s*('.+?'|".+?"|[^)]+)\s*\)/g,GridAreaRowRegex:G,cssMetadata:K,CSSPropertyDefinition:undefined});class ae{constructor(e){this.callFrame=e,this.callUID=`${e.functionName}@${e.scriptId}:${e.lineNumber}:${e.columnNumber}`,this.self=0,this.total=0,this.id=0,this.parent=null,this.children=[],this.depth,this.deoptReason}get functionName(){return this.callFrame.functionName}get scriptId(){return this.callFrame.scriptId}get url(){return this.callFrame.url}get lineNumber(){return this.callFrame.lineNumber}get columnNumber(){return this.callFrame.columnNumber}}class le{constructor(e){this._target=e||null,this.root,this.total,this.maxDepth}initialize(e){this.root=e,this._assignDepthsAndParents(),this.total=this._calculateTotals(this.root)}_assignDepthsAndParents(){const e=this.root;e.depth=-1,e.parent=null,this.maxDepth=0;const t=[e];for(;t.length;){const e=t.pop(),s=e.depth+1;s>this.maxDepth&&(this.maxDepth=s);const i=e.children;for(const r of i)r.depth=s,r.parent=e,r.children.length&&t.push(r)}}_calculateTotals(e){const t=[e],s=[];for(;t.length;){const e=t.pop();e.total=e.self,s.push(e),t.push(...e.children)}for(;s.length>1;){const e=s.pop();e.parent&&(e.parent.total+=e.total)}return e.total}target(){return this._target}}var de=Object.freeze({__proto__:null,ProfileNode:ae,ProfileTreeModel:le});class ce{constructor(e,t,s,i){this._name=e,this._value=t,this._type=s,this._attributes={},this._size=0,this._priority=i||"Medium",this._cookieLine=null}static fromProtocolCookie(e){const t=new ce(e.name,e.value,null,e.priority);return t.addAttribute("domain",e.domain),t.addAttribute("path",e.path),e.expires&&t.addAttribute("expires",1e3*e.expires),e.httpOnly&&t.addAttribute("httpOnly"),e.secure&&t.addAttribute("secure"),e.sameSite&&t.addAttribute("sameSite",e.sameSite),t.setSize(e.size),t}key(){return(this.domain()||"-")+" "+this.name()+" "+(this.path()||"-")}name(){return this._name}value(){return this._value}type(){return this._type}httpOnly(){return"httponly"in this._attributes}secure(){return"secure"in this._attributes}sameSite(){return this._attributes.samesite}priority(){return this._priority}session(){return!("expires"in this._attributes||"max-age"in this._attributes)}path(){return this._attributes.path}domain(){return this._attributes.domain}expires(){return this._attributes.expires}maxAge(){return this._attributes["max-age"]}size(){return this._size}url(){return this.domain()&&this.path()?(this.secure()?"https://":"http://")+this.domain()+this.path():null}setSize(e){this._size=e}expiresDate(e){return this.maxAge()?new Date(e.getTime()+1e3*this.maxAge()):this.expires()?new Date(this.expires()):null}addAttribute(e,t){const s=e.toLowerCase();switch(s){case"priority":this._priority=t;break;default:this._attributes[s]=t}}setCookieLine(e){this._cookieLine=e}getCookieLine(){return this._cookieLine}}const he={Request:0,Response:1},ue={Name:"name",Value:"value",Size:"size",Domain:"domain",Path:"path",Expires:"expires",HttpOnly:"httpOnly",Secure:"secure",SameSite:"sameSite",Priority:"priority"};var ge=Object.freeze({__proto__:null,Cookie:ce,Type:he,Attributes:ue,CookieReference:class{constructor(e,t,s,i){this._name=e,this._domain=t,this._path=s,this._contextUrl=i}domain(){return this._domain}contextUrl(){return this._contextUrl}}});class me{constructor(e){e&&(this._domain=e.toLowerCase().replace(/^\./,"")),this._cookies=[],this._input,this._originalInputLength=0}static parseCookie(e){return(new me).parseCookie(e)}static parseSetCookie(e,t){return new me(t).parseSetCookie(e)}cookies(){return this._cookies}parseCookie(e){if(!this._initialize(e))return null;for(let e=this._extractKeyValue();e;e=this._extractKeyValue())"$"===e.key.charAt(0)&&this._lastCookie?this._lastCookie.addAttribute(e.key.slice(1),e.value):"$version"!==e.key.toLowerCase()&&"string"==typeof e.value&&this._addCookie(e,he.Request),this._advanceAndCheckCookieDelimiter();return this._flushCookie(),this._cookies}parseSetCookie(e){if(!this._initialize(e))return null;for(let e=this._extractKeyValue();e;e=this._extractKeyValue())this._lastCookie?this._lastCookie.addAttribute(e.key,e.value):this._addCookie(e,he.Response),this._advanceAndCheckCookieDelimiter()&&this._flushCookie();return this._flushCookie(),this._cookies}_initialize(e){return this._input=e,"string"==typeof e&&(this._cookies=[],this._lastCookie=null,this._lastCookieLine="",this._originalInputLength=this._input.length,!0)}_flushCookie(){this._lastCookie&&(this._lastCookie.setSize(this._originalInputLength-this._input.length-this._lastCookiePosition),this._lastCookie.setCookieLine(this._lastCookieLine.replace("\n",""))),this._lastCookie=null,this._lastCookieLine=""}_extractKeyValue(){if(!this._input||!this._input.length)return null;const e=/^[ \t]*([^\s=;]+)[ \t]*(?:=[ \t]*([^;\n]*))?/.exec(this._input);if(!e)return console.error("Failed parsing cookie header before: "+this._input),null;const t=new pe(e[1],e[2]&&e[2].trim(),this._originalInputLength-this._input.length);return this._lastCookieLine+=e[0],this._input=this._input.slice(e[0].length),t}_advanceAndCheckCookieDelimiter(){if(!this._input)return!1;const e=/^\s*[\n;]\s*/.exec(this._input);return!!e&&(this._lastCookieLine+=e[0],this._input=this._input.slice(e[0].length),null!==e[0].match("\n"))}_addCookie(e,t){this._lastCookie&&this._lastCookie.setSize(e.position-this._lastCookiePosition),this._lastCookie="string"==typeof e.value?new ce(e.key,e.value,t):new ce("",e.key,t),this._domain&&this._lastCookie.addAttribute("domain",this._domain),this._lastCookiePosition=e.position,this._cookies.push(this._lastCookie)}}class pe{constructor(e,t,s){this.key=e,this.value=t,this.position=s}}var _e=Object.freeze({__proto__:null,CookieParser:me});const be=new WeakMap,fe=new Map([["2g",Protocol.Network.ConnectionType.Cellular2g],["3g",Protocol.Network.ConnectionType.Cellular3g],["4g",Protocol.Network.ConnectionType.Cellular4g],["bluetooth",Protocol.Network.ConnectionType.Bluetooth],["wifi",Protocol.Network.ConnectionType.Wifi],["wimax",Protocol.Network.ConnectionType.Wimax]]);class ve extends N{constructor(e){super(e),this._dispatcher=new Re(this),this._networkAgent=e.networkAgent(),e.registerNetworkDispatcher(this._dispatcher),i.Settings.instance().moduleSetting("cacheDisabled").get()&&this._networkAgent.invoke_setCacheDisabled({cacheDisabled:!0}),this._networkAgent.invoke_enable({maxPostDataSize:Ie}),this._networkAgent.invoke_setAttachDebugStack({enabled:!0}),this._bypassServiceWorkerSetting=i.Settings.instance().createSetting("bypassServiceWorker",!1),this._bypassServiceWorkerSetting.get()&&this._bypassServiceWorkerChanged(),this._bypassServiceWorkerSetting.addChangeListener(this._bypassServiceWorkerChanged,this),i.Settings.instance().moduleSetting("cacheDisabled").addChangeListener(this._cacheDisabledSettingChanged,this)}static forRequest(e){return be.get(e)||null}static canReplayRequest(e){return Boolean(be.get(e))&&e.resourceType()===r.resourceTypes.XHR}static replayRequest(e){const t=be.get(e);t&&t._networkAgent.invoke_replayXHR({requestId:e.requestId()})}static async searchInRequest(e,t,s,i){const r=ve.forRequest(e);if(!r)return[];return(await r._networkAgent.invoke_searchInResponseBody({requestId:e.requestId(),query:t,caseSensitive:s,isRegex:i})).result||[]}static async requestContentData(e){if(e.resourceType()===r.resourceTypes.WebSocket)return{error:"Content for WebSockets is currently not supported",content:null,encoded:!1};e.finished||await e.once(Be.FinishedLoading);const t=ve.forRequest(e);if(!t)return{error:"No network manager for request",content:null,encoded:!1};const s=await t._networkAgent.invoke_getResponseBody({requestId:e.requestId()}),i=s.getError()||null;return{error:i,content:i?null:s.body,encoded:s.base64Encoded}}static async requestPostData(e){const t=ve.forRequest(e);if(t)try{const{postData:s}=await t._networkAgent.invoke_getRequestPostData({requestId:e.backendRequestId()});return s}catch(e){return e.message}return console.error("No network manager for request"),Promise.resolve(null)}static _connectionType(e){if(!e.download&&!e.upload)return Protocol.Network.ConnectionType.None;const t=e.title.toLowerCase();for(const[e,s]of fe)if(t.includes(e))return s;return Protocol.Network.ConnectionType.Other}static lowercaseHeaders(e){const t={};for(const s in e)t[s.toLowerCase()]=e[s];return t}inflightRequestForURL(e){return this._dispatcher._inflightRequestsByURL[e]}_cacheDisabledSettingChanged(e){const t=e.data;this._networkAgent.invoke_setCacheDisabled({cacheDisabled:t})}dispose(){i.Settings.instance().moduleSetting("cacheDisabled").removeChangeListener(this._cacheDisabledSettingChanged,this)}_bypassServiceWorkerChanged(){this._networkAgent.invoke_setBypassServiceWorker({bypass:this._bypassServiceWorkerSetting.get()})}async getSecurityIsolationStatus(e){const t=await this._networkAgent.invoke_getSecurityIsolationStatus({frameId:e});return t.getError()?null:t.status}async loadNetworkResource(e,t,s){const i=await this._networkAgent.invoke_loadNetworkResource({frameId:e,url:t,options:s});if(i.getError())throw new Error(i.getError());return i.resource}}const ye={RequestStarted:Symbol("RequestStarted"),RequestUpdated:Symbol("RequestUpdated"),RequestFinished:Symbol("RequestFinished"),RequestUpdateDropped:Symbol("RequestUpdateDropped"),ResponseReceived:Symbol("ResponseReceived"),MessageGenerated:Symbol("MessageGenerated"),RequestRedirected:Symbol("RequestRedirected"),LoadingFinished:Symbol("LoadingFinished")},ke={title:o.UIString("No throttling"),download:-1,upload:-1,latency:0},Se={title:o.UIString("Offline"),download:0,upload:0,latency:0},we={title:o.UIString("Slow 3G"),download:5e4,upload:5e4,latency:2e3},Ce={title:o.UIString("Fast 3G"),download:18e4,upload:84375,latency:562.5},Ie=65536;class Re{constructor(e){this._manager=e,this._inflightRequestsById=new Map,this._inflightRequestsByURL={},this._requestIdToRedirectExtraInfoBuilder=new Map,this._requestIdToTrustTokenEvent=new Map}_headersMapToHeadersArray(e){const t=[];for(const s in e){const i=e[s].split("\n");for(let e=0;e<i.length;++e)t.push({name:s,value:i[e]})}return t}_updateNetworkRequestWithRequest(e,t){e.requestMethod=t.method,e.setRequestHeaders(this._headersMapToHeadersArray(t.headers)),e.setRequestFormData(Boolean(t.hasPostData),t.postData||null),e.setInitialPriority(t.initialPriority),e.mixedContentType=t.mixedContentType||Protocol.Security.MixedContentType.None,e.setReferrerPolicy(t.referrerPolicy)}_updateNetworkRequestWithResponse(e,t){if(t.url&&e.url()!==t.url&&e.setUrl(t.url),e.mimeType=t.mimeType,e.statusCode=t.status,e.statusText=t.statusText,e.hasExtraResponseInfo()||(e.responseHeaders=this._headersMapToHeadersArray(t.headers)),t.encodedDataLength>=0&&e.setTransferSize(t.encodedDataLength),t.requestHeaders&&!e.hasExtraRequestInfo()&&(e.setRequestHeaders(this._headersMapToHeadersArray(t.requestHeaders)),e.setRequestHeadersText(t.requestHeadersText||"")),e.connectionReused=t.connectionReused,e.connectionId=String(t.connectionId),t.remoteIPAddress&&e.setRemoteAddress(t.remoteIPAddress,t.remotePort||-1),t.fromServiceWorker&&(e.fetchedViaServiceWorker=!0),t.fromDiskCache&&e.setFromDiskCache(),t.fromPrefetchCache&&e.setFromPrefetchCache(),t.cacheStorageCacheName&&e.setResponseCacheStorageCacheName(t.cacheStorageCacheName),t.responseTime&&e.setResponseRetrievalTime(new Date(t.responseTime)),e.timing=t.timing,e.protocol=t.protocol||"",t.serviceWorkerResponseSource&&e.setServiceWorkerResponseSource(t.serviceWorkerResponseSource),e.setSecurityState(t.securityState),!this._mimeTypeIsConsistentWithType(e)){const t=o.UIString('Resource interpreted as %s but transferred with MIME type %s: "%s".',e.resourceType().title(),e.mimeType,e.url());this._manager.dispatchEventToListeners(ye.MessageGenerated,{message:t,requestId:e.requestId(),warning:!0})}t.securityDetails&&e.setSecurityDetails(t.securityDetails)}_mimeTypeIsConsistentWithType(e){if(e.hasErrorStatusCode()||304===e.statusCode||204===e.statusCode)return!0;const t=e.resourceType();return t!==r.resourceTypes.Stylesheet&&t!==r.resourceTypes.Document&&t!==r.resourceTypes.TextTrack||(!e.mimeType||!!Oe.has(e.mimeType)&&t.name()in Oe.get(e.mimeType))}resourceChangedPriority({requestId:e,newPriority:t,timestamp:s}){const i=this._inflightRequestsById.get(e);i&&i.setPriority(t)}signedExchangeReceived({requestId:e,info:t}){let s=this._inflightRequestsById.get(e);(s||(s=this._inflightRequestsByURL[t.outerResponse.url],s))&&(s.setSignedExchangeInfo(t),s.setResourceType(r.resourceTypes.SignedExchange),this._updateNetworkRequestWithResponse(s,t.outerResponse),this._updateNetworkRequest(s),this._manager.dispatchEventToListeners(ye.ResponseReceived,{request:s,response:t.outerResponse}))}requestWillBeSent({requestId:e,loaderId:t,documentURL:s,request:i,timestamp:o,wallTime:n,initiator:a,redirectResponse:l,type:d,frameId:c}){let h=this._inflightRequestsById.get(e);if(h){if(!l)return;h.signedExchangeInfo()||this.responseReceived({requestId:e,loaderId:t,timestamp:o,type:d||Protocol.Network.ResourceType.Other,response:l,frameId:c}),h=this._appendRedirect(e,o,i.url),this._manager.dispatchEventToListeners(ye.RequestRedirected,h)}else h=this._createNetworkRequest(e,c||"",t,i.url,s,a);h.hasNetworkData=!0,this._updateNetworkRequestWithRequest(h,i),h.setIssueTime(o,n),h.setResourceType(d?r.resourceTypes[d]:r.resourceTypes.Other),i.trustTokenParams&&h.setTrustTokenParams(i.trustTokenParams);const u=this._requestIdToTrustTokenEvent.get(e);u&&(h.setTrustTokenOperationDoneEvent(u),this._requestIdToTrustTokenEvent.delete(e)),this._getExtraInfoBuilder(e).addRequest(h),this._startNetworkRequest(h,i)}requestServedFromCache({requestId:e}){const t=this._inflightRequestsById.get(e);t&&t.setFromMemoryCache()}responseReceived({requestId:e,loaderId:t,timestamp:s,type:i,response:n,frameId:a}){const l=this._inflightRequestsById.get(e),d=ve.lowercaseHeaders(n.headers);if(l){if(l.responseReceivedTime=s,l.setResourceType(r.resourceTypes[i]),"set-cookie"in d&&d["set-cookie"].length>4096){const t=d["set-cookie"].split("\n");for(let s=0;s<t.length;++s){if(t[s].length<=4096)continue;const i=o.UIString("Set-Cookie header is ignored in response from url: %s. Cookie length should be less than or equal to 4096 characters.",n.url);this._manager.dispatchEventToListeners(ye.MessageGenerated,{message:i,requestId:e,warning:!0})}}this._updateNetworkRequestWithResponse(l,n),this._updateNetworkRequest(l),this._manager.dispatchEventToListeners(ye.ResponseReceived,{request:l,response:n})}else{const e=d["last-modified"],s={url:n.url,frameId:a||"",loaderId:t,resourceType:i,mimeType:n.mimeType,lastModified:e?new Date(e):null};this._manager.dispatchEventToListeners(ye.RequestUpdateDropped,s)}}dataReceived({requestId:e,timestamp:t,dataLength:s,encodedDataLength:i}){let r=this._inflightRequestsById.get(e);r||(r=this._maybeAdoptMainResourceRequest(e)),r&&(r.resourceSize+=s,-1!==i&&r.increaseTransferSize(i),r.endTime=t,this._updateNetworkRequest(r))}loadingFinished({requestId:e,timestamp:t,encodedDataLength:s,shouldReportCorbBlocking:i}){let r=this._inflightRequestsById.get(e);r||(r=this._maybeAdoptMainResourceRequest(e)),r&&(this._getExtraInfoBuilder(e).finished(),this._finishNetworkRequest(r,t,s,i),this._manager.dispatchEventToListeners(ye.LoadingFinished,r))}loadingFailed({requestId:e,timestamp:t,type:s,errorText:i,canceled:n,blockedReason:a,corsErrorStatus:l}){const d=this._inflightRequestsById.get(e);if(d){if(d.failed=!0,d.setResourceType(r.resourceTypes[s]),d.canceled=Boolean(n),a&&(d.setBlockedReason(a),a===Protocol.Network.BlockedReason.Inspector)){const t=o.UIString('Request was blocked by DevTools: "%s".',d.url());this._manager.dispatchEventToListeners(ye.MessageGenerated,{message:t,requestId:e,warning:!0})}l&&d.setCorsErrorStatus(l),d.localizedFailDescription=i,this._getExtraInfoBuilder(e).finished(),this._finishNetworkRequest(d,t,-1)}}webSocketCreated({requestId:e,url:t,initiator:s}){const i=new De(e,t,"","","",s||null);be.set(i,this._manager),i.setResourceType(r.resourceTypes.WebSocket),this._startNetworkRequest(i,null)}webSocketWillSendHandshakeRequest({requestId:e,timestamp:t,wallTime:s,request:i}){const r=this._inflightRequestsById.get(e);r&&(r.requestMethod="GET",r.setRequestHeaders(this._headersMapToHeadersArray(i.headers)),r.setIssueTime(t,s),this._updateNetworkRequest(r))}webSocketHandshakeResponseReceived({requestId:e,timestamp:t,response:s}){const i=this._inflightRequestsById.get(e);i&&(i.statusCode=s.status,i.statusText=s.statusText,i.responseHeaders=this._headersMapToHeadersArray(s.headers),i.responseHeadersText=s.headersText||"",s.requestHeaders&&i.setRequestHeaders(this._headersMapToHeadersArray(s.requestHeaders)),s.requestHeadersText&&i.setRequestHeadersText(s.requestHeadersText),i.responseReceivedTime=t,i.protocol="websocket",this._updateNetworkRequest(i))}webSocketFrameReceived({requestId:e,timestamp:t,response:s}){const i=this._inflightRequestsById.get(e);i&&(i.addProtocolFrame(s,t,!1),i.responseReceivedTime=t,this._updateNetworkRequest(i))}webSocketFrameSent({requestId:e,timestamp:t,response:s}){const i=this._inflightRequestsById.get(e);i&&(i.addProtocolFrame(s,t,!0),i.responseReceivedTime=t,this._updateNetworkRequest(i))}webSocketFrameError({requestId:e,timestamp:t,errorMessage:s}){const i=this._inflightRequestsById.get(e);i&&(i.addProtocolFrameError(s,t),i.responseReceivedTime=t,this._updateNetworkRequest(i))}webSocketClosed({requestId:e,timestamp:t}){const s=this._inflightRequestsById.get(e);s&&this._finishNetworkRequest(s,t,-1)}eventSourceMessageReceived({requestId:e,timestamp:t,eventName:s,eventId:i,data:r}){const o=this._inflightRequestsById.get(e);o&&o.addEventSourceMessage(t,s,i,r)}requestIntercepted({interceptionId:e,request:t,frameId:s,resourceType:i,isNavigationRequest:r,isDownload:o,redirectUrl:n,authChallenge:a,responseErrorReason:l,responseStatusCode:d,responseHeaders:c,requestId:h}){xe.instance()._requestIntercepted(new Me(this._manager.target().networkAgent(),e,t,s,i,r,o,n,a,l,d,c,h))}requestWillBeSentExtraInfo({requestId:e,associatedCookies:t,headers:s,clientSecurityState:i}){const r=[],o=[];for(const{blockedReasons:e,cookie:s}of t)0===e.length?o.push(ce.fromProtocolCookie(s)):r.push({blockedReasons:e,cookie:ce.fromProtocolCookie(s)});const n={blockedRequestCookies:r,includedRequestCookies:o,requestHeaders:this._headersMapToHeadersArray(s),clientSecurityState:i};this._getExtraInfoBuilder(e).addRequestExtraInfo(n)}responseReceivedExtraInfo({requestId:e,blockedCookies:t,headers:s,headersText:i}){const r={blockedResponseCookies:t.map((e=>({blockedReasons:e.blockedReasons,cookieLine:e.cookieLine,cookie:e.cookie?ce.fromProtocolCookie(e.cookie):null}))),responseHeaders:this._headersMapToHeadersArray(s),responseHeadersText:i};this._getExtraInfoBuilder(e).addResponseExtraInfo(r)}_getExtraInfoBuilder(e){let t;if(this._requestIdToRedirectExtraInfoBuilder.has(e))t=this._requestIdToRedirectExtraInfoBuilder.get(e);else{t=new Pe((()=>{this._requestIdToRedirectExtraInfoBuilder.delete(e)})),this._requestIdToRedirectExtraInfoBuilder.set(e,t)}return t}_appendRedirect(e,t,s){const i=this._inflightRequestsById.get(e);if(!i)throw new Error("Could not find original network request for "+e);let r=0;for(let e=i.redirectSource();e;e=e.redirectSource())r++;i.markAsRedirect(r),this._finishNetworkRequest(i,t,-1);const o=this._createNetworkRequest(e,i.frameId,i.loaderId,s,i.documentURL,i.initiator());return o.setRedirectSource(i),i.setRedirectDestination(o),o}_maybeAdoptMainResourceRequest(e){const t=xe.instance()._inflightMainResourceRequests.get(e);if(!t)return null;const s=ve.forRequest(t)._dispatcher;return s._inflightRequestsById.delete(e),delete s._inflightRequestsByURL[t.url()],this._inflightRequestsById.set(e,t),this._inflightRequestsByURL[t.url()]=t,be.set(t,this._manager),t}_startNetworkRequest(e,t){this._inflightRequestsById.set(e.requestId(),e),this._inflightRequestsByURL[e.url()]=e,e.loaderId===e.requestId()&&xe.instance()._inflightMainResourceRequests.set(e.requestId(),e),this._manager.dispatchEventToListeners(ye.RequestStarted,{request:e,originalRequest:t})}_updateNetworkRequest(e){this._manager.dispatchEventToListeners(ye.RequestUpdated,e)}_finishNetworkRequest(e,t,s,n){if(e.endTime=t,e.finished=!0,s>=0){const t=e.redirectSource();t&&t.signedExchangeInfo()?(e.setTransferSize(0),t.setTransferSize(s),this._updateNetworkRequest(t)):e.setTransferSize(s)}if(this._manager.dispatchEventToListeners(ye.RequestFinished,e),this._inflightRequestsById.delete(e.requestId()),delete this._inflightRequestsByURL[e.url()],xe.instance()._inflightMainResourceRequests.delete(e.requestId()),n){const t=o.UIString("Cross-Origin Read Blocking (CORB) blocked cross-origin response %s with MIME type %s. See https://www.chromestatus.com/feature/5629709824032768 for more details.",e.url(),e.mimeType);this._manager.dispatchEventToListeners(ye.MessageGenerated,{message:t,requestId:e.requestId(),warning:!0})}if(i.Settings.instance().moduleSetting("monitoringXHREnabled").get()&&e.resourceType().category()===r.resourceCategories.XHR){let t;t=e.failed||e.hasErrorStatusCode()?o.UIString('%s failed loading: %s "%s".',e.resourceType().title(),e.requestMethod,e.url()):o.UIString('%s finished loading: %s "%s".',e.resourceType().title(),e.requestMethod,e.url()),this._manager.dispatchEventToListeners(ye.MessageGenerated,{message:t,requestId:e.requestId(),warning:!1})}}_createNetworkRequest(e,t,s,i,r,o){const n=new De(e,i,r,t,s,o);return be.set(n,this._manager),n}webTransportCreated({transportId:e,url:t,timestamp:s,initiator:i}){const o=new De(e,t,"","","",i||null);o.hasNetworkData=!0,be.set(o,this._manager),o.setResourceType(r.resourceTypes.WebTransport),o.setIssueTime(s,0),o.responseReceivedTime=s+.001,o.endTime=s+.002,this._startNetworkRequest(o,null)}webTransportClosed({transportId:e,timestamp:t}){const s=this._inflightRequestsById.get(e);s&&(s.endTime=t,this._finishNetworkRequest(s,t,0))}trustTokenOperationDone(e){const t=this._inflightRequestsById.get(e.requestId);t?t.setTrustTokenOperationDoneEvent(e):this._requestIdToTrustTokenEvent.set(e.requestId,e)}}let Te;class xe extends e.ObjectWrapper{constructor(){super(),this._userAgentOverride="",this._userAgentMetadataOverride=null,this._agents=new Set,this._inflightMainResourceRequests=new Map,this._networkConditions=ke,this._updatingInterceptionPatternsPromise=null,this._blockingEnabledSetting=i.Settings.instance().moduleSetting("requestBlockingEnabled"),this._blockedPatternsSetting=i.Settings.instance().createSetting("networkBlockedPatterns",[]),this._effectiveBlockedURLs=[],this._updateBlockedPatterns(),this._urlsForRequestInterceptor=new f,F.instance().observeModels(ve,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return Te&&!t||(Te=new xe),Te}static getChromeVersion(){const e=new RegExp("(?:^|\\W)Chrome/(\\S+)"),t=navigator.userAgent.match(e);return t&&t.length>1?t[1]:""}static _generateBrandVersionList(e,t,s){const i=[[0,1,2],[0,2,1],[1,0,2],[1,2,0],[2,0,1],[2,1,0]],r=i[e%i.length],o=["\\",'"',";"],n={brand:o[r[0]]+"Not"+o[r[1]]+"A"+o[r[2]]+"Brand",version:"99"},a={brand:"Chromium",version:s},l={brand:t,version:s},d=[];return d[r[0]]=n,d[r[1]]=a,d[r[2]]=l,d}static getChromeBrands(){const e=xe.getChromeVersion();if(e.length>0){const t=e.split(".",1)[0];return xe._generateBrandVersionList(Number.parseInt(t,10),"Google Chrome",t)}return[]}static patchUserAgentWithChromeVersion(e){const t=xe.getChromeVersion();if(t.length>0){const s=t.split(".",1)[0]+".0.100.0";return y.sprintf(e,t,s)}return e}modelAdded(e){const t=e.target().networkAgent();this._extraHeaders&&t.invoke_setExtraHTTPHeaders({headers:this._extraHeaders}),this.currentUserAgent()&&t.invoke_setUserAgentOverride({userAgent:this.currentUserAgent(),userAgentMetadata:this._userAgentMetadataOverride||void 0}),this._effectiveBlockedURLs.length&&t.invoke_setBlockedURLs({urls:this._effectiveBlockedURLs}),this.isIntercepting()&&t.invoke_setRequestInterception({patterns:this._urlsForRequestInterceptor.valuesArray()}),this._agents.add(t),this.isThrottling()&&this._updateNetworkConditions(t)}modelRemoved(e){for(const t of this._inflightMainResourceRequests){ve.forRequest(t[1])===e&&this._inflightMainResourceRequests.delete(t[0])}this._agents.delete(e.target().networkAgent())}isThrottling(){return this._networkConditions.download>=0||this._networkConditions.upload>=0||this._networkConditions.latency>0}isOffline(){return!this._networkConditions.download&&!this._networkConditions.upload}setNetworkConditions(e){this._networkConditions=e;for(const e of this._agents)this._updateNetworkConditions(e);this.dispatchEventToListeners(xe.Events.ConditionsChanged)}networkConditions(){return this._networkConditions}_updateNetworkConditions(e){const t=this._networkConditions;this.isThrottling()?e.invoke_emulateNetworkConditions({offline:this.isOffline(),latency:t.latency,downloadThroughput:t.download<0?0:t.download,uploadThroughput:t.upload<0?0:t.upload,connectionType:ve._connectionType(t)}):e.invoke_emulateNetworkConditions({offline:!1,latency:0,downloadThroughput:0,uploadThroughput:0})}setExtraHTTPHeaders(e){this._extraHeaders=e;for(const e of this._agents)e.invoke_setExtraHTTPHeaders({headers:this._extraHeaders})}currentUserAgent(){return this._customUserAgent?this._customUserAgent:this._userAgentOverride}_updateUserAgentOverride(){const e=this.currentUserAgent();for(const t of this._agents)t.invoke_setUserAgentOverride({userAgent:e,userAgentMetadata:this._userAgentMetadataOverride||void 0})}setUserAgentOverride(e,t){const s=this._userAgentOverride!==e;this._userAgentOverride=e,this._customUserAgent?this._userAgentMetadataOverride=null:(this._userAgentMetadataOverride=t,this._updateUserAgentOverride()),s&&this.dispatchEventToListeners(xe.Events.UserAgentChanged)}userAgentOverride(){return this._userAgentOverride}setCustomUserAgentOverride(e){this._customUserAgent=e,this._userAgentMetadataOverride=null,this._updateUserAgentOverride()}blockedPatterns(){return this._blockedPatternsSetting.get().slice()}blockingEnabled(){return this._blockingEnabledSetting.get()}isBlocking(){return Boolean(this._effectiveBlockedURLs.length)}setBlockedPatterns(e){this._blockedPatternsSetting.set(e),this._updateBlockedPatterns(),this.dispatchEventToListeners(xe.Events.BlockedPatternsChanged)}setBlockingEnabled(e){this._blockingEnabledSetting.get()!==e&&(this._blockingEnabledSetting.set(e),this._updateBlockedPatterns(),this.dispatchEventToListeners(xe.Events.BlockedPatternsChanged))}_updateBlockedPatterns(){const e=[];if(this._blockingEnabledSetting.get())for(const t of this._blockedPatternsSetting.get())t.enabled&&e.push(t.url);if(e.length||this._effectiveBlockedURLs.length){this._effectiveBlockedURLs=e;for(const e of this._agents)e.invoke_setBlockedURLs({urls:this._effectiveBlockedURLs})}}isIntercepting(){return Boolean(this._urlsForRequestInterceptor.size)}setInterceptionHandlerForPatterns(e,t){this._urlsForRequestInterceptor.deleteAll(t);for(const s of e)this._urlsForRequestInterceptor.set(t,s);return this._updateInterceptionPatternsOnNextTick()}_updateInterceptionPatternsOnNextTick(){return this._updatingInterceptionPatternsPromise||(this._updatingInterceptionPatternsPromise=Promise.resolve().then(this._updateInterceptionPatterns.bind(this))),this._updatingInterceptionPatternsPromise}_updateInterceptionPatterns(){i.Settings.instance().moduleSetting("cacheDisabled").get()||i.Settings.instance().moduleSetting("cacheDisabled").set(!0),this._updatingInterceptionPatternsPromise=null;const e=[];for(const t of this._agents)e.push(t.invoke_setRequestInterception({patterns:this._urlsForRequestInterceptor.valuesArray()}));return this.dispatchEventToListeners(xe.Events.InterceptorsChanged),Promise.all(e).then((e=>Promise.resolve()))}async _requestIntercepted(e){for(const t of this._urlsForRequestInterceptor.keysArray())if(await t(e),e.hasResponded())return;e.hasResponded()||e.continueRequestWithoutChange()}clearBrowserCache(){for(const e of this._agents)e.invoke_clearBrowserCache()}clearBrowserCookies(){for(const e of this._agents)e.invoke_clearBrowserCookies()}getCertificate(e){const t=F.instance().mainTarget();return t?t.networkAgent().invoke_getCertificate({origin:e}).then((e=>e&&e.tableNames||[])):Promise.resolve([])}async loadResource(e){const t={},s=this.currentUserAgent();return s&&(t["User-Agent"]=s),i.Settings.instance().moduleSetting("cacheDisabled").get()&&(t["Cache-Control"]="no-cache"),new Promise((s=>g.load(e,t,((e,t,i,r)=>{s({success:e,content:i,errorDescription:r})}))))}}xe.Events={BlockedPatternsChanged:Symbol("BlockedPatternsChanged"),ConditionsChanged:Symbol("ConditionsChanged"),UserAgentChanged:Symbol("UserAgentChanged"),InterceptorsChanged:Symbol("InterceptorsChanged")};class Me{constructor(e,t,s,i,r,o,n,a,l,d,c,h,u){this._networkAgent=e,this._interceptionId=t,this._hasResponded=!1,this.request=s,this.frameId=i,this.resourceType=r,this.isNavigationRequest=o,this.isDownload=Boolean(n),this.redirectUrl=a,this.authChallenge=l,this.responseErrorReason=d,this.responseStatusCode=c,this.responseHeaders=h,this.requestId=u}hasResponded(){return this._hasResponded}async continueRequestWithContent(e){this._hasResponded=!0;const t=["HTTP/1.1 200 OK","Date: "+(new Date).toUTCString(),"Server: Chrome Devtools Request Interceptor","Connection: closed","Content-Length: "+e.size,"Content-Type: "+e.type||"text/x-unknown"],s=await async function(e){const t=new FileReader,s=new Promise((e=>{t.onloadend=e}));if(t.readAsDataURL(e),await s,t.error)return console.error("Could not convert blob to base64.",t.error),"";const i=t.result;if(null==i||"string"!=typeof i)return console.error("Could not convert blob to base64."),"";return i.substring(i.indexOf(",")+1)}(new Blob([t.join("\r\n"),"\r\n\r\n",e]));this._networkAgent.invoke_continueInterceptedRequest({interceptionId:this._interceptionId,rawResponse:s})}continueRequestWithoutChange(){console.assert(!this._hasResponded),this._hasResponded=!0,this._networkAgent.invoke_continueInterceptedRequest({interceptionId:this._interceptionId})}continueRequestWithError(e){console.assert(!this._hasResponded),this._hasResponded=!0,this._networkAgent.invoke_continueInterceptedRequest({interceptionId:this._interceptionId,errorReason:e})}async responseBody(){const e=await this._networkAgent.invoke_getResponseBodyForInterception({interceptionId:this._interceptionId}),t=e.getError()||null;return{error:t,content:t?null:e.body,encoded:e.base64Encoded}}}class Pe{constructor(e){this._requests=[],this._requestExtraInfos=[],this._responseExtraInfos=[],this._finished=!1,this._hasExtraInfo=!1,this._deleteCallback=e}addRequest(e){this._requests.push(e),this._sync(this._requests.length-1)}addRequestExtraInfo(e){this._hasExtraInfo=!0,this._requestExtraInfos.push(e),this._sync(this._requestExtraInfos.length-1)}addResponseExtraInfo(e){this._responseExtraInfos.push(e),this._sync(this._responseExtraInfos.length-1)}finished(){this._finished=!0,this._deleteIfComplete()}_sync(e){const t=this._requests[e];if(!t)return;const s=this._requestExtraInfos[e];s&&(t.addExtraRequestInfo(s),this._requestExtraInfos[e]=null);const i=this._responseExtraInfos[e];i&&(t.addExtraResponseInfo(i),this._responseExtraInfos[e]=null),this._deleteIfComplete()}_deleteIfComplete(){if(this._finished){if(this._hasExtraInfo){const e=this._requests[this._requests.length-1];if(e&&!e.hasExtraResponseInfo())return}this._deleteCallback()}}}N.register(ve,O.Network,!0);var Le=Object.freeze({__proto__:null,NetworkManager:ve,Events:ye,NoThrottlingConditions:ke,OfflineConditions:Se,Slow3GConditions:we,Fast3GConditions:Ce,NetworkDispatcher:Re,MultitargetNetworkManager:xe,InterceptedRequest:Me,Conditions:undefined,BlockedPattern:undefined,Message:undefined,InterceptionPattern:undefined,RequestInterceptor:undefined,RequestUpdateDroppedEventData:undefined});class Ee{constructor(e,t,s){this.metric=e,this.value=t,this.description=s}static parseHeaders(e){const t=e.filter((e=>"server-timing"===e.name.toLowerCase()));if(!t.length)return null;const s=t.reduce(((e,t)=>{const s=this.createFromHeaderValue(t.value);return e.push(...s.map((function(e){return new Ee(e.name,e.hasOwnProperty("dur")?e.dur:null,e.hasOwnProperty("desc")?e.desc:"")}))),e}),[]);return s.sort(((e,t)=>y.compare(e.metric.toLowerCase(),t.metric.toLowerCase()))),s}static createFromHeaderValue(e){function t(){e=e.replace(/^\s*/,"")}function s(s){return console.assert(1===s.length),t(),e.charAt(0)===s&&(e=e.substring(1),!0)}function i(){const t=/^(?:\s*)([\w!#$%&'*+\-.^`|~]+)(?:\s*)(.*)/.exec(e);return t?(e=t[2],t[1]):null}function r(){return t(),'"'===e.charAt(0)?function(){console.assert('"'===e.charAt(0)),e=e.substring(1);let t="";for(;e.length;){const s=/^([^"\\]*)(.*)/.exec(e);if(!s)return null;if(t+=s[1],'"'===s[2].charAt(0))return e=s[2].substring(1),t;console.assert("\\"===s[2].charAt(0)),t+=s[2].charAt(1),e=s[2].substring(2)}return null}():i()}function o(){const t=/([,;].*)/.exec(e);t&&(e=t[1])}const a=[];let l;for(;null!==(l=i());){const t={name:l};for("="===e.charAt(0)&&this.showWarning(n`Deprecated syntax found. Please use: <name>;dur=<duration>;desc=<description>`);s(";");){let e;if(null===(e=i()))continue;e=e.toLowerCase();const a=this.getParserForParameter(e);let l=null;if(s("=")&&(l=r(),o()),a){if(t.hasOwnProperty(e)){this.showWarning(n`Duplicate parameter "${e}" ignored.`);continue}null===l&&this.showWarning(n`No value found for parameter "${e}".`),a.call(this,t,l)}else this.showWarning(n`Unrecognized parameter "${e}".`)}if(a.push(t),!s(","))break}return e.length&&this.showWarning(n`Extraneous trailing characters.`),a}static getParserForParameter(e){switch(e){case"dur":return function(t,s){if(t.dur=0,null!==s){const i=parseFloat(s);if(isNaN(i))return void Ee.showWarning(n`Unable to parse "${e}" value "${s}".`);t.dur=i}};case"desc":return function(e,t){e.desc=t||""};default:return null}}static showWarning(e){a.Console.instance().warn(o.UIString("ServerTiming: "+e))}}var Ne=Object.freeze({__proto__:null,ServerTiming:Ee});const Ae={HTML:"text/html",XML:"text/xml",PLAIN:"text/plain",XHTML:"application/xhtml+xml",SVG:"image/svg+xml",CSS:"text/css",XSL:"text/xsl",VTT:"text/vtt",PDF:"application/pdf"},Oe=new Map([[Ae.HTML,{document:!0}],[Ae.XML,{document:!0}],[Ae.PLAIN,{document:!0}],[Ae.XHTML,{document:!0}],[Ae.SVG,{document:!0}],[Ae.CSS,{stylesheet:!0}],[Ae.XSL,{stylesheet:!0}],[Ae.VTT,{texttrack:!0}],[Ae.PDF,{document:!0}]]);class De extends e.ObjectWrapper{constructor(e,t,s,i,o,n){super(),this._requestId=e,this._backendRequestId=e,this.setUrl(t),this._documentURL=s,this._frameId=i,this._loaderId=o,this._initiator=n,this._redirectSource=null,this._preflightRequest=null,this._preflightInitiatorRequest=null,this._isRedirect=!1,this._redirectDestination=null,this._issueTime=-1,this._startTime=-1,this._endTime=-1,this._blockedReason=void 0,this._corsErrorStatus=void 0,this.statusCode=0,this.statusText="",this.requestMethod="",this.requestTime=0,this.protocol="",this.mixedContentType=Protocol.Security.MixedContentType.None,this._initialPriority=null,this._currentPriority=null,this._signedExchangeInfo=null,this._resourceType=r.resourceTypes.Other,this._contentData=null,this._frames=[],this._eventSourceMessages=[],this._responseHeaderValues={},this._responseHeadersText="",this._requestHeaders=[],this._requestHeaderValues={},this._remoteAddress="",this._referrerPolicy=null,this._securityState=Protocol.Security.SecurityState.Unknown,this._securityDetails=null,this.connectionId="0",this.connectionReused=!1,this.hasNetworkData=!1,this._formParametersPromise=null,this._requestFormDataPromise=Promise.resolve(null),this._hasExtraRequestInfo=!1,this._hasExtraResponseInfo=!1,this._blockedRequestCookies=[],this._includedRequestCookies=[],this._blockedResponseCookies=[],this.localizedFailDescription=null,this._url,this._responseReceivedTime,this._transferSize,this._finished,this._failed,this._canceled,this._mimeType,this._parsedURL,this._name,this._path,this._clientSecurityState,this._trustTokenParams,this._trustTokenOperationDoneEvent}identityCompare(e){const t=this.requestId(),s=e.requestId();return t>s?1:t<s?-1:0}requestId(){return this._requestId}backendRequestId(){return this._backendRequestId}url(){return this._url}isBlobRequest(){return this._url.startsWith("blob:")}setUrl(e){this._url!==e&&(this._url=e,this._parsedURL=new t.ParsedURL(e),delete this._queryString,delete this._parsedQueryParameters,delete this._name,delete this._path)}get documentURL(){return this._documentURL}get parsedURL(){return this._parsedURL}get frameId(){return this._frameId}get loaderId(){return this._loaderId}setRemoteAddress(e,t){this._remoteAddress=e+":"+t,this.dispatchEventToListeners(Be.RemoteAddressChanged,this)}remoteAddress(){return this._remoteAddress}getResponseCacheStorageCacheName(){return this._responseCacheStorageCacheName}setResponseCacheStorageCacheName(e){this._responseCacheStorageCacheName=e}serviceWorkerResponseSource(){return this._serviceWorkerResponseSource}setServiceWorkerResponseSource(e){this._serviceWorkerResponseSource=e}setReferrerPolicy(e){this._referrerPolicy=e}referrerPolicy(){return this._referrerPolicy}securityState(){return this._securityState}setSecurityState(e){this._securityState=e}securityDetails(){return this._securityDetails}securityOrigin(){return this._parsedURL.securityOrigin()}setSecurityDetails(e){this._securityDetails=e}get startTime(){return this._startTime||-1}setIssueTime(e,t){this._issueTime=e,this._wallIssueTime=t,this._startTime=e}issueTime(){return this._issueTime}pseudoWallTime(e){return this._wallIssueTime?this._wallIssueTime-this._issueTime+e:e}get responseReceivedTime(){return this._responseReceivedTime||-1}set responseReceivedTime(e){this._responseReceivedTime=e}getResponseRetrievalTime(){return this._responseRetrievalTime}setResponseRetrievalTime(e){this._responseRetrievalTime=e}get endTime(){return this._endTime||-1}set endTime(e){this.timing&&this.timing.requestTime?this._endTime=Math.max(e,this.responseReceivedTime):(this._endTime=e,this._responseReceivedTime>e&&(this._responseReceivedTime=e)),this.dispatchEventToListeners(Be.TimingChanged,this)}get duration(){return-1===this._endTime||-1===this._startTime?-1:this._endTime-this._startTime}get latency(){return-1===this._responseReceivedTime||-1===this._startTime?-1:this._responseReceivedTime-this._startTime}get resourceSize(){return this._resourceSize||0}set resourceSize(e){this._resourceSize=e}get transferSize(){return this._transferSize||0}increaseTransferSize(e){this._transferSize=(this._transferSize||0)+e}setTransferSize(e){this._transferSize=e}get finished(){return this._finished}set finished(e){this._finished!==e&&(this._finished=e,e&&this.dispatchEventToListeners(Be.FinishedLoading,this))}get failed(){return this._failed}set failed(e){this._failed=e}get canceled(){return this._canceled}set canceled(e){this._canceled=e}blockedReason(){return this._blockedReason}setBlockedReason(e){this._blockedReason=e}corsErrorStatus(){return this._corsErrorStatus}setCorsErrorStatus(e){this._corsErrorStatus=e}wasBlocked(){return Boolean(this._blockedReason)}cached(){return(Boolean(this._fromMemoryCache)||Boolean(this._fromDiskCache))&&!this._transferSize}cachedInMemory(){return Boolean(this._fromMemoryCache)&&!this._transferSize}fromPrefetchCache(){return Boolean(this._fromPrefetchCache)}setFromMemoryCache(){this._fromMemoryCache=!0,delete this._timing}setFromDiskCache(){this._fromDiskCache=!0}setFromPrefetchCache(){this._fromPrefetchCache=!0}get fetchedViaServiceWorker(){return Boolean(this._fetchedViaServiceWorker)}set fetchedViaServiceWorker(e){this._fetchedViaServiceWorker=e}initiatedByServiceWorker(){const e=ve.forRequest(this);return!!e&&e.target().type()===D.ServiceWorker}get timing(){return this._timing}set timing(e){if(!e||this._fromMemoryCache)return;this._startTime=e.requestTime;const t=e.requestTime+e.receiveHeadersEnd/1e3;((this._responseReceivedTime||-1)<0||this._responseReceivedTime>t)&&(this._responseReceivedTime=t),this._startTime>this._responseReceivedTime&&(this._responseReceivedTime=this._startTime),this._timing=e,this.dispatchEventToListeners(Be.TimingChanged,this)}get mimeType(){return this._mimeType}set mimeType(e){this._mimeType=e}get displayName(){return this._parsedURL.displayName}name(){return this._name||this._parseNameAndPathFromURL(),this._name}path(){return this._path||this._parseNameAndPathFromURL(),this._path}_parseNameAndPathFromURL(){if(this._parsedURL.isDataURL())this._name=this._parsedURL.dataURLDisplayName(),this._path="";else if(this._parsedURL.isBlobURL())this._name=this._parsedURL.url,this._path="";else if(this._parsedURL.isAboutBlank())this._name=this._parsedURL.url,this._path="";else{this._path=this._parsedURL.host+this._parsedURL.folderPathComponents;const e=ve.forRequest(this),s=e?t.ParsedURL.fromString(e.target().inspectedURL()):null;this._path=y.trimURL(this._path,s?s.host:""),this._parsedURL.lastPathComponent||this._parsedURL.queryParams?this._name=this._parsedURL.lastPathComponent+(this._parsedURL.queryParams?"?"+this._parsedURL.queryParams:""):this._parsedURL.folderPathComponents?(this._name=this._parsedURL.folderPathComponents.substring(this._parsedURL.folderPathComponents.lastIndexOf("/")+1)+"/",this._path=this._path.substring(0,this._path.lastIndexOf("/"))):(this._name=this._parsedURL.host,this._path="")}}get folder(){let e=this._parsedURL.path;const t=e.indexOf("?");-1!==t&&(e=e.substring(0,t));const s=e.lastIndexOf("/");return-1!==s?e.substring(0,s):""}get pathname(){return this._parsedURL.path}resourceType(){return this._resourceType}setResourceType(e){this._resourceType=e}get domain(){return this._parsedURL.host}get scheme(){return this._parsedURL.scheme}redirectSource(){return this._redirectSource}setRedirectSource(e){this._redirectSource=e}preflightRequest(){return this._preflightRequest}setPreflightRequest(e){this._preflightRequest=e}preflightInitiatorRequest(){return this._preflightInitiatorRequest}setPreflightInitiatorRequest(e){this._preflightInitiatorRequest=e}isPreflightRequest(){return null!==this._initiator&&void 0!==this._initiator&&this._initiator.type===Protocol.Network.InitiatorType.Preflight}redirectDestination(){return this._redirectDestination}setRedirectDestination(e){this._redirectDestination=e}requestHeaders(){return this._requestHeaders}setRequestHeaders(e){this._requestHeaders=e,delete this._requestCookies,this.dispatchEventToListeners(Be.RequestHeadersChanged)}requestHeadersText(){return this._requestHeadersText}setRequestHeadersText(e){this._requestHeadersText=e,this.dispatchEventToListeners(Be.RequestHeadersChanged)}requestHeaderValue(e){return this._requestHeaderValues[e]||(this._requestHeaderValues[e]=this._computeHeaderValue(this.requestHeaders(),e)),this._requestHeaderValues[e]}get requestCookies(){return this._requestCookies||(this._requestCookies=me.parseCookie(this.requestHeaderValue("Cookie"))||[]),this._requestCookies}requestFormData(){return this._requestFormDataPromise||(this._requestFormDataPromise=ve.requestPostData(this)),this._requestFormDataPromise}setRequestFormData(e,t){this._requestFormDataPromise=e&&null===t?null:Promise.resolve(t),this._formParametersPromise=null}_filteredProtocolName(){const e=this.protocol.toLowerCase();return"h2"===e?"http/2.0":e.replace(/^http\/2(\.0)?\+/,"http/2.0+")}requestHttpVersion(){const e=this.requestHeadersText();if(!e){const e=this.requestHeaderValue("version")||this.requestHeaderValue(":version");return e||this._filteredProtocolName()}const t=e.split(/\r\n/)[0].match(/(HTTP\/\d+\.\d+)$/);return t?t[1]:"HTTP/0.9"}get responseHeaders(){return this._responseHeaders||[]}set responseHeaders(e){this._responseHeaders=e,delete this._sortedResponseHeaders,delete this._serverTimings,delete this._responseCookies,this._responseHeaderValues={},this.dispatchEventToListeners(Be.ResponseHeadersChanged)}get responseHeadersText(){return this._responseHeadersText}set responseHeadersText(e){this._responseHeadersText=e,this.dispatchEventToListeners(Be.ResponseHeadersChanged)}get sortedResponseHeaders(){return void 0!==this._sortedResponseHeaders||(this._sortedResponseHeaders=this.responseHeaders.slice(),this._sortedResponseHeaders.sort((function(e,t){return y.compare(e.name.toLowerCase(),t.name.toLowerCase())}))),this._sortedResponseHeaders}responseHeaderValue(e){return e in this._responseHeaderValues||(this._responseHeaderValues[e]=this._computeHeaderValue(this.responseHeaders,e)),this._responseHeaderValues[e]}get responseCookies(){return this._responseCookies||(this._responseCookies=me.parseSetCookie(this.responseHeaderValue("Set-Cookie"),this.domain)||[]),this._responseCookies}responseLastModified(){return this.responseHeaderValue("last-modified")}allCookiesIncludingBlockedOnes(){return[...this.includedRequestCookies(),...this.responseCookies,...this.blockedRequestCookies().map((e=>e.cookie)),...this.blockedResponseCookies().map((e=>e.cookie))].filter((e=>Boolean(e)))}get serverTimings(){return void 0===this._serverTimings&&(this._serverTimings=Ee.parseHeaders(this.responseHeaders)),this._serverTimings}queryString(){if(void 0!==this._queryString)return this._queryString;let e=null;const t=this.url(),s=t.indexOf("?");if(-1!==s){e=t.substring(s+1);const i=e.indexOf("#");-1!==i&&(e=e.substring(0,i))}return this._queryString=e,this._queryString}get queryParameters(){if(this._parsedQueryParameters)return this._parsedQueryParameters;const e=this.queryString();return e?(this._parsedQueryParameters=this._parseParameters(e),this._parsedQueryParameters):null}async _parseFormParameters(){const e=this.requestContentType();if(!e)return null;if(e.match(/^application\/x-www-form-urlencoded\s*(;.*)?$/i)){const e=await this.requestFormData();return e?this._parseParameters(e):null}const t=e.match(/^multipart\/form-data\s*;\s*boundary\s*=\s*(\S+)\s*$/);if(!t)return null;const s=t[1];if(!s)return null;const i=await this.requestFormData();return i?this._parseMultipartFormDataParameters(i,s):null}formParameters(){return this._formParametersPromise||(this._formParametersPromise=this._parseFormParameters()),this._formParametersPromise}responseHttpVersion(){const e=this._responseHeadersText;if(!e){const e=this.responseHeaderValue("version")||this.responseHeaderValue(":version");return e||this._filteredProtocolName()}const t=e.split(/\r\n/)[0].match(/^(HTTP\/\d+\.\d+)/);return t?t[1]:"HTTP/0.9"}_parseParameters(e){return e.split("&").map((function(e){const t=e.indexOf("=");return-1===t?{name:e,value:""}:{name:e.substring(0,t),value:e.substring(t+1)}}))}_parseMultipartFormDataParameters(e,t){const s=t.escapeForRegExp(),i=new RegExp('^\\r\\ncontent-disposition\\s*:\\s*form-data\\s*;\\s*name="([^"]*)"(?:\\s*;\\s*filename="([^"]*)")?(?:\\r\\ncontent-type\\s*:\\s*([^\\r\\n]*))?\\r\\n\\r\\n(.*)\\r\\n$',"is");return e.split(new RegExp(`--${s}(?:--s*$)?`,"g")).reduce((function(e,t){const[s,r,o,n,a]=t.match(i)||[];if(!s)return e;const l=o||n?k`(binary)`:a;return e.push({name:r,value:l}),e}),[])}_computeHeaderValue(e,t){t=t.toLowerCase();const s=[];for(let i=0;i<e.length;++i)e[i].name.toLowerCase()===t&&s.push(e[i].value);if(s.length)return"set-cookie"===t?s.join("\n"):s.join(", ")}contentData(){return this._contentData||(this._contentDataProvider?this._contentData=this._contentDataProvider():this._contentData=ve.requestContentData(this)),this._contentData}setContentDataProvider(e){console.assert(!this._contentData,"contentData can only be set once."),this._contentDataProvider=e}contentURL(){return this._url}contentType(){return this._resourceType}async contentEncoded(){return(await this.contentData()).encoded}async requestContent(){const{content:e,error:t,encoded:s}=await this.contentData();return{content:e,error:t,isEncoded:s}}async searchInContent(e,t,s){if(!this._contentDataProvider)return ve.searchInRequest(this,e,t,s);const i=await this.contentData();let r=i.content;return r?(i.encoded&&(r=window.atob(r)),R.performSearchInContent(r,e,t,s)):[]}isHttpFamily(){return Boolean(this.url().match(/^https?:/i))}requestContentType(){return this.requestHeaderValue("Content-Type")}hasErrorStatusCode(){return this.statusCode>=400}setInitialPriority(e){this._initialPriority=e}initialPriority(){return this._initialPriority}setPriority(e){this._currentPriority=e}priority(){return this._currentPriority||this._initialPriority||null}setSignedExchangeInfo(e){this._signedExchangeInfo=e}signedExchangeInfo(){return this._signedExchangeInfo}async populateImageSource(e){const{content:t,encoded:s}=await this.contentData();let i=T.contentAsDataURL(t,this._mimeType,s);if(null===i&&!this._failed){(this.responseHeaderValue("cache-control")||"").includes("no-cache")||(i=this._url)}null!==i&&(e.src=i)}initiator(){return this._initiator||null}frames(){return this._frames}addProtocolFrameError(e,t){this.addFrame({type:qe.Error,text:e,time:this.pseudoWallTime(t),opCode:-1,mask:!1})}addProtocolFrame(e,t,s){const i=s?qe.Send:qe.Receive;this.addFrame({type:i,text:e.payloadData,time:this.pseudoWallTime(t),opCode:e.opcode,mask:e.mask})}addFrame(e){this._frames.push(e),this.dispatchEventToListeners(Be.WebsocketFrameAdded,e)}eventSourceMessages(){return this._eventSourceMessages}addEventSourceMessage(e,t,s,i){const r={time:this.pseudoWallTime(e),eventName:t,eventId:s,data:i};this._eventSourceMessages.push(r),this.dispatchEventToListeners(Be.EventSourceMessageAdded,r)}markAsRedirect(e){this._isRedirect=!0,this._requestId=`${this._backendRequestId}:redirected.${e}`}isRedirect(){return this._isRedirect}setRequestIdForTest(e){this._backendRequestId=e,this._requestId=e}charset(){const e=this.responseHeaderValue("content-type");if(!e)return null;const t=e.replace(/ /g,"").split(";").filter((e=>e.toLowerCase().startsWith("charset="))).map((e=>e.slice("charset=".length)));return t.length?t[0]:null}addExtraRequestInfo(e){this._blockedRequestCookies=e.blockedRequestCookies,this._includedRequestCookies=e.includedRequestCookies,this.setRequestHeaders(e.requestHeaders),this._hasExtraRequestInfo=!0,this.setRequestHeadersText(""),this._clientSecurityState=e.clientSecurityState}hasExtraRequestInfo(){return this._hasExtraRequestInfo}blockedRequestCookies(){return this._blockedRequestCookies}includedRequestCookies(){return this._includedRequestCookies}hasRequestCookies(){return this._includedRequestCookies.length>0||this._blockedRequestCookies.length>0}addExtraResponseInfo(e){if(this._blockedResponseCookies=e.blockedResponseCookies,this.responseHeaders=e.responseHeaders,e.responseHeadersText&&(this.responseHeadersText=e.responseHeadersText,!this.requestHeadersText())){let e=`${this.requestMethod} ${this.parsedURL.path}`;this.parsedURL.queryParams&&(e+="?"+this.parsedURL.queryParams),e+=" HTTP/1.1\r\n";for(const{name:t,value:s}of this.requestHeaders())e+=`${t}: ${s}\r\n`;this.setRequestHeadersText(e)}this._hasExtraResponseInfo=!0}hasExtraResponseInfo(){return this._hasExtraResponseInfo}blockedResponseCookies(){return this._blockedResponseCookies}redirectSourceSignedExchangeInfoHasNoErrors(){return null!==this._redirectSource&&null!==this._redirectSource._signedExchangeInfo&&!this._redirectSource._signedExchangeInfo.errors}clientSecurityState(){return this._clientSecurityState}setTrustTokenParams(e){this._trustTokenParams=e}trustTokenParams(){return this._trustTokenParams}setTrustTokenOperationDoneEvent(e){this._trustTokenOperationDoneEvent=e,this.dispatchEventToListeners(Be.TrustTokenResultAdded)}trustTokenOperationDoneEvent(){return this._trustTokenOperationDoneEvent}}const Be={FinishedLoading:Symbol("FinishedLoading"),TimingChanged:Symbol("TimingChanged"),RemoteAddressChanged:Symbol("RemoteAddressChanged"),RequestHeadersChanged:Symbol("RequestHeadersChanged"),ResponseHeadersChanged:Symbol("ResponseHeadersChanged"),WebsocketFrameAdded:Symbol("WebsocketFrameAdded"),EventSourceMessageAdded:Symbol("EventSourceMessageAdded"),TrustTokenResultAdded:Symbol("TrustTokenResultAdded")},Fe={Other:"other",Parser:"parser",Redirect:"redirect",Script:"script",Preload:"preload",SignedExchange:"signedExchange",Preflight:"preflight"},qe={Send:"send",Receive:"receive",Error:"error"};var Ue=Object.freeze({__proto__:null,MIME_TYPE:Ae,MIME_TYPE_TO_RESOURCE_TYPE:Oe,NetworkRequest:De,Events:Be,InitiatorType:Fe,WebSocketFrameType:qe,cookieBlockedReasonToUiString:function(e){switch(e){case Protocol.Network.CookieBlockedReason.SecureOnly:return k`This cookie was blocked because it had the "Secure" attribute and the connection was not secure.`;case Protocol.Network.CookieBlockedReason.NotOnPath:return k`This cookie was blocked because its path was not an exact match for or a superdirectory of the request url's path.`;case Protocol.Network.CookieBlockedReason.DomainMismatch:return k`This cookie was blocked because neither did the request URL's domain exactly match the cookie's domain, nor was the request URL's domain a subdomain of the cookie's Domain attribute value.`;case Protocol.Network.CookieBlockedReason.SameSiteStrict:return k`This cookie was blocked because it had the "SameSite=Strict" attribute and the request was made from a different site. This includes top-level navigation requests initiated by other sites.`;case Protocol.Network.CookieBlockedReason.SameSiteLax:return k`This cookie was blocked because it had the "SameSite=Lax" attribute and the request was made from a different site and was not initiated by a top-level navigation.`;case Protocol.Network.CookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:return k`This cookie didn't specify a "SameSite" attribute when it was stored and was defaulted to "SameSite=Lax," and was blocked because the request was made from a different site and was not initiated by a top-level navigation. The cookie had to have been set with "SameSite=None" to enable cross-site usage.`;case Protocol.Network.CookieBlockedReason.SameSiteNoneInsecure:return k`This cookie was blocked because it had the "SameSite=None" attribute but was not marked "Secure". Cookies without SameSite restrictions must be marked "Secure" and sent over a secure connection.`;case Protocol.Network.CookieBlockedReason.UserPreferences:return k`This cookie was blocked due to user preferences.`;case Protocol.Network.CookieBlockedReason.UnknownError:return k`An unknown error was encountered when trying to send this cookie.`;case Protocol.Network.CookieBlockedReason.SchemefulSameSiteStrict:return k`This cookie was blocked because it had the "SameSite=Strict" attribute but the request was cross-site. This includes top-level navigation requests initiated by other sites. This request is considered cross-site because the URL has a different scheme than the current site.`;case Protocol.Network.CookieBlockedReason.SchemefulSameSiteLax:return k`This cookie was blocked because it had the "SameSite=Lax" attribute but the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.`;case Protocol.Network.CookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:return k`This cookie didn't specify a "SameSite" attribute when it was stored, was defaulted to "SameSite=Lax", and was blocked because the request was cross-site and was not initiated by a top-level navigation. This request is considered cross-site because the URL has a different scheme than the current site.`}return""},setCookieBlockedReasonToUiString:function(e){switch(e){case Protocol.Network.SetCookieBlockedReason.SecureOnly:return k`This Set-Cookie was blocked because it had the "Secure" attribute but was not received over a secure connection.`;case Protocol.Network.SetCookieBlockedReason.SameSiteStrict:return k`This Set-Cookie was blocked because it had the "SameSite=Strict" attribute but came from a cross-site response which was not the response to a top-level navigation.`;case Protocol.Network.SetCookieBlockedReason.SameSiteLax:return k`This Set-Cookie was blocked because it had the "SameSite=Lax" attribute but came from a cross-site response which was not the response to a top-level navigation.`;case Protocol.Network.SetCookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:return k`This Set-Cookie didn't specify a "SameSite" attribute and was defaulted to "SameSite=Lax," and was blocked because it came from a cross-site response which was not the response to a top-level navigation. The Set-Cookie had to have been set with "SameSite=None" to enable cross-site usage.`;case Protocol.Network.SetCookieBlockedReason.SameSiteNoneInsecure:return k`This Set-Cookie was blocked because it had the "SameSite=None" attribute but did not have the "Secure" attribute, which is required in order to use "SameSite=None".`;case Protocol.Network.SetCookieBlockedReason.UserPreferences:return k`This Set-Cookie was blocked due to user preferences.`;case Protocol.Network.SetCookieBlockedReason.SyntaxError:return k`This Set-Cookie had invalid syntax.`;case Protocol.Network.SetCookieBlockedReason.SchemeNotSupported:return k`The scheme of this connection is not allowed to store cookies.`;case Protocol.Network.SetCookieBlockedReason.OverwriteSecure:return k`This Set-Cookie was blocked because it was not sent over a secure connection and would have overwritten a cookie with the Secure attribute.`;case Protocol.Network.SetCookieBlockedReason.InvalidDomain:return k`This Set-Cookie was blocked because its Domain attribute was invalid with regards to the current host url.`;case Protocol.Network.SetCookieBlockedReason.InvalidPrefix:return k`This Set-Cookie was blocked because it used the "__Secure-" or "__Host-" prefix in its name and broke the additional rules applied to cookies with these prefixes as defined in https://tools.ietf.org/html/draft-west-cookie-prefixes-05.`;case Protocol.Network.SetCookieBlockedReason.UnknownError:return k`An unknown error was encountered when trying to store this cookie.`;case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteStrict:return k`This Set-Cookie was blocked because it had the "SameSite=Strict" attribute but came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.`;case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteLax:return k`This Set-Cookie was blocked because it had the "SameSite=Lax" attribute but came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.`;case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:return k`This Set-Cookie didn't specify a "SameSite" attribute, was defaulted to "SameSite=Lax", and was blocked because it came from a cross-site response which was not the response to a top-level navigation. This response is considered cross-site because the URL has a different scheme than the current site.`}return""},cookieBlockedReasonToAttribute:function(e){switch(e){case Protocol.Network.CookieBlockedReason.SecureOnly:return ue.Secure;case Protocol.Network.CookieBlockedReason.NotOnPath:return ue.Path;case Protocol.Network.CookieBlockedReason.DomainMismatch:return ue.Domain;case Protocol.Network.CookieBlockedReason.SameSiteStrict:case Protocol.Network.CookieBlockedReason.SameSiteLax:case Protocol.Network.CookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:case Protocol.Network.CookieBlockedReason.SameSiteNoneInsecure:case Protocol.Network.CookieBlockedReason.SchemefulSameSiteStrict:case Protocol.Network.CookieBlockedReason.SchemefulSameSiteLax:case Protocol.Network.CookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:return ue.SameSite;case Protocol.Network.CookieBlockedReason.UserPreferences:case Protocol.Network.CookieBlockedReason.UnknownError:return null}return null},setCookieBlockedReasonToAttribute:function(e){switch(e){case Protocol.Network.SetCookieBlockedReason.SecureOnly:case Protocol.Network.SetCookieBlockedReason.OverwriteSecure:return ue.Secure;case Protocol.Network.SetCookieBlockedReason.SameSiteStrict:case Protocol.Network.SetCookieBlockedReason.SameSiteLax:case Protocol.Network.SetCookieBlockedReason.SameSiteUnspecifiedTreatedAsLax:case Protocol.Network.SetCookieBlockedReason.SameSiteNoneInsecure:case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteStrict:case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteLax:case Protocol.Network.SetCookieBlockedReason.SchemefulSameSiteUnspecifiedTreatedAsLax:return ue.SameSite;case Protocol.Network.SetCookieBlockedReason.InvalidDomain:return ue.Domain;case Protocol.Network.SetCookieBlockedReason.InvalidPrefix:return ue.Name;case Protocol.Network.SetCookieBlockedReason.UserPreferences:case Protocol.Network.SetCookieBlockedReason.SyntaxError:case Protocol.Network.SetCookieBlockedReason.SchemeNotSupported:case Protocol.Network.SetCookieBlockedReason.UnknownError:return null}return null},NameValue:undefined,WebSocketFrame:undefined,BlockedSetCookieWithReason:undefined,BlockedCookieWithReason:undefined,ContentData:undefined,EventSourceMessage:undefined,ExtraRequestInfo:undefined,ExtraResponseInfo:undefined});class He{static fromLocalObject(e){return new Ge(e)}static type(e){if(null===e)return"null";const t=typeof e;return"object"!==t&&"function"!==t?t:e.type}static arrayNameFromDescription(e){return e.replace(Xe,"").replace(Je,"")}static arrayLength(e){if("array"!==e.subtype&&"typedarray"!==e.subtype)return 0;const t=e.description&&e.description.match(Xe),s=e.description&&e.description.match(Je);return t?parseInt(t[1],10):s?parseInt(s[1],10):0}static unserializableDescription(e){const t=typeof e;if("number"===t){const t=String(e);if(0===e&&1/e<0)return Qe.Negative0;if(t===Qe.NaN||t===Qe.Infinity||t===Qe.NegativeInfinity)return t}return"bigint"===t?e+"n":null}static toCallArgument(e){const t=typeof e;if("undefined"===t)return{};const s=He.unserializableDescription(e);if("number"===t)return null!==s?{unserializableValue:s}:{value:e};if("bigint"===t)return{unserializableValue:s};if("string"===t||"boolean"===t)return{value:e};if(!e)return{value:null};const i=e;if(e instanceof He){const t=e.unserializableValue();if(void 0!==t)return{unserializableValue:t}}else if(void 0!==i.unserializableValue)return{unserializableValue:i.unserializableValue};return void 0!==i.objectId?{objectId:i.objectId}:{value:i.value}}static async loadFromObjectPerProto(e,t){const s=await Promise.all([e.getAllProperties(!0,t),e.getOwnProperties(t)]),i=s[0].properties,r=s[1].properties,o=s[1].internalProperties;if(!r||!i)return{properties:null,internalProperties:null};const n=new Map,a=[];for(let e=0;e<i.length;e++){const t=i[e];t.symbol?a.push(t):n.set(t.name,t)}for(let e=0;e<r.length;e++){const t=r[e];t.isAccessorProperty()||(t.symbol?a.push(t):n.set(t.name,t))}return{properties:[...n.values()].concat(a),internalProperties:o||null}}customPreview(){return null}get objectId(){return"Not implemented"}get type(){throw"Not implemented"}get subtype(){throw"Not implemented"}get value(){throw"Not implemented"}unserializableValue(){throw"Not implemented"}get description(){throw"Not implemented"}set description(e){throw"Not implemented"}get hasChildren(){throw"Not implemented"}get preview(){}get className(){return null}arrayLength(){throw"Not implemented"}getOwnProperties(e){throw"Not implemented"}getAllProperties(e,t){throw"Not implemented"}async deleteProperty(e){throw"Not implemented"}async setPropertyValue(e,t){throw"Not implemented"}callFunction(e,t){throw"Not implemented"}callFunctionJSON(e,t){throw"Not implemented"}release(){}debuggerModel(){throw new Error("DebuggerModel-less object")}runtimeModel(){throw new Error("RuntimeModel-less object")}isNode(){return!1}}class je extends He{constructor(e,t,s,i,r,o,n,a,l,d){super(),this._runtimeModel=e,this._runtimeAgent=e.target().runtimeAgent(),this._type=s,this._subtype=i,t?(this._objectId=t,this._description=n,this._hasChildren="symbol"!==s,this._preview=a):(this._description=n,!this.description&&o&&(this._description=o),this._description||"object"==typeof r&&null!==r||(this._description=String(r)),this._hasChildren=!1,"string"==typeof o?(this._unserializableValue=o,o===Qe.Infinity||o===Qe.NegativeInfinity||o===Qe.Negative0||o===Qe.NaN?this._value=Number(o):"bigint"===s&&o.endsWith("n")?this._value=BigInt(o.substring(0,o.length-1)):this._value=o):this._value=r),this._customPreview=l||null,this._className="string"==typeof d?d:null}customPreview(){return this._customPreview}get objectId(){return this._objectId}get type(){return this._type}get subtype(){return this._subtype}get value(){return this._value}unserializableValue(){return this._unserializableValue}get description(){return this._description}set description(e){this._description=e}get hasChildren(){return this._hasChildren}get preview(){return this._preview}get className(){return this._className}getOwnProperties(e){return this.doGetProperties(!0,!1,e)}getAllProperties(e,t){return this.doGetProperties(!1,e,t)}_createRemoteObject(e){return Promise.resolve(this._runtimeModel.createRemoteObject(e))}async doGetProperties(e,t,s){if(!this._objectId)return{properties:null,internalProperties:null};const i=await this._runtimeAgent.invoke_getProperties({objectId:this._objectId,ownProperties:e,accessorPropertiesOnly:t,generatePreview:s});if(i.getError())return{properties:null,internalProperties:null};if(i.exceptionDetails)return this._runtimeModel.exceptionThrown(Date.now(),i.exceptionDetails),{properties:null,internalProperties:null};const{result:r=[],internalProperties:o=[],privateProperties:n=[]}=i,a=[];for(const e of r){const t=e.value?await this._createRemoteObject(e.value):null,s=e.symbol?this._runtimeModel.createRemoteObject(e.symbol):null,i=new We(e.name,t,Boolean(e.enumerable),Boolean(e.writable),Boolean(e.isOwn),Boolean(e.wasThrown),s);void 0===e.value&&(e.get&&"undefined"!==e.get.type&&(i.getter=this._runtimeModel.createRemoteObject(e.get)),e.set&&"undefined"!==e.set.type&&(i.setter=this._runtimeModel.createRemoteObject(e.set))),a.push(i)}for(const e of n){const t=this._runtimeModel.createRemoteObject(e.value),s=new We(e.name,t,!0,!0,!0,!1,void 0,!1,void 0,!0);a.push(s)}const l=[];for(const e of o){if(!e.value)continue;if("[[StableObjectId]]"===e.name)continue;const t=this._runtimeModel.createRemoteObject(e.value);l.push(new We(e.name,t,!0,!1,void 0,void 0,void 0,!0))}return{properties:a,internalProperties:l}}async setPropertyValue(e,t){if(!this._objectId)return"Canâ€™t set a property of non-object.";const s=await this._runtimeAgent.invoke_evaluate({expression:t,silent:!0});if(s.getError()||s.exceptionDetails)return s.getError()||("string"!==s.result.type?s.result.description:s.result.value);"string"==typeof e&&(e=He.toCallArgument(e));const i=this.doSetObjectPropertyValue(s.result,e);return s.result.objectId&&this._runtimeAgent.invoke_releaseObject({objectId:s.result.objectId}),i}async doSetObjectPropertyValue(e,t){const s=[t,He.toCallArgument(e)],i=await this._runtimeAgent.invoke_callFunctionOn({objectId:this._objectId,functionDeclaration:"function(a, b) { this[a] = b; }",arguments:s,silent:!0}),r=i.getError();return r||i.exceptionDetails?r||i.result.description:void 0}async deleteProperty(e){if(!this._objectId)return"Canâ€™t delete a property of non-object.";const t=await this._runtimeAgent.invoke_callFunctionOn({objectId:this._objectId,functionDeclaration:"function(a) { delete this[a]; return !(a in this); }",arguments:[e],silent:!0});return t.getError()||t.exceptionDetails?t.getError()||t.result.description:t.result.value?void 0:"Failed to delete property."}async callFunction(e,t){const s=await this._runtimeAgent.invoke_callFunctionOn({objectId:this._objectId,functionDeclaration:e.toString(),arguments:t,silent:!0});return s.getError()?{object:null,wasThrown:!1}:{object:this._runtimeModel.createRemoteObject(s.result),wasThrown:Boolean(s.exceptionDetails)}}async callFunctionJSON(e,t){const s=await this._runtimeAgent.invoke_callFunctionOn({objectId:this._objectId,functionDeclaration:e.toString(),arguments:t,silent:!0,returnByValue:!0});return this._objectId?s.getError()||s.exceptionDetails?null:s.result.value:this.value}release(){this._objectId&&this._runtimeAgent.invoke_releaseObject({objectId:this._objectId})}arrayLength(){return He.arrayLength(this)}debuggerModel(){return this._runtimeModel.debuggerModel()}runtimeModel(){return this._runtimeModel}isNode(){return Boolean(this._objectId)&&"object"===this.type&&"node"===this.subtype}}class ze extends je{constructor(e,t,s,i,r,o,n,a,l){super(e,t,i,r,o,n,a,l),this._scopeRef=s,this._savedScopeProperties=void 0}async doGetProperties(e,t,s){if(t)return{properties:[],internalProperties:[]};if(this._savedScopeProperties)return{properties:this._savedScopeProperties.slice(),internalProperties:null};const i=await super.doGetProperties(e,t,!0);if(this._scopeRef&&Array.isArray(i.properties)&&(this._savedScopeProperties=i.properties.slice(),!this._scopeRef.callFrameId))for(const e of this._savedScopeProperties)e.writable=!1;return i}async doSetObjectPropertyValue(e,t){const s=t.value,i=await this.debuggerModel().setVariableValue(this._scopeRef.number,s,He.toCallArgument(e),this._scopeRef.callFrameId);if(i)return i;if(this._savedScopeProperties)for(const t of this._savedScopeProperties)t.name===s&&(t.value=this._runtimeModel.createRemoteObject(e))}}class Ve{constructor(e,t){this.number=e,this.callFrameId=t}}class We{constructor(e,t,s,i,r,o,n,a,l,d){this.name=e,null!==t&&(this.value=t),this.enumerable=void 0===s||s;const c=!a||Boolean(l);this.writable=void 0!==i?i:c,this.isOwn=Boolean(r),this.wasThrown=Boolean(o),n&&(this.symbol=n),this.synthetic=Boolean(a),l&&(this.syntheticSetter=l),this.private=Boolean(d),this.getter,this.setter,this.value}async setSyntheticValue(e){if(!this.syntheticSetter)return!1;const t=await this.syntheticSetter(e);return t&&(this.value=t),Boolean(t)}isAccessorProperty(){return Boolean(this.getter||this.setter)}}class Ge extends He{constructor(e){super(),this._value=e,this._cachedDescription,this._cachedChildren}get objectId(){}get value(){return this._value}unserializableValue(){return He.unserializableDescription(this._value)||void 0}get description(){if(this._cachedDescription)return this._cachedDescription;if("object"===this.type)switch(this.subtype){case"array":this._cachedDescription=this._concatenate("[","]",function(e){return this._formatValue(e.value||null)}.bind(this));break;case"date":this._cachedDescription=String(this._value);break;case"null":this._cachedDescription="null";break;default:this._cachedDescription=this._concatenate("{","}",function(e){let t=e.name;return/^\s|\s$|^$|\n/.test(t)&&(t='"'+t.replace(/\n/g,"â†µ")+'"'),t+": "+this._formatValue(e.value||null)}.bind(this))}else this._cachedDescription=String(this._value);return this._cachedDescription}_formatValue(e){if(!e)return"undefined";const t=e.description||"";return"string"===e.type?'"'+t.replace(/\n/g,"â†µ")+'"':t}_concatenate(e,t,s){let i=e;const r=this._children();for(let e=0;e<r.length;++e){const t=s(r[e]);if(i.length+t.length>100){i+=",â€¦";break}e&&(i+=", "),i+=t}return i+=t,i}get type(){return typeof this._value}get subtype(){return null===this._value?"null":Array.isArray(this._value)?"array":this._value instanceof Date?"date":void 0}get hasChildren(){return"object"==typeof this._value&&null!==this._value&&Boolean(Object.keys(this._value).length)}getOwnProperties(e){return Promise.resolve({properties:this._children(),internalProperties:null})}getAllProperties(e,t){return e?Promise.resolve({properties:[],internalProperties:null}):Promise.resolve({properties:this._children(),internalProperties:null})}_children(){if(!this.hasChildren)return[];const e=this._value;return this._cachedChildren||(this._cachedChildren=Object.keys(e).map((function(t){let s=e[t];return s instanceof He||(s=He.fromLocalObject(s)),new We(t,s)}))),this._cachedChildren}arrayLength(){return Array.isArray(this._value)?this._value.length:0}callFunction(e,t){const s=this._value,i=t?t.map((e=>e.value)):[];let r,o=!1;try{r=e.apply(s,i)}catch(e){o=!0}const n=He.fromLocalObject(r);return Promise.resolve({object:n,wasThrown:o})}callFunctionJSON(e,t){const s=this._value,i=t?t.map((e=>e.value)):[];let r;try{r=e.apply(s,i)}catch(e){r=null}return Promise.resolve(r)}}class $e{constructor(e){this._object=e}static objectAsArray(e){if(!e||"object"!==e.type||"array"!==e.subtype&&"typedarray"!==e.subtype)throw new Error("Object is empty or not an array");return new $e(e)}static createFromRemoteObjects(e){if(!e.length)throw new Error("Input array is empty");const t=[];for(let s=0;s<e.length;++s)t.push(He.toCallArgument(e[s]));return e[0].callFunction((function(){if(arguments.length>1)return new Array(arguments);return[arguments[0]]}),t).then((function(e){if(e.wasThrown||!e.object)throw new Error("Call function throws exceptions or returns empty value");return $e.objectAsArray(e.object)}))}at(e){if(e<0||e>this._object.arrayLength())throw new Error("Out of range");return this._object.callFunction((function(e){return this[e]}),[He.toCallArgument(e)]).then((function(e){if(e.wasThrown||!e.object)throw new Error("Exception in callFunction or result value is empty");return e.object}))}length(){return this._object.arrayLength()}map(e){const t=[];for(let s=0;s<this.length();++s)t.push(this.at(s).then(e));return Promise.all(t)}object(){return this._object}}class Ke{constructor(e){this._object=e}static objectAsFunction(e){if(!e||"function"!==e.type)throw new Error("Object is empty or not a function");return new Ke(e)}targetFunction(){return this._object.getOwnProperties(!1).then(function(e){if(!e.internalProperties)return this._object;const t=e.internalProperties;for(const e of t)if("[[TargetFunction]]"===e.name)return e.value;return this._object}.bind(this))}targetFunctionDetails(){return this.targetFunction().then(function(t){const s=e.bind(null,this._object!==t?t:null);return t.debuggerModel().functionDetailsPromise(t).then(s)}.bind(this));function e(e,t){return e&&e.release(),t}}object(){return this._object}}const Xe=/\(([0-9]+)\)/,Je=/\[([0-9]+)\]/,Qe={Negative0:"-0",NaN:"NaN",Infinity:"Infinity",NegativeInfinity:"-Infinity"};var Ye=Object.freeze({__proto__:null,RemoteObject:He,RemoteObjectImpl:je,ScopeRemoteObject:ze,ScopeRef:Ve,RemoteObjectProperty:We,LocalJSONObject:Ge,RemoteArray:$e,RemoteFunction:Ke,CallFunctionResult:undefined,GetPropertiesResult:undefined});class Ze{constructor(e){this._fontFamily=e.fontFamily,this._fontVariationAxes=e.fontVariationAxes||[],this._fontVariationAxesByTag=new Map;for(const e of this._fontVariationAxes)this._fontVariationAxesByTag.set(e.tag,e)}getFontFamily(){return this._fontFamily}getVariationAxisByTag(e){return this._fontVariationAxesByTag.get(e)}}var et=Object.freeze({__proto__:null,CSSFontFace:Ze});class tt{constructor(e){this._active=e.active,this._expressions=[];for(let t=0;t<e.expressions.length;++t)this._expressions.push(st.parsePayload(e.expressions[t]))}static parsePayload(e){return new tt(e)}active(){return this._active}expressions(){return this._expressions}}class st{constructor(e){this._value=e.value,this._unit=e.unit,this._feature=e.feature,this._valueRange=e.valueRange?x.TextRange.fromObject(e.valueRange):null,this._computedLength=e.computedLength||null}static parsePayload(e){return new st(e)}value(){return this._value}unit(){return this._unit}feature(){return this._feature}valueRange(){return this._valueRange}computedLength(){return this._computedLength}}class it{constructor(e,t){this._cssModel=e,this._reinitialize(t)}static parsePayload(e,t){return new it(e,t)}static parseMediaArrayPayload(e,t){const s=[];for(let i=0;i<t.length;++i)s.push(it.parsePayload(e,t[i]));return s}_reinitialize(e){if(this.text=e.text,this.source=e.source,this.sourceURL=e.sourceURL||"",this.range=e.range?x.TextRange.fromObject(e.range):null,this.styleSheetId=e.styleSheetId,this.mediaList=null,e.mediaList){this.mediaList=[];for(let t=0;t<e.mediaList.length;++t)this.mediaList.push(tt.parsePayload(e.mediaList[t]))}}rebase(e){this.styleSheetId===e.styleSheetId&&this.range&&(e.oldRange.equal(this.range)?this._reinitialize(e.payload):this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}equal(e){return!!(this.styleSheetId&&this.range&&e.range)&&(this.styleSheetId===e.styleSheetId&&this.range.equal(e.range))}active(){if(!this.mediaList)return!0;for(let e=0;e<this.mediaList.length;++e)if(this.mediaList[e].active())return!0;return!1}lineNumberInSource(){if(!this.range)return;const e=this.header();return e?e.lineNumberInSource(this.range.startLine):void 0}columnNumberInSource(){if(!this.range)return;const e=this.header();return e?e.columnNumberInSource(this.range.startLine,this.range.startColumn):void 0}header(){return this.styleSheetId?this._cssModel.styleSheetHeaderForId(this.styleSheetId):null}rawLocation(){const e=this.header();if(!e||void 0===this.lineNumberInSource())return null;const t=Number(this.lineNumberInSource());return new Xt(e,t,this.columnNumberInSource())}}var rt=Object.freeze({__proto__:null,CSSMediaQuery:tt,CSSMediaQueryExpression:st,CSSMedia:it,Source:{LINKED_SHEET:"linkedSheet",INLINE_SHEET:"inlineSheet",MEDIA_RULE:"mediaRule",IMPORT_RULE:"importRule"}});class ot{constructor(e,t,s,i,r,o,n,a,l,d){this.ownerStyle=e,this.index=t,this.name=s,this.value=i,this.important=r,this.disabled=o,this.parsedOk=n,this.implicit=a,this.text=l,this.range=d?x.TextRange.fromObject(d):null,this._active=!0,this._nameRange=null,this._valueRange=null}static parsePayload(e,t,s){return new ot(e,t,s.name,s.value,s.important||!1,s.disabled||!1,!("parsedOk"in s)||Boolean(s.parsedOk),Boolean(s.implicit),s.text,s.range)}_ensureRanges(){if(this._nameRange&&this._valueRange)return;const e=this.range,t=this.text?new M.Text(this.text):null;if(!e||!t)return;const s=t.value().indexOf(this.name),i=t.value().lastIndexOf(this.value);if(-1===s||-1===i||s>i)return;const r=new x.SourceRange(s,this.name.length),o=new x.SourceRange(i,this.value.length);function n(e,t,s){return 0===e.startLine&&(e.startColumn+=s,e.endColumn+=s),e.startLine+=t,e.endLine+=t,e}this._nameRange=n(t.toTextRange(r),e.startLine,e.startColumn),this._valueRange=n(t.toTextRange(o),e.startLine,e.startColumn)}nameRange(){return this._ensureRanges(),this._nameRange}valueRange(){return this._ensureRanges(),this._valueRange}rebase(e){this.ownerStyle.styleSheetId===e.styleSheetId&&this.range&&(this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}setActive(e){this._active=e}get propertyText(){return void 0!==this.text?this.text:""===this.name?"":this.name+": "+this.value+(this.important?" !important":"")+";"}activeInStyle(){return this._active}async setText(e,t,s){if(!this.ownerStyle)return Promise.reject(new Error("No ownerStyle for property"));if(!this.ownerStyle.styleSheetId)return Promise.reject(new Error("No owner style id"));if(!this.range||!this.ownerStyle.range)return Promise.reject(new Error("Style not editable"));if(t&&(m.actionTaken(p.Action.StyleRuleEdited),this.name.startsWith("--")&&m.actionTaken(p.Action.CustomPropertyEdited)),s&&e===this.propertyText)return this.ownerStyle.cssModel().domModel().markUndoableState(!t),Promise.resolve(!0);const r=this.range.relativeTo(this.ownerStyle.range.startLine,this.ownerStyle.range.startColumn),o=this.ownerStyle.cssText?this._detectIndentation(this.ownerStyle.cssText):i.Settings.instance().moduleSetting("textEditorIndent").get(),n=this.ownerStyle.cssText?o.substring(0,this.ownerStyle.range.endColumn):"",a=new M.Text(this.ownerStyle.cssText||"").replaceRange(r,y.sprintf(";%s;",e)),l=await L.Runtime.instance().extension(R.TokenizerFactory).instance(),d=ot._formatStyle(a,o,n,l);return this.ownerStyle.setText(d,t)}static _formatStyle(e,t,s,i){const r=t.substring(s.length)+t;t&&(t="\n"+t);let o="",n="",a="",l=!1,d=!1;return i.createTokenizer("text/css")("*{"+e+"}",(function(e,s,i,c){if(!l){const i=s&&s.includes("css-comment")&&function(e){const t=e.indexOf(":");if(-1===t)return!1;const s=e.substring(2,t).trim();return K().isCSSPropertyName(s)}(e),r=s&&(s.includes("css-string")||s.includes("css-meta")||s.includes("css-property")||s.includes("css-variable-2"));return i?o=o.trimRight()+t+e:r?(l=!0,a=e):(";"!==e||d)&&(o+=e,!e.trim()||s&&s.includes("css-comment")||(d=";"!==e)),void("{"!==e||s||(d=!1))}if("}"===e||";"===e){const s=a.trim();o=o.trimRight()+t+s+(s.endsWith(":")?" ":"")+";",d=!1,l=!1,n="","}"===e&&(o+="}")}else{if(K().isGridAreaDefiningProperty(n)){const t=G.exec(e);t&&0===t.index&&!a.trimRight().endsWith("]")&&(a=a.trimRight()+"\n"+r)}n||":"!==e||(n=a),a+=e}})),l&&(o+=a),o=o.substring(2,o.length-1).trimRight(),o+(t?"\n"+s:"")}_detectIndentation(e){const t=e.split("\n");return t.length<2?"":R.Utils.lineIndent(t[1])}setValue(e,t,s,i){const r=this.name+": "+e+(this.important?" !important":"")+";";this.setText(r,t,s).then(i)}setDisabled(e){if(!this.ownerStyle)return Promise.resolve(!1);if(e===this.disabled)return Promise.resolve(!0);if(!this.text)return Promise.resolve(!0);const t=this.text.trim(),s=e?"/* "+t+" */":this.text.substring(2,t.length-2).trim();return this.setText(s,!0,!0)}}var nt=Object.freeze({__proto__:null,CSSProperty:ot});class at{constructor(e,t,s,i){this._cssModel=e,this.parentRule=t,this._allProperties,this.styleSheetId,this.range,this.cssText,this._shorthandValues,this._shorthandIsImportant,this._activePropertyMap,this._leadingProperties,this._reinitialize(s),this.type=i}rebase(e){if(this.styleSheetId===e.styleSheetId&&this.range)if(e.oldRange.equal(this.range))this._reinitialize(e.payload);else{this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange);for(let t=0;t<this._allProperties.length;++t)this._allProperties[t].rebase(e)}}_reinitialize(e){this.styleSheetId=e.styleSheetId,this.range=e.range?x.TextRange.fromObject(e.range):null;const t=e.shorthandEntries;this._shorthandValues=new Map,this._shorthandIsImportant=new Set;for(let e=0;e<t.length;++e)this._shorthandValues.set(t[e].name,t[e].value),t[e].important&&this._shorthandIsImportant.add(t[e].name);if(this._allProperties=[],e.cssText&&this.range){const t=new M.Text(e.cssText);let i={line:this.range.startLine,column:this.range.startColumn};for(const r of e.cssProperties){const e=r.range;e&&(s.call(this,t,i.line,i.column,e.startLine,e.startColumn),i={line:e.endLine,column:e.endColumn}),this._allProperties.push(ot.parsePayload(this,this._allProperties.length,r))}s.call(this,t,i.line,i.column,this.range.endLine,this.range.endColumn)}else for(const t of e.cssProperties)this._allProperties.push(ot.parsePayload(this,this._allProperties.length,t));this._generateSyntheticPropertiesIfNeeded(),this._computeInactiveProperties(),this._activePropertyMap=new Map;for(const e of this._allProperties)e.activeInStyle()&&this._activePropertyMap.set(e.name,e);function s(e,t,s,r,o){const n=new x.TextRange(t,s,r,o);if(!this.range)return;const a=e.extract(n.relativeTo(this.range.startLine,this.range.startColumn)).split("\n");let l=0,d=!1;for(const e of a){let r=0;for(const o of e.split(";")){const e=i(o,d),n=e.text.trim();if(d=e.inComment,n){let e,i;const a=n.indexOf(":");-1===a?(e=n,i=""):(e=n.substring(0,a).trim(),i=n.substring(a+1).trim());const d=new x.TextRange(l,r,l,r+o.length);this._allProperties.push(new ot(this,this._allProperties.length,e,i,!1,!1,!1,!1,o,d.relativeFrom(t,s)))}r+=o.length+1}l++}}function i(e,t){let s="";for(let i=0;i<e.length;i++)t||"/*"!==e.substring(i,i+2)?t&&"*/"===e.substring(i,i+2)?(t=!1,i++):t||(s+=e[i]):(t=!0,i++);return{text:s,inComment:t}}this.cssText=e.cssText,this._leadingProperties=null}_generateSyntheticPropertiesIfNeeded(){if(this.range)return;if(!this._shorthandValues.size)return;const e=new Set;for(const t of this._allProperties)e.add(t.name);const t=[];for(const s of this._allProperties){const i=K().shorthands(s.name)||[];for(const s of i){if(e.has(s))continue;const i=this._shorthandValues.get(s);if(!i)continue;const r=Boolean(this._shorthandIsImportant.has(s)),o=new ot(this,this.allProperties().length,s,i,r,!1,!0,!1);t.push(o),e.add(s)}}this._allProperties=this._allProperties.concat(t)}_computeLeadingProperties(){if(this.range)return this._allProperties.filter((function(e){return Boolean(e.range)}));const e=[];for(const t of this._allProperties){const s=K().shorthands(t.name)||[];let i=!1;for(const e of s)if(this._shorthandValues.get(e)){i=!0;break}i||e.push(t)}return e}leadingProperties(){return this._leadingProperties||(this._leadingProperties=this._computeLeadingProperties()),this._leadingProperties}target(){return this._cssModel.target()}cssModel(){return this._cssModel}_computeInactiveProperties(){const e=new Map;for(let t=0;t<this._allProperties.length;++t){const s=this._allProperties[t];if(s.disabled||!s.parsedOk){s.setActive(!1);continue}const i=K().canonicalPropertyName(s.name),r=e.get(i);r?this.leadingProperties().find((e=>e===s))&&(!r.important||s.important)?(r.setActive(!1),e.set(i,s)):s.setActive(!1):e.set(i,s)}}allProperties(){return this._allProperties}getPropertyValue(e){const t=this._activePropertyMap.get(e);return t?t.value:""}isPropertyImplicit(e){const t=this._activePropertyMap.get(e);return!!t&&t.implicit}longhandProperties(e){const t=K().longhands(e.toLowerCase()),s=[];for(let e=0;t&&e<t.length;++e){const i=this._activePropertyMap.get(t[e]);i&&s.push(i)}return s}propertyAt(e){return e<this.allProperties().length?this.allProperties()[e]:null}pastLastSourcePropertyIndex(){for(let e=this.allProperties().length-1;e>=0;--e)if(this.allProperties()[e].range)return e+1;return 0}_insertionRange(e){const t=this.propertyAt(e);if(t&&t.range)return t.range.collapseToStart();if(!this.range)throw new Error("CSSStyleDeclaration.range is null");return this.range.collapseToEnd()}newBlankProperty(e){e=void 0===e?this.pastLastSourcePropertyIndex():e;return new ot(this,e,"","",!1,!1,!0,!1,"",this._insertionRange(e))}setText(e,t){return this.range&&this.styleSheetId?this._cssModel.setStyleText(this.styleSheetId,this.range,e,t):Promise.resolve(!1)}insertPropertyAt(e,t,s,i){this.newBlankProperty(e).setText(t+": "+s+";",!1,!0).then(i)}appendProperty(e,t,s){this.insertPropertyAt(this.allProperties().length,e,t,s)}}const lt={Regular:"Regular",Inline:"Inline",Attributes:"Attributes"};var dt=Object.freeze({__proto__:null,CSSStyleDeclaration:at,Type:lt});class ct{constructor(e,t){if(this._cssModel=e,this.styleSheetId=t.styleSheetId,this.styleSheetId){const e=this._getStyleSheetHeader(this.styleSheetId);this.sourceURL=e.sourceURL}this.origin=t.origin,this.style=new at(this._cssModel,this,t.style,lt.Regular)}rebase(e){this.styleSheetId===e.styleSheetId&&this.style.rebase(e)}resourceURL(){if(!this.styleSheetId)return"";return this._getStyleSheetHeader(this.styleSheetId).resourceURL()}isUserAgent(){return this.origin===Protocol.CSS.StyleSheetOrigin.UserAgent}isInjected(){return this.origin===Protocol.CSS.StyleSheetOrigin.Injected}isViaInspector(){return this.origin===Protocol.CSS.StyleSheetOrigin.Inspector}isRegular(){return this.origin===Protocol.CSS.StyleSheetOrigin.Regular}cssModel(){return this._cssModel}_getStyleSheetHeader(e){const t=this._cssModel.styleSheetHeaderForId(e);return console.assert(null!==t),t}}class ht{constructor(e){this.text=e.text,e.range&&(this.range=x.TextRange.fromObject(e.range))}rebase(e){this.range&&(this.range=this.range.rebaseAfterTextEdit(e.oldRange,e.newRange))}}class ut extends ct{constructor(e,t,s){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this.selectors,this._reinitializeSelectors(t.selectorList),this.media=t.media?it.parseMediaArrayPayload(e,t.media):[],this.wasUsed=s||!1}static createDummyRule(e,t){const s={selectorList:{text:"",selectors:[{text:t,value:void 0}]},style:{styleSheetId:"0",range:new x.TextRange(0,0,0,0),shorthandEntries:[],cssProperties:[]},origin:Protocol.CSS.StyleSheetOrigin.Inspector};return new ut(e,s)}_reinitializeSelectors(e){this.selectors=[];for(let t=0;t<e.selectors.length;++t)this.selectors.push(new ht(e.selectors[t]))}setSelectorText(e){const t=this.styleSheetId;if(!t)throw"No rule stylesheet id";const s=this.selectorRange();if(!s)throw"Rule selector is not editable";return this._cssModel.setSelectorText(t,s,e)}selectorText(){return this.selectors.map((e=>e.text)).join(", ")}selectorRange(){const e=this.selectors[0].range,t=this.selectors[this.selectors.length-1].range;return e&&t?new x.TextRange(e.startLine,e.startColumn,t.endLine,t.endColumn):null}lineNumberInSource(e){const t=this.selectors[e];if(!t||!t.range||!this.styleSheetId)return 0;return this._getStyleSheetHeader(this.styleSheetId).lineNumberInSource(t.range.startLine)}columnNumberInSource(e){const t=this.selectors[e];if(!t||!t.range||!this.styleSheetId)return;return this._getStyleSheetHeader(this.styleSheetId).columnNumberInSource(t.range.startLine,t.range.startColumn)}rebase(e){if(this.styleSheetId!==e.styleSheetId)return;const t=this.selectorRange();if(t&&t.equal(e.oldRange))this._reinitializeSelectors(e.payload);else for(let t=0;t<this.selectors.length;++t)this.selectors[t].rebase(e);for(const t of this.media)t.rebase(e);super.rebase(e)}}class gt{constructor(e,t){this._cssModel=e,this._animationName=new ht(t.animationName),this._keyframes=t.keyframes.map((t=>new mt(e,t)))}name(){return this._animationName}keyframes(){return this._keyframes}}class mt extends ct{constructor(e,t){super(e,{origin:t.origin,style:t.style,styleSheetId:t.styleSheetId}),this._keyText,this._reinitializeKey(t.keyText)}key(){return this._keyText}_reinitializeKey(e){this._keyText=new ht(e)}rebase(e){this.styleSheetId===e.styleSheetId&&this._keyText.range&&(e.oldRange.equal(this._keyText.range)?this._reinitializeKey(e.payload):this._keyText.rebase(e),super.rebase(e))}setKeyText(e){const t=this.styleSheetId;if(!t)throw"No rule stylesheet id";const s=this._keyText.range;if(!s)throw"Keyframe key is not editable";return this._cssModel.setKeyframeKey(t,s,e)}}var pt=Object.freeze({__proto__:null,CSSRule:ct,CSSStyleRule:ut,CSSKeyframesRule:gt,CSSKeyframeRule:mt});class _t{constructor(e,t,s,i,r,o,n,a){this._cssModel=e,this._node=t,this._addedStyles=new Map,this._matchingSelectors=new Map,this._keyframes=[],a&&(this._keyframes=a.map((t=>new gt(e,t)))),this._nodeForStyle=new Map,this._inheritedStyles=new Set,r=l(r);for(const e of n)e.matchedCSSRules=l(e.matchedCSSRules);this._mainDOMCascade=this._buildMainCascade(s,i,r,n),this._pseudoDOMCascades=this._buildPseudoCascades(o),this._styleToDOMCascade=new Map;for(const e of Array.from(this._pseudoDOMCascades.values()).concat(this._mainDOMCascade))for(const t of e.styles())this._styleToDOMCascade.set(t,e);function l(e){for(const t of e)r(t);const t=[];for(const r of e){const e=t[t.length-1];e&&"user-agent"===r.rule.origin&&"user-agent"===e.rule.origin&&r.rule.selectorList.text===e.rule.selectorList.text&&i(r)===i(e)?s(r,e):t.push(r)}return t;function s(e,t){const s=new Map,i=new Map;for(const e of t.rule.style.shorthandEntries)s.set(e.name,e.value);for(const e of t.rule.style.cssProperties)i.set(e.name,e.value);for(const t of e.rule.style.shorthandEntries)s.set(t.name,t.value);for(const t of e.rule.style.cssProperties)i.set(t.name,t.value);t.rule.style.shorthandEntries=[...s.entries()].map((([e,t])=>({name:e,value:t}))),t.rule.style.cssProperties=[...i.entries()].map((([e,t])=>({name:e,value:t})))}function i(e){return e.rule.media?e.rule.media.map((e=>e.text)).join(", "):null}function r(e){const{matchingSelectors:t,rule:s}=e;"user-agent"===s.origin&&t.length&&(s.selectorList.selectors=s.selectorList.selectors.filter(((e,s)=>t.includes(s))),s.selectorList.text=s.selectorList.selectors.map((e=>e.text)).join(", "),e.matchingSelectors=t.map(((e,t)=>t)))}}}_buildMainCascade(e,t,s,i){const r=[],o=[];function n(){if(!t)return;const e=new at(this._cssModel,null,t,lt.Attributes);this._nodeForStyle.set(e,this._node),o.push(e)}if(e&&this._node.nodeType()===Node.ELEMENT_NODE){const t=new at(this._cssModel,null,e,lt.Inline);this._nodeForStyle.set(t,this._node),o.push(t)}let a;for(let e=s.length-1;e>=0;--e){const t=new ut(this._cssModel,s[e].rule);!t.isInjected()&&!t.isUserAgent()||a||(a=!0,n.call(this)),this._nodeForStyle.set(t.style,this._node),o.push(t.style),this._addMatchingSelectors(this._node,t,s[e].matchingSelectors)}a||n.call(this),r.push(new bt(this,o,!1));let l=this._node.parentNode;for(let e=0;l&&i&&e<i.length;++e){const t=[],s=i[e],n=s.inlineStyle?new at(this._cssModel,null,s.inlineStyle,lt.Inline):null;n&&this._containsInherited(n)&&(this._nodeForStyle.set(n,l),t.push(n),this._inheritedStyles.add(n));const a=s.matchedCSSRules||[];for(let e=a.length-1;e>=0;--e){const s=new ut(this._cssModel,a[e].rule);this._addMatchingSelectors(l,s,a[e].matchingSelectors),this._containsInherited(s.style)&&(d(o,s.style)||d(this._inheritedStyles,s.style)||(this._nodeForStyle.set(s.style,l),t.push(s.style),this._inheritedStyles.add(s.style)))}l=l.parentNode,r.push(new bt(this,t,!0))}return new ft(r);function d(e,t){if(!t.styleSheetId||!t.range)return!1;for(const s of e)if(t.styleSheetId===s.styleSheetId&&s.range&&t.range.equal(s.range))return!0;return!1}}_buildPseudoCascades(e){const t=new Map;if(!e)return t;for(let s=0;s<e.length;++s){const i=e[s],r=this._node.pseudoElements().get(i.pseudoType)||null,o=[],n=i.matches||[];for(let e=n.length-1;e>=0;--e){const t=new ut(this._cssModel,n[e].rule);o.push(t.style),this._nodeForStyle.set(t.style,r),r&&this._addMatchingSelectors(r,t,n[e].matchingSelectors)}const a=new bt(this,o,!1);t.set(i.pseudoType,new ft([a]))}return t}_addMatchingSelectors(e,t,s){for(const i of s){const s=t.selectors[i];this._setSelectorMatches(e,s.text,!0)}}node(){return this._node}cssModel(){return this._cssModel}hasMatchingSelectors(e){return this.matchingSelectors(e).length>0&&this.mediaMatches(e.style)}matchingSelectors(e){const t=this.nodeForStyle(e.style);if(!t||"number"!=typeof t.id)return[];const s=this._matchingSelectors.get(t.id);if(!s)return[];const i=[];for(let t=0;t<e.selectors.length;++t)s.get(e.selectors[t].text)&&i.push(t);return i}recomputeMatchingSelectors(e){const t=this.nodeForStyle(e.style);if(!t)return Promise.resolve();const s=[];for(const r of e.selectors)s.push(i.call(this,t,r.text));return Promise.all(s);async function i(e,t){const s=e.ownerDocument;if(!s)return;if("number"==typeof e.id){const s=this._matchingSelectors.get(e.id);if(s&&s.has(t))return}if("number"!=typeof s.id)return;const i=await this._node.domModel().querySelectorAll(s.id,t);i&&("number"==typeof e.id?this._setSelectorMatches(e,t,-1!==i.indexOf(e.id)):this._setSelectorMatches(e,t,!1))}}addNewRule(e,t){return this._addedStyles.set(e.style,t),this.recomputeMatchingSelectors(e)}_setSelectorMatches(e,t,s){if("number"!=typeof e.id)return;let i=this._matchingSelectors.get(e.id);i||(i=new Map,this._matchingSelectors.set(e.id,i)),i.set(t,s)}mediaMatches(e){if(!e.parentRule)return!0;const t=e.parentRule.media;for(let e=0;t&&e<t.length;++e)if(!t[e].active())return!1;return!0}nodeStyles(){return this._mainDOMCascade.styles()}keyframes(){return this._keyframes}pseudoStyles(e){const t=this._pseudoDOMCascades.get(e);return t?t.styles():[]}pseudoTypes(){return new Set(this._pseudoDOMCascades.keys())}_containsInherited(e){const t=e.allProperties();for(let e=0;e<t.length;++e){const s=t[e];if(s.activeInStyle()&&K().isPropertyInherited(s.name))return!0}return!1}nodeForStyle(e){return this._addedStyles.get(e)||this._nodeForStyle.get(e)||null}availableCSSVariables(e){const t=this._styleToDOMCascade.get(e)||null;return t?t.availableCSSVariables(e):[]}computeCSSVariable(e,t){const s=this._styleToDOMCascade.get(e)||null;return s?s.computeCSSVariable(e,t):null}computeValue(e,t){const s=this._styleToDOMCascade.get(e)||null;return s?s.computeValue(e,t):null}computeSingleVariableValue(e,t){const s=this._styleToDOMCascade.get(e)||null,i=t.replace(/\s/g,"");return s?s.computeSingleVariableValue(e,i):null}isInherited(e){return this._inheritedStyles.has(e)}propertyState(e){const t=this._styleToDOMCascade.get(e.ownerStyle);return t?t.propertyState(e):null}resetActiveProperties(){this._mainDOMCascade.reset();for(const e of this._pseudoDOMCascades.values())e.reset()}}class bt{constructor(e,t,s){this._matchedStyles=e,this._styles=t,this._isInherited=s,this._propertiesState=new Map,this._activeProperties=new Map}_computeActiveProperties(){this._propertiesState.clear(),this._activeProperties.clear();for(const e of this._styles){const t=e.parentRule;if((!t||t instanceof ut)&&(!t||this._matchedStyles.hasMatchingSelectors(t)))for(const t of e.allProperties()){if(this._isInherited&&!K().isPropertyInherited(t.name))continue;if(!t.activeInStyle()){this._propertiesState.set(t,vt.Overloaded);continue}const e=K().canonicalPropertyName(t.name),s=this._activeProperties.get(e);!s||!s.important&&t.important?(s&&this._propertiesState.set(s,vt.Overloaded),this._propertiesState.set(t,vt.Active),this._activeProperties.set(e,t)):this._propertiesState.set(t,vt.Overloaded)}}}}class ft{constructor(e){this._nodeCascades=e,this._propertiesState=new Map,this._availableCSSVariables=new Map,this._computedCSSVariables=new Map,this._initialized=!1,this._styleToNodeCascade=new Map;for(const t of e)for(const e of t._styles)this._styleToNodeCascade.set(e,t)}availableCSSVariables(e){const t=this._styleToNodeCascade.get(e);if(!t)return[];this._ensureInitialized();const s=this._availableCSSVariables.get(t);return s?Array.from(s.keys()):[]}computeCSSVariable(e,t){const s=this._styleToNodeCascade.get(e);if(!s)return null;this._ensureInitialized();const i=this._availableCSSVariables.get(s),r=this._computedCSSVariables.get(s);return i&&r?this._innerComputeCSSVariable(i,r,t):null}computeValue(e,t){const s=this._styleToNodeCascade.get(e);if(!s)return null;this._ensureInitialized();const i=this._availableCSSVariables.get(s),r=this._computedCSSVariables.get(s);return i&&r?this._innerComputeValue(i,r,t):null}computeSingleVariableValue(e,t){const s=this._styleToNodeCascade.get(e);if(!s)return null;this._ensureInitialized();const i=this._availableCSSVariables.get(s),r=this._computedCSSVariables.get(s);if(!i||!r)return null;const o=this._innerComputeValue(i,r,t),{variableName:n}=this._getCSSVariableNameAndFallback(t);return{computedValue:o,fromFallback:null!==n&&!i.has(n)}}_getCSSVariableNameAndFallback(e){const t=e.match(/^var\((--[a-zA-Z0-9-_]+)[,]?\s*(.*)\)$/);return{variableName:t&&t[1],fallback:t&&t[2]}}_innerComputeCSSVariable(e,t,s){if(!e.has(s))return null;if(t.has(s))return t.get(s)||null;t.set(s,null);const i=e.get(s);if(null==i)return null;const r=this._innerComputeValue(e,t,i);return t.set(s,r),r}_innerComputeValue(e,t,s){const i=R.Utils.splitStringByRegexes(s,[W]),r=[];for(const s of i){if(-1===s.regexIndex){r.push(s.value);continue}const{variableName:i,fallback:o}=this._getCSSVariableNameAndFallback(s.value);if(!i)return null;const n=this._innerComputeCSSVariable(e,t,i);if(null===n&&!o)return null;null===n?r.push(o):r.push(n)}return r.map((e=>e?e.trim():"")).join(" ")}styles(){return Array.from(this._styleToNodeCascade.keys())}propertyState(e){return this._ensureInitialized(),this._propertiesState.get(e)||null}reset(){this._initialized=!1,this._propertiesState.clear(),this._availableCSSVariables.clear(),this._computedCSSVariables.clear()}_ensureInitialized(){if(this._initialized)return;this._initialized=!0;const e=new Map;for(const t of this._nodeCascades){t._computeActiveProperties();for(const s of t._propertiesState.entries()){const t=s[0];if(s[1]===vt.Overloaded){this._propertiesState.set(t,vt.Overloaded);continue}const i=K().canonicalPropertyName(t.name);e.has(i)?this._propertiesState.set(t,vt.Overloaded):(e.set(i,t),this._propertiesState.set(t,vt.Active))}}for(const t of e.entries()){const s=t[0],i=t[1],r=i.ownerStyle,o=r.longhandProperties(i.name);if(!o.length)continue;let n=!1;for(const t of o){const s=K().canonicalPropertyName(t.name),i=e.get(s);if(i&&i.ownerStyle===r){n=!0;break}}n||(e.delete(s),this._propertiesState.set(i,vt.Overloaded))}const t=new Map;for(let e=this._nodeCascades.length-1;e>=0;--e){const s=this._nodeCascades[e],i=[];for(const e of s._activeProperties.entries()){const s=e[0],r=e[1];s.startsWith("--")&&(t.set(s,r.value),i.push(s))}const r=new Map(t),o=new Map;this._availableCSSVariables.set(s,r),this._computedCSSVariables.set(s,o);for(const e of i)t.delete(e),t.set(e,this._innerComputeCSSVariable(r,o,e))}}}const vt={Active:"Active",Overloaded:"Overloaded"};var yt=Object.freeze({__proto__:null,CSSMatchedStyles:_t,PropertyState:vt});class kt{constructor(e,t){this._cssModel=e,this.id=t.styleSheetId,this.frameId=t.frameId,this.sourceURL=t.sourceURL,this.hasSourceURL=Boolean(t.hasSourceURL),this.origin=t.origin,this.title=t.title,this.disabled=t.disabled,this.isInline=t.isInline,this.isMutable=t.isMutable,this.isConstructed=t.isConstructed,this.startLine=t.startLine,this.startColumn=t.startColumn,this.endLine=t.endLine,this.endColumn=t.endColumn,this.contentLength=t.length,t.ownerNode&&(this.ownerNode=new gs(e.target(),t.ownerNode)),this.sourceMapURL=t.sourceMapURL,this._originalContentProvider=null}originalContentProvider(){if(!this._originalContentProvider){const e=async()=>{const e=await this._cssModel.originalStyleSheetText(this);return null===e?{content:null,error:k`Could not find the original style sheet.`,isEncoded:!1}:{content:e,isEncoded:!1}};this._originalContentProvider=new P.StaticContentProvider(this.contentURL(),this.contentType(),e)}return this._originalContentProvider}setSourceMapURL(e){this.sourceMapURL=e}cssModel(){return this._cssModel}isAnonymousInlineStyleSheet(){return!this.resourceURL()&&!this._cssModel.sourceMapManager().sourceMapForClient(this)}resourceURL(){return this.isViaInspector()?this._viaInspectorResourceURL():this.sourceURL}_viaInspectorResourceURL(){const e=this._cssModel.target().model(Ts);if(console.assert(Boolean(e)),!e)return"";const s=e.frameForId(this.frameId);if(!s)return"";console.assert(Boolean(s));const i=new t.ParsedURL(s.url);let r="inspector://"+i.host+i.folderPathComponents;return r.endsWith("/")||(r+="/"),r+="inspector-stylesheet",r}lineNumberInSource(e){return this.startLine+e}columnNumberInSource(e,t){return(e?0:this.startColumn)+t}containsLocation(e,t){const s=e===this.startLine&&t>=this.startColumn||e>this.startLine,i=e<this.endLine||e===this.endLine&&t<=this.endColumn;return s&&i}contentURL(){return this.resourceURL()}contentType(){return r.resourceTypes.Stylesheet}contentEncoded(){return Promise.resolve(!1)}async requestContent(){try{return{content:await this._cssModel.getStyleSheetText(this.id),isEncoded:!1}}catch(e){return{content:null,error:k`There was an error retrieving the source styles.`,isEncoded:!1}}}async searchInContent(e,t,s){const i=await this.requestContent();return null===i.content?[]:R.performSearchInContent(i.content,e,t,s)}isViaInspector(){return"inspector"===this.origin}createPageResourceLoadInitiator(){return{target:null,frameId:this.frameId,initiatorUrl:this.hasSourceURL?"":this.sourceURL}}}var St=Object.freeze({__proto__:null,CSSStyleSheetHeader:kt});let wt=null;class Ct extends e.ObjectWrapper{constructor(){super(),this._eventListeners=new WeakMap,F.instance().observeModels(Ts,this),this._frames=new Map,this._framesForTarget=new Map,this._topFrame=null}static instance({forceNew:e}={forceNew:!1}){return wt&&!e||(wt=new Ct),wt}modelAdded(e){const t=e.addEventListener(xs.FrameAdded,this._frameAdded,this),s=e.addEventListener(xs.FrameDetached,this._frameDetached,this),i=e.addEventListener(xs.FrameNavigated,this._frameNavigated,this),r=e.addEventListener(xs.ResourceAdded,this._resourceAdded,this);this._eventListeners.set(e,[t,s,i,r]),this._framesForTarget.set(e.target().id(),new Set)}modelRemoved(e){const t=this._eventListeners.get(e);t&&l.EventTarget.removeEventListeners(t);const s=this._framesForTarget.get(e.target().id());if(s)for(const e of s)this._decreaseOrRemoveFrame(e);this._framesForTarget.delete(e.target().id())}_frameAdded(e){const t=e.data,s=this._frames.get(t.id);s?this._frames.set(t.id,{frame:t,count:s.count+1}):this._frames.set(t.id,{frame:t,count:1}),this._resetTopFrame();const i=this._framesForTarget.get(t.resourceTreeModel().target().id());i&&i.add(t.id),this.dispatchEventToListeners(It.FrameAddedToTarget,{frame:t})}_frameDetached(e){const t=e.data;this._decreaseOrRemoveFrame(t.id);const s=this._framesForTarget.get(t.resourceTreeModel().target().id());s&&s.delete(t.id)}_frameNavigated(e){const t=e.data;this.dispatchEventToListeners(It.FrameNavigated,{frame:t}),t.isTopFrame()&&this.dispatchEventToListeners(It.TopFrameNavigated,{frame:t})}_resourceAdded(e){const t=e.data;this.dispatchEventToListeners(It.ResourceAdded,{resource:t})}_decreaseOrRemoveFrame(e){const t=this._frames.get(e);t&&(1===t.count?(this._frames.delete(e),this._resetTopFrame(),this.dispatchEventToListeners(It.FrameRemoved,{frameId:e})):t.count--)}_resetTopFrame(){const e=this.getAllFrames().filter((e=>e.isTopFrame()));this._topFrame=e.length>0?e[0]:null}getFrame(e){const t=this._frames.get(e);return t?t.frame:null}getAllFrames(){return Array.from(this._frames.values(),(e=>e.frame))}getTopFrame(){return this._topFrame}}const It={FrameAddedToTarget:Symbol("FrameAddedToTarget"),FrameNavigated:Symbol("FrameNavigated"),FrameRemoved:Symbol("FrameRemoved"),ResourceAdded:Symbol("ResourceAdded"),TopFrameNavigated:Symbol("TopFrameNavigated")};var Rt=Object.freeze({__proto__:null,FrameManager:Ct,Events:It});class Tt extends N{constructor(e){super(e)}async read(e,t,s){const i=await this.target().ioAgent().invoke_read({handle:e,offset:s,size:t});if(i.getError())throw new Error(i.getError());return i.eof?null:i.base64Encoded?d.decode(i.data):i.data}async close(e){(await this.target().ioAgent().invoke_close({handle:e})).getError()&&console.error("Could not close stream.")}async resolveBlob(e){const t=e instanceof He?e.objectId:e;if(!t)throw new Error("Remote object has undefined objectId");const s=await this.target().ioAgent().invoke_resolveBlob({objectId:t});if(s.getError())throw new Error(s.getError());return"blob:"+s.uuid}async readToString(e){const t=[],s=new TextDecoder;for(;;){const i=await this.read(e,1048576);if(null===i){t.push(s.decode());break}i instanceof ArrayBuffer?t.push(s.decode(i,{stream:!0})):t.push(i)}return t.join("")}}N.register(Tt,O.IO,!0);var xt=Object.freeze({__proto__:null,IOModel:Tt});let Mt=null;class Pt extends e.ObjectWrapper{constructor(e,t,s){super(),this._currentlyLoading=0,this._maxConcurrentLoads=t,this._pageResources=new Map,this._queuedLoads=[],F.instance().addModelListener(Ts,xs.MainFrameNavigated,this._onMainFrameNavigated,this),this._loadOverride=e,this._loadTimeout=s}static instance({forceNew:e,loadOverride:t,maxConcurrentLoads:s,loadTimeout:i}={forceNew:!1,loadOverride:null,maxConcurrentLoads:500,loadTimeout:3e4}){return Mt&&!e||(Mt=new Pt(t,s,i)),Mt}_onMainFrameNavigated(e){if(e.data.isTopFrame()){for(const{reject:e}of this._queuedLoads)e(new Error(n`Load canceled due to reload of inspected page`));this._queuedLoads=[],this._pageResources.clear(),this.dispatchEventToListeners(Et.Update)}}getResourcesLoaded(){return this._pageResources}getNumberOfResources(){return{loading:this._currentlyLoading,queued:this._queuedLoads.length,resources:this._pageResources.size}}async _acquireLoadSlot(){if(this._currentlyLoading++,this._currentlyLoading>this._maxConcurrentLoads){const e={resolve:()=>{},reject:()=>{}},t=new Promise(((t,s)=>{e.resolve=t,e.reject=s}));this._queuedLoads.push(e),await t}}_releaseLoadSlot(){this._currentlyLoading--;const e=this._queuedLoads.shift();e&&e.resolve(void 0)}static async _withTimeout(e,t){const s=new Promise(((e,s)=>setTimeout(s,t,new Error(n`Load canceled due to load timeout`))));return Promise.race([e,s])}static makeKey(e,t){if(t.frameId)return`${e}-${t.frameId}`;if(t.target)return`${e}-${t.target.id()}`;throw new Error("Invalid initiator")}async loadResource(e,t){const s=Pt.makeKey(e,t),i={success:null,size:null,errorMessage:void 0,url:e,initiator:t};this._pageResources.set(s,i),this.dispatchEventToListeners(Et.Update);try{await this._acquireLoadSlot();const s=this._dispatchLoad(e,t),r=await Pt._withTimeout(s,this._loadTimeout);if(i.errorMessage=r.errorDescription.message,i.success=r.success,r.success)return i.size=r.content.length,{content:r.content};throw new Error(r.errorDescription.message)}catch(e){throw void 0===i.errorMessage&&(i.errorMessage=e.message),null===i.success&&(i.success=!1),e}finally{this._releaseLoadSlot(),this.dispatchEventToListeners(Et.Update)}}async _dispatchLoad(e,s){let i=null;if(this._loadOverride)return this._loadOverride(e);const r=t.ParsedURL.fromString(e),o=Lt().get()&&r&&r.isHttpOrHttps();if(o){try{if(s.target){m.developerResourceLoaded(p.DeveloperResourceLoaded.LoadThroughPageViaTarget);return await this._loadFromTarget(s.target,s.frameId,e)}const t=Ct.instance().getFrame(s.frameId||"");if(t){m.developerResourceLoaded(p.DeveloperResourceLoaded.LoadThroughPageViaFrame);return await this._loadFromTarget(t.resourceTreeModel().target(),s.frameId,e)}}catch(e){e instanceof Error&&(m.developerResourceLoaded(p.DeveloperResourceLoaded.LoadThroughPageFailure),i=e.message)}m.developerResourceLoaded(p.DeveloperResourceLoaded.LoadThroughPageFallback),console.warn("Fallback triggered",e,s)}else{const e=Lt().get()?p.DeveloperResourceLoaded.FallbackPerOverride:p.DeveloperResourceLoaded.FallbackPerProtocol;m.developerResourceLoaded(e)}const n=await xe.instance().loadResource(e);return o&&!n.success&&m.developerResourceLoaded(p.DeveloperResourceLoaded.FallbackFailure),i&&(n.errorDescription.message=`Fetch through target failed: ${i}; Fallback: ${n.errorDescription.message}`),n}async _loadFromTarget(e,t,s){const i=e.model(ve),r=e.model(Tt),o=await i.loadNetworkResource(t||"",s,{disableCache:!0,includeCredentials:!0});try{const e=o.stream?await r.readToString(o.stream):"";return{success:o.success,content:e,errorDescription:{statusCode:o.httpStatusCode||0,netError:o.netError,netErrorName:o.netErrorName,message:g.netErrorToMessage(o.netError,o.httpStatusCode,o.netErrorName)||"",urlValid:void 0}}}finally{o.stream&&r.close(o.stream)}}}function Lt(){return i.Settings.instance().createSetting("loadThroughTarget",!0)}const Et={Update:Symbol("Update")};var Nt=Object.freeze({__proto__:null,PageResourceLoadInitiator:undefined,PageResource:undefined,PageResourceLoader:Pt,getLoadThroughTargetSetting:Lt,Events:Et});class At{constructor(e,t,s){this._sourceURL=e,this._contentType=t,this._initiator=s}contentURL(){return this._sourceURL}contentType(){return this._contentType}contentEncoded(){return Promise.resolve(!1)}async requestContent(){try{const{content:e}=await Pt.instance().loadResource(this._sourceURL,this._initiator);return{content:e,isEncoded:!1}}catch(e){const t=k`Could not load content for ${this._sourceURL} (${e.message})`;return console.error(t),{content:null,error:t,isEncoded:!1}}}async searchInContent(e,t,s){const{content:i}=await this.requestContent();return"string"!=typeof i?[]:R.performSearchInContent(i,e,t,s)}}var Ot=Object.freeze({__proto__:null,CompilerSourceMappingContentProvider:At});class Dt{constructor(e,t,s,i,r,o){this.lineNumber=e,this.columnNumber=t,this.sourceURL=s,this.sourceLineNumber=i,this.sourceColumnNumber=r,this.name=o}static compare(e,t){return e.lineNumber!==t.lineNumber?e.lineNumber-t.lineNumber:e.columnNumber-t.columnNumber}}const Bt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ft=new Map;for(let e=0;e<Bt.length;++e)Ft.set(Bt.charAt(e),e);const qt=new WeakMap;class Ut{constructor(e,t,s,i){if(this._initiator=i,this._json=s,this._compiledURL=e,this._sourceMappingURL=t,this._baseURL=t.startsWith("data:")?e:t,this._mappings=null,this._sourceInfos=new Map,this._json.sections){Boolean(this._json.sections.find((e=>Boolean(e.url))))&&a.Console.instance().warn(`SourceMap "${t}" contains unsupported "URL" field in one of its sections.`)}this._eachSection(this._parseSources.bind(this))}static async load(e,t,s){let i;try{const{content:t}=await Pt.instance().loadResource(e,s);i=t,")]}"===t.slice(0,3)&&(i=t.substring(t.indexOf("\n")))}catch(t){throw new Error(k`Could not load content for ${e}: ${t.message}`)}try{const r=JSON.parse(i);return new Ut(t,e,r,s)}catch(t){throw new Error(k`Could not parse content for ${e}: ${t.message}`)}}compiledURL(){return this._compiledURL}url(){return this._sourceMappingURL}sourceURLs(){return[...this._sourceInfos.keys()]}sourceContentProvider(e,t){const s=this._sourceInfos.get(e);return s&&s.content?P.StaticContentProvider.fromString(e,t,s.content):new At(e,t,this._initiator)}embeddedContentByURL(e){const t=this._sourceInfos.get(e);return t?t.content:null}findEntry(e,t){const s=this.mappings(),i=s.upperBound(void 0,((s,i)=>e-i.lineNumber||t-i.columnNumber));return i?s[i-1]:null}sourceLineMapping(e,t,s){const i=this._reversedMappings(e),r=i.lowerBound(t,l),o=i.upperBound(t,l);if(r>=i.length||i[r].sourceLineNumber!==t)return null;const n=i.slice(r,o);if(!n.length)return null;const a=n.lowerBound(s,((e,t)=>e-t.sourceColumnNumber));return a>=n.length?n[n.length-1]:n[a];function l(e,t){return e-t.sourceLineNumber}}findReverseEntries(e,t,s){const i=this._reversedMappings(e),r=i.upperBound(void 0,((e,i)=>t-i.sourceLineNumber||s-i.sourceColumnNumber));let o=r;for(;o>0&&i[o-1].sourceLineNumber===i[r-1].sourceLineNumber&&i[o-1].sourceColumnNumber===i[r-1].sourceColumnNumber;)--o;return i.slice(o,r)}mappings(){return null===this._mappings&&(this._mappings=[],this._eachSection(this._parseMap.bind(this)),this._json=null),this._mappings}_reversedMappings(e){const t=this._sourceInfos.get(e);if(!t)return[];const s=this.mappings();return null===t.reverseMappings&&(t.reverseMappings=s.filter((t=>t.sourceURL===e)).sort((function(e,t){if(e.sourceLineNumber!==t.sourceLineNumber)return e.sourceLineNumber-t.sourceLineNumber;if(e.sourceColumnNumber!==t.sourceColumnNumber)return e.sourceColumnNumber-t.sourceColumnNumber;if(e.lineNumber!==t.lineNumber)return e.lineNumber-t.lineNumber;return e.columnNumber-t.columnNumber}))),t.reverseMappings}_eachSection(e){if(this._json)if(this._json.sections)for(const t of this._json.sections)e(t.map,t.offset.line,t.offset.column);else e(this._json,0,0)}_parseSources(e){const s=[];let i=e.sourceRoot||"";i&&!i.endsWith("/")&&(i+="/");for(let r=0;r<e.sources.length;++r){const n=i+e.sources[r];let a=t.ParsedURL.completeURL(this._baseURL,n)||n;const l=e.sourcesContent&&e.sourcesContent[r];a===this._compiledURL&&l&&(a+=o.UIString("? [sm]")),this._sourceInfos.set(a,new Ut.SourceInfo(l||null,null)),s.push(a)}qt.set(e,s)}_parseMap(e,t,s){let i=0,r=0,o=0,n=0;const a=qt.get(e),l=e.names||[],d=new Ut.StringCharIterator(e.mappings);let c=a&&a[i];for(;;){if(","===d.peek())d.next();else{for(;";"===d.peek();)t+=1,s=0,d.next();if(!d.hasNext())break}if(s+=this._decodeVLQ(d),!d.hasNext()||this._isSeparator(d.peek())){this.mappings().push(new Dt(t,s));continue}const e=this._decodeVLQ(d);e&&(i+=e,a&&(c=a[i])),r+=this._decodeVLQ(d),o+=this._decodeVLQ(d),d.hasNext()&&!this._isSeparator(d.peek())?(n+=this._decodeVLQ(d),this.mappings().push(new Dt(t,s,c,r,o,l[n]))):this.mappings().push(new Dt(t,s,c,r,o))}this.mappings().sort(Dt.compare)}_isSeparator(e){return","===e||";"===e}_decodeVLQ(e){let t=0,s=0,i=Ut._VLQ_CONTINUATION_MASK;for(;i&Ut._VLQ_CONTINUATION_MASK;)i=Ft.get(e.next())||0,t+=(i&Ut._VLQ_BASE_MASK)<<s,s+=Ut._VLQ_BASE_SHIFT;const r=1&t;return t>>=1,r?-t:t}reverseMapTextRange(e,t){function s(e,t){return e.lineNumber!==t.sourceLineNumber?e.lineNumber-t.sourceLineNumber:e.columnNumber-t.sourceColumnNumber}const i=this._reversedMappings(e);if(!i.length)return null;const r=i.lowerBound({lineNumber:t.startLine,columnNumber:t.startColumn},s),o=i.upperBound({lineNumber:t.endLine,columnNumber:t.endColumn},s),n=i[r],a=i[o];return new x.TextRange(n.lineNumber,n.columnNumber,a.lineNumber,a.columnNumber)}}Ut._VLQ_BASE_SHIFT=5,Ut._VLQ_BASE_MASK=31,Ut._VLQ_CONTINUATION_MASK=32,Ut.StringCharIterator=class{constructor(e){this._string=e,this._position=0}next(){return this._string.charAt(this._position++)}peek(){return this._string.charAt(this._position)}hasNext(){return this._position<this._string.length}},Ut.SourceInfo=class{constructor(e,t){this.content=e,this.reverseMappings=t}};var Ht=Object.freeze({__proto__:null,SourceMap:class{compiledURL(){throw new Error("Not implemented")}url(){throw new Error("Not implemented")}sourceURLs(){throw new Error("Not implemented")}sourceContentProvider(e,t){throw new Error("Not implemented")}embeddedContentByURL(e){throw new Error("Not implemented")}findEntry(e,t){throw new Error("Not implemented")}sourceLineMapping(e,t,s){throw new Error("Not implemented")}mappings(){throw new Error("Not implemented")}},SourceMapEntry:Dt,EditResult:class{constructor(e,t,s){this.map=e,this.compiledEdits=t,this.newSources=s}},TextSourceMap:Ut});class jt extends e.ObjectWrapper{constructor(e){super(),this._target=e,this._isEnabled=!0,this._relativeSourceURL=new Map,this._relativeSourceMapURL=new Map,this._resolvedSourceMapId=new Map,this._sourceMapById=new Map,this._sourceMapIdToLoadingClients=new f,this._sourceMapIdToClients=new f,F.instance().addEventListener(q.InspectedURLChanged,this._inspectedURLChanged,this)}setEnabled(e){if(e===this._isEnabled)return;this._isEnabled=e;const t=[...this._resolvedSourceMapId.keys()];for(const e of t){const t=this._relativeSourceURL.get(e),s=this._relativeSourceMapURL.get(e);this.detachSourceMap(e),this.attachSourceMap(e,t,s)}}_inspectedURLChanged(e){if(e.data!==this._target)return;const t=new Map(this._resolvedSourceMapId);for(const[e,s]of t){const t=this._relativeSourceURL.get(e),i=this._relativeSourceMapURL.get(e);if(void 0===t||void 0===i)continue;const r=this._resolveRelativeURLs(t,i);null!==r&&s!==r.sourceMapId&&(this.detachSourceMap(e),this.attachSourceMap(e,t,i))}}sourceMapForClient(e){const t=this._resolvedSourceMapId.get(e);return t&&this._sourceMapById.get(t)||null}clientsForSourceMap(e){const t=this._getSourceMapId(e.compiledURL(),e.url());return this._sourceMapIdToClients.has(t)?[...this._sourceMapIdToClients.get(t)]:[...this._sourceMapIdToLoadingClients.get(t)]}_getSourceMapId(e,t){return`${e}:${t}`}_resolveRelativeURLs(e,s){const i=t.ParsedURL.completeURL(this._target.inspectedURL(),e);if(!i)return null;const r=t.ParsedURL.completeURL(i,s);return r?{sourceURL:i,sourceMapURL:r,sourceMapId:this._getSourceMapId(i,r)}:null}attachSourceMap(e,t,s){if(void 0===t||!s)return;console.assert(!this._resolvedSourceMapId.has(e),"SourceMap is already attached to client");const i=this._resolveRelativeURLs(t,s);if(!i)return;this._relativeSourceURL.set(e,t),this._relativeSourceMapURL.set(e,s);const{sourceURL:r,sourceMapURL:o,sourceMapId:n}=i;function l(e,t){this._sourceMapIdToClients.set(e,t);const s=this._sourceMapById.get(e);this.dispatchEventToListeners(zt.SourceMapAttached,{client:t,sourceMap:s})}this._resolvedSourceMapId.set(e,n),this._isEnabled&&(this.dispatchEventToListeners(zt.SourceMapWillAttach,e),this._sourceMapById.has(n)?l.call(this,n,e):(this._sourceMapIdToLoadingClients.has(n)||Ut.load(o,r,e.createPageResourceLoadInitiator()).catch((e=>(a.Console.instance().warn(k`DevTools failed to load SourceMap: ${e.message}`),null))).then(function(e,t){this._sourceMapLoadedForTest();const s=this._sourceMapIdToLoadingClients.get(e);if(this._sourceMapIdToLoadingClients.deleteAll(e),!s.size)return;if(!t){for(const e of s)this.dispatchEventToListeners(zt.SourceMapFailedToAttach,e);return}this._sourceMapById.set(e,t);for(const t of s)l.call(this,e,t)}.bind(this,n)),this._sourceMapIdToLoadingClients.set(n,e)))}detachSourceMap(e){const t=this._resolvedSourceMapId.get(e);if(this._relativeSourceURL.delete(e),this._relativeSourceMapURL.delete(e),this._resolvedSourceMapId.delete(e),!t)return;if(!this._sourceMapIdToClients.hasValue(t,e))return void(this._sourceMapIdToLoadingClients.delete(t,e)&&this.dispatchEventToListeners(zt.SourceMapFailedToAttach,e));this._sourceMapIdToClients.delete(t,e);const s=this._sourceMapById.get(t);s&&(this._sourceMapIdToClients.has(t)||this._sourceMapById.delete(t),this.dispatchEventToListeners(zt.SourceMapDetached,{client:e,sourceMap:s}))}_sourceMapLoadedForTest(){}dispose(){F.instance().removeEventListener(q.InspectedURLChanged,this._inspectedURLChanged,this)}}const zt={SourceMapWillAttach:Symbol("SourceMapWillAttach"),SourceMapFailedToAttach:Symbol("SourceMapFailedToAttach"),SourceMapAttached:Symbol("SourceMapAttached"),SourceMapDetached:Symbol("SourceMapDetached"),SourceMapChanged:Symbol("SourceMapChanged")};var Vt=Object.freeze({__proto__:null,SourceMapManager:jt,Events:zt});class Wt extends N{constructor(e){super(e),this._isEnabled=!1,this._cachedMatchedCascadeNode=null,this._cachedMatchedCascadePromise=null,this._domModel=e.model(_s),this._sourceMapManager=new jt(e),this._agent=e.cssAgent(),this._styleLoader=new Qt(this),this._resourceTreeModel=e.model(Ts),this._resourceTreeModel&&this._resourceTreeModel.addEventListener(xs.MainFrameNavigated,this._resetStyleSheets,this),e.registerCSSDispatcher(new Jt(this)),e.suspended()||this._enable(),this._styleSheetIdToHeader=new Map,this._styleSheetIdsForURL=new Map,this._originalStyleSheetText=new Map,this._isRuleUsageTrackingEnabled=!1,this._fontFaces=new Map,this._cssPropertyTracker=null,this._isCSSPropertyTrackingEnabled=!1,this._isTrackingRequestPending=!1,this._trackedCSSProperties=new Map,this._stylePollingThrottler=new c.Throttler(es),this._sourceMapManager.setEnabled(i.Settings.instance().moduleSetting("cssSourceMapsEnabled").get()),i.Settings.instance().moduleSetting("cssSourceMapsEnabled").addChangeListener((e=>this._sourceMapManager.setEnabled(e.data)))}headersForSourceURL(e){const t=[];for(const s of this.styleSheetIdsForURL(e)){const e=this.styleSheetHeaderForId(s);e&&t.push(e)}return t}createRawLocationsByURL(e,t,s=0){const i=this.headersForSourceURL(e);i.sort((function(e,t){return e.startLine-t.startLine||e.startColumn-t.startColumn||e.id.localeCompare(t.id)}));const r=i.upperBound(void 0,((e,i)=>t-i.startLine||s-i.startColumn));if(!r)return[];const o=[],n=i[r-1];for(let e=r-1;e>=0&&i[e].startLine===n.startLine&&i[e].startColumn===n.startColumn;--e)i[e].containsLocation(t,s)&&o.push(new Xt(i[e],t,s));return o}sourceMapManager(){return this._sourceMapManager}static trimSourceURL(e){let t=e.lastIndexOf("/*# sourceURL=");if(-1===t&&(t=e.lastIndexOf("/*@ sourceURL="),-1===t))return e;const s=e.lastIndexOf("\n",t);if(-1===s)return e;const i=e.substr(s+1).split("\n",1)[0];return-1===i.search(/[\040\t]*\/\*[#@] sourceURL=[\040\t]*([^\s]*)[\040\t]*\*\/[\040\t]*$/)?e:e.substr(0,s)+e.substr(s+i.length+1)}domModel(){return this._domModel}async setStyleText(e,t,s,i){try{await this._ensureOriginalStyleSheetText(e);const{styles:r}=await this._agent.invoke_setStyleTexts({edits:[{styleSheetId:e,range:t.serializeToObject(),text:s}]});if(!r||1!==r.length)return!1;this._domModel.markUndoableState(!i);const o=new Kt(e,t,s,r[0]);return this._fireStyleSheetChanged(e,o),!0}catch(e){return!1}}async setSelectorText(e,t,s){m.actionTaken(p.Action.StyleRuleEdited);try{await this._ensureOriginalStyleSheetText(e);const{selectorList:i}=await this._agent.invoke_setRuleSelector({styleSheetId:e,range:t,selector:s});if(!i)return!1;this._domModel.markUndoableState();const r=new Kt(e,t,s,i);return this._fireStyleSheetChanged(e,r),!0}catch(e){return!1}}async setKeyframeKey(e,t,s){m.actionTaken(p.Action.StyleRuleEdited);try{await this._ensureOriginalStyleSheetText(e);const{keyText:i}=await this._agent.invoke_setKeyframeKey({styleSheetId:e,range:t,keyText:s});if(!i)return!1;this._domModel.markUndoableState();const r=new Kt(e,t,s,i);return this._fireStyleSheetChanged(e,r),!0}catch(e){return!1}}startCoverage(){return this._isRuleUsageTrackingEnabled=!0,this._agent.invoke_startRuleUsageTracking()}async takeCoverageDelta(){const e=await this._agent.invoke_takeCoverageDelta();return{timestamp:e&&e.timestamp||0,coverage:e&&e.coverage||[]}}setLocalFontsEnabled(e){return this._agent.invoke_setLocalFontsEnabled({enabled:e})}async stopCoverage(){this._isRuleUsageTrackingEnabled=!1,await this._agent.invoke_stopRuleUsageTracking()}async mediaQueriesPromise(){const{medias:e}=await this._agent.invoke_getMediaQueries();return e?it.parseMediaArrayPayload(this,e):[]}isEnabled(){return this._isEnabled}async _enable(){await this._agent.invoke_enable(),this._isEnabled=!0,this._isRuleUsageTrackingEnabled&&await this.startCoverage(),this.dispatchEventToListeners(Gt.ModelWasEnabled)}async matchedStylesPromise(e){const t=await this._agent.invoke_getMatchedStylesForNode({nodeId:e});if(t.getError())return null;const s=this._domModel.nodeForId(e);return s?new _t(this,s,t.inlineStyle||null,t.attributesStyle||null,t.matchedCSSRules||[],t.pseudoElements||[],t.inherited||[],t.cssKeyframesRules||[]):null}async classNamesPromise(e){const{classNames:t}=await this._agent.invoke_collectClassNames({styleSheetId:e});return t||[]}computedStylePromise(e){return this._styleLoader.computedStylePromise(e)}async backgroundColorsPromise(e){const t=await this._agent.invoke_getBackgroundColors({nodeId:e});return t.getError()?null:{backgroundColors:t.backgroundColors||null,computedFontSize:t.computedFontSize||"",computedFontWeight:t.computedFontWeight||""}}async platformFontsPromise(e){const{fonts:t}=await this._agent.invoke_getPlatformFontsForNode({nodeId:e});return t}allStyleSheets(){const e=[...this._styleSheetIdToHeader.values()];return e.sort((function(e,t){return e.sourceURL<t.sourceURL?-1:e.sourceURL>t.sourceURL?1:e.startLine-t.startLine||e.startColumn-t.startColumn})),e}async inlineStylesPromise(e){const t=await this._agent.invoke_getInlineStylesForNode({nodeId:e});if(t.getError()||!t.inlineStyle)return null;const s=new at(this,null,t.inlineStyle,lt.Inline),i=t.attributesStyle?new at(this,null,t.attributesStyle,lt.Attributes):null;return new Yt(s,i)}forcePseudoState(e,t,s){const i=e.marker($t)||[],r=i.includes(t);if(s){if(r)return!1;i.push(t),e.setMarker($t,i)}else{if(!r)return!1;S.removeElement(i,t),i.length?e.setMarker($t,i):e.setMarker($t,null)}return void 0!==e.id&&(this._agent.invoke_forcePseudoState({nodeId:e.id,forcedPseudoClasses:i}),this.dispatchEventToListeners(Gt.PseudoStateForced,{node:e,pseudoClass:t,enable:s}),!0)}pseudoState(e){return e.marker($t)||[]}async setMediaText(e,t,s){m.actionTaken(p.Action.StyleRuleEdited);try{await this._ensureOriginalStyleSheetText(e);const{media:i}=await this._agent.invoke_setMediaText({styleSheetId:e,range:t,text:s});if(!i)return!1;this._domModel.markUndoableState();const r=new Kt(e,t,s,i);return this._fireStyleSheetChanged(e,r),!0}catch(e){return!1}}async addRule(e,t,s){try{await this._ensureOriginalStyleSheetText(e);const{rule:i}=await this._agent.invoke_addRule({styleSheetId:e,ruleText:t,location:s});if(!i)return null;this._domModel.markUndoableState();const r=new Kt(e,s,t,i);return this._fireStyleSheetChanged(e,r),new ut(this,i)}catch(e){return null}}async requestViaInspectorStylesheet(e){const t=e.frameId()||(this._resourceTreeModel&&this._resourceTreeModel.mainFrame?this._resourceTreeModel.mainFrame.id:""),s=[...this._styleSheetIdToHeader.values()].find((e=>e.frameId===t&&e.isViaInspector()));if(s)return s;try{const{styleSheetId:e}=await this._agent.invoke_createStyleSheet({frameId:t});return e&&this._styleSheetIdToHeader.get(e)||null}catch(e){return null}}mediaQueryResultChanged(){this.dispatchEventToListeners(Gt.MediaQueryResultChanged)}fontsUpdated(e){e&&this._fontFaces.set(e.src,new Ze(e)),this.dispatchEventToListeners(Gt.FontsUpdated)}fontFaces(){return[...this._fontFaces.values()]}styleSheetHeaderForId(e){return this._styleSheetIdToHeader.get(e)||null}styleSheetHeaders(){return[...this._styleSheetIdToHeader.values()]}_fireStyleSheetChanged(e,t){this.dispatchEventToListeners(Gt.StyleSheetChanged,{styleSheetId:e,edit:t})}_ensureOriginalStyleSheetText(e){const t=this.styleSheetHeaderForId(e);if(!t)return Promise.resolve(null);let s=this._originalStyleSheetText.get(t);return s||(s=this.getStyleSheetText(t.id),this._originalStyleSheetText.set(t,s),this._originalContentRequestedForTest(t)),s}_originalContentRequestedForTest(e){}originalStyleSheetText(e){return this._ensureOriginalStyleSheetText(e.id)}getAllStyleSheetHeaders(){return this._styleSheetIdToHeader.values()}_styleSheetAdded(e){console.assert(!this._styleSheetIdToHeader.get(e.styleSheetId));const t=new kt(this,e);this._styleSheetIdToHeader.set(e.styleSheetId,t);const s=t.resourceURL();let i=this._styleSheetIdsForURL.get(s);if(i||(i=new Map,this._styleSheetIdsForURL.set(s,i)),i){let e=i.get(t.frameId);e||(e=new Set,i.set(t.frameId,e)),e.add(t.id)}this._sourceMapManager.attachSourceMap(t,t.sourceURL,t.sourceMapURL),this.dispatchEventToListeners(Gt.StyleSheetAdded,t)}_styleSheetRemoved(e){const t=this._styleSheetIdToHeader.get(e);if(console.assert(Boolean(t)),!t)return;this._styleSheetIdToHeader.delete(e);const s=t.resourceURL(),i=this._styleSheetIdsForURL.get(s);if(console.assert(Boolean(i),"No frameId to styleSheetId map is available for given style sheet URL."),i){const r=i.get(t.frameId);r&&(r.delete(e),r.size||(i.delete(t.frameId),i.size||this._styleSheetIdsForURL.delete(s)))}this._originalStyleSheetText.delete(t),this._sourceMapManager.detachSourceMap(t),this.dispatchEventToListeners(Gt.StyleSheetRemoved,t)}styleSheetIdsForURL(e){const t=this._styleSheetIdsForURL.get(e);if(!t)return[];const s=[];for(const e of t.values())s.push(...e);return s}async setStyleSheetText(e,t,s){const i=this._styleSheetIdToHeader.get(e);console.assert(Boolean(i)),t=Wt.trimSourceURL(t),i.hasSourceURL&&(t+="\n/*# sourceURL="+i.sourceURL+" */"),await this._ensureOriginalStyleSheetText(e);const r=(await this._agent.invoke_setStyleSheetText({styleSheetId:i.id,text:t})).sourceMapURL;return this._sourceMapManager.detachSourceMap(i),i.setSourceMapURL(r),this._sourceMapManager.attachSourceMap(i,i.sourceURL,i.sourceMapURL),null===r?"Error in CSS.setStyleSheetText":(this._domModel.markUndoableState(!s),this._fireStyleSheetChanged(e),null)}async getStyleSheetText(e){try{const{text:t}=await this._agent.invoke_getStyleSheetText({styleSheetId:e});return t&&Wt.trimSourceURL(t)}catch(e){return null}}_resetStyleSheets(){const e=[...this._styleSheetIdToHeader.values()];this._styleSheetIdsForURL.clear(),this._styleSheetIdToHeader.clear();for(const t of e)this._sourceMapManager.detachSourceMap(t),this.dispatchEventToListeners(Gt.StyleSheetRemoved,t)}_resetFontFaces(){this._fontFaces.clear()}async suspendModel(){this._isEnabled=!1,await this._agent.invoke_disable(),this._resetStyleSheets(),this._resetFontFaces()}async resumeModel(){return this._enable()}setEffectivePropertyValueForNode(e,t,s){this._agent.invoke_setEffectivePropertyValueForNode({nodeId:e,propertyName:t,value:s})}cachedMatchedCascadeForNode(e){if(this._cachedMatchedCascadeNode!==e&&this.discardCachedMatchedCascade(),this._cachedMatchedCascadeNode=e,!this._cachedMatchedCascadePromise){if(!e.id)return Promise.resolve(null);this._cachedMatchedCascadePromise=this.matchedStylesPromise(e.id)}return this._cachedMatchedCascadePromise}discardCachedMatchedCascade(){this._cachedMatchedCascadeNode=null,this._cachedMatchedCascadePromise=null}createCSSPropertyTracker(e){return new Zt(this,e)}enableCSSPropertyTracker(e){const t=e.getTrackedProperties();0!==t.length&&(this._agent.invoke_trackComputedStyleUpdates({propertiesToTrack:t}),this._isCSSPropertyTrackingEnabled=!0,this._cssPropertyTracker=e,this._pollComputedStyleUpdates())}disableCSSPropertyTracker(){this._isCSSPropertyTrackingEnabled=!1,this._cssPropertyTracker=null,this._agent.invoke_trackComputedStyleUpdates({propertiesToTrack:[]})}async _pollComputedStyleUpdates(){if(!this._isTrackingRequestPending){if(this._isCSSPropertyTrackingEnabled){this._isTrackingRequestPending=!0;const e=await this._agent.invoke_takeComputedStyleUpdates();if(this._isTrackingRequestPending=!1,e.getError()||!e.nodeIds||!this._isCSSPropertyTrackingEnabled)return;this._cssPropertyTracker&&this._cssPropertyTracker.dispatchEventToListeners(ts.TrackedCSSPropertiesUpdated,{domNodes:e.nodeIds.map((e=>this._domModel.nodeForId(e)))})}this._isCSSPropertyTrackingEnabled&&this._stylePollingThrottler.schedule(this._pollComputedStyleUpdates.bind(this))}}dispose(){this.disableCSSPropertyTracker(),super.dispose(),this._sourceMapManager.dispose()}}const Gt={FontsUpdated:Symbol("FontsUpdated"),MediaQueryResultChanged:Symbol("MediaQueryResultChanged"),ModelWasEnabled:Symbol("ModelWasEnabled"),PseudoStateForced:Symbol("PseudoStateForced"),StyleSheetAdded:Symbol("StyleSheetAdded"),StyleSheetChanged:Symbol("StyleSheetChanged"),StyleSheetRemoved:Symbol("StyleSheetRemoved")},$t="pseudo-state-marker";class Kt{constructor(e,t,s,i){this.styleSheetId=e,this.oldRange=t,this.newRange=x.TextRange.fromEdit(t,s),this.newText=s,this.payload=i}}class Xt{constructor(e,t,s){this._cssModel=e.cssModel(),this.styleSheetId=e.id,this.url=e.resourceURL(),this.lineNumber=t,this.columnNumber=s||0}cssModel(){return this._cssModel}header(){return this._cssModel.styleSheetHeaderForId(this.styleSheetId)}}class Jt{constructor(e){this._cssModel=e}mediaQueryResultChanged(){this._cssModel.mediaQueryResultChanged()}fontsUpdated({font:e}){this._cssModel.fontsUpdated(e)}styleSheetChanged({styleSheetId:e}){this._cssModel._fireStyleSheetChanged(e)}styleSheetAdded({header:e}){this._cssModel._styleSheetAdded(e)}styleSheetRemoved({styleSheetId:e}){this._cssModel._styleSheetRemoved(e)}}class Qt{constructor(e){this._cssModel=e,this._nodeIdToPromise=new Map}computedStylePromise(e){let t=this._nodeIdToPromise.get(e);return t||(t=this._cssModel._agent.invoke_getComputedStyleForNode({nodeId:e}).then((({computedStyle:t})=>{if(this._nodeIdToPromise.delete(e),!t||!t.length)return null;const s=new Map;for(const e of t)s.set(e.name,e.value);return s})),this._nodeIdToPromise.set(e,t),t)}}class Yt{constructor(e,t){this.inlineStyle=e,this.attributesStyle=t}}class Zt extends e.ObjectWrapper{constructor(e,t){super(),this._cssModel=e,this._properties=t}start(){this._cssModel.enableCSSPropertyTracker(this)}stop(){this._cssModel.disableCSSPropertyTracker()}getTrackedProperties(){return this._properties}}const es=1e3,ts={TrackedCSSPropertiesUpdated:Symbol("TrackedCSSPropertiesUpdated")};N.register(Wt,O.DOM,!0);var ss=Object.freeze({__proto__:null,CSSModel:Wt,Events:Gt,Edit:Kt,CSSLocation:Xt,InlineStyleResult:Yt,CSSPropertyTracker:Zt,CSSPropertyTrackerEvents:ts,ContrastInfo:undefined});class is{constructor(){const{Color:e,Format:t}=s;this._colors=[new e([.9607843137254902,.592156862745098,.5803921568627451,1],t.RGBA),new e([.9411764705882353,.7490196078431373,.2980392156862745,1],t.RGBA),new e([.8313725490196079,.9294117647058824,.19215686274509805,1],t.RGBA),new e([.6196078431372549,.9215686274509803,.2784313725490196,1],t.RGBA),new e([.3568627450980392,.8196078431372549,.8431372549019608,1],t.RGBA),new e([.7372549019607844,.807843137254902,.984313725490196,1],t.RGBA),new e([.7764705882352941,.7450980392156863,.9333333333333333,1],t.RGBA),new e([.8156862745098039,.5803921568627451,.9176470588235294,1],t.RGBA),new e([.9215686274509803,.5803921568627451,.8117647058823529,1],t.RGBA)],this._index=0}next(){const e=this._colors[this._index];return this._index++,this._index>=this._colors.length&&(this._index=0),e}}var rs=Object.freeze({__proto__:null,OverlayColorGenerator:is});class os{constructor(e,t=!0){this._model=e,this._gridHighlights=new Map,this._flexHighlights=new Map,this._colors=new Map,this._gridColorGenerator=new is,this._flexColorGenerator=new is,this._flexEnabled=t,this._showGridLineLabelsSetting=i.Settings.instance().moduleSetting("showGridLineLabels"),this._showGridLineLabelsSetting.addChangeListener(this._onSettingChange,this),this._extendGridLinesSetting=i.Settings.instance().moduleSetting("extendGridLines"),this._extendGridLinesSetting.addChangeListener(this._onSettingChange,this),this._showGridAreasSetting=i.Settings.instance().moduleSetting("showGridAreas"),this._showGridAreasSetting.addChangeListener(this._onSettingChange,this),this._showGridTrackSizesSetting=i.Settings.instance().moduleSetting("showGridTrackSizes"),this._showGridTrackSizesSetting.addChangeListener(this._onSettingChange,this)}_onSettingChange(){this.resetOverlay()}_buildGridHighlightConfig(e){const t=this.colorOfGrid(e),s=t.setAlpha(.1),i=t.setAlpha(.3),r=t.setAlpha(.8),o=this._extendGridLinesSetting.get(),n="lineNumbers"===this._showGridLineLabelsSetting.get(),a=n,l="lineNames"===this._showGridLineLabelsSetting.get();return{rowGapColor:i.toProtocolRGBA(),rowHatchColor:r.toProtocolRGBA(),columnGapColor:i.toProtocolRGBA(),columnHatchColor:r.toProtocolRGBA(),gridBorderColor:t.toProtocolRGBA(),gridBorderDash:!1,rowLineColor:t.toProtocolRGBA(),columnLineColor:t.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0,showGridExtensionLines:o,showPositiveLineNumbers:n,showNegativeLineNumbers:a,showLineNames:l,showAreaNames:this._showGridAreasSetting.get(),showTrackSizes:this._showGridTrackSizesSetting.get(),areaBorderColor:t.toProtocolRGBA(),gridBackgroundColor:s.toProtocolRGBA()}}_buildFlexContainerHighlightConfig(e){const t=this.colorOfFlex(e);return{containerBorder:{color:t.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},itemSeparator:{color:t.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dotted},lineSeparator:{color:t.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},mainDistributedSpace:{hatchColor:t.toProtocolRGBA()},crossDistributedSpace:{hatchColor:t.toProtocolRGBA()}}}highlightGridInOverlay(e){this._gridHighlights.set(e,this._buildGridHighlightConfig(e)),this._updateHighlightsInOverlay()}isGridHighlighted(e){return this._gridHighlights.has(e)}colorOfGrid(e){let t=this._colors.get(e);return t||(t=this._gridColorGenerator.next(),this._colors.set(e,t)),t}setColorOfGrid(e,t){this._colors.set(e,t)}hideGridInOverlay(e){this._gridHighlights.has(e)&&(this._gridHighlights.delete(e),this._updateHighlightsInOverlay())}highlightFlexInOverlay(e){this._flexHighlights.set(e,this._buildFlexContainerHighlightConfig(e)),this._updateHighlightsInOverlay()}isFlexHighlighted(e){return this._flexHighlights.has(e)}colorOfFlex(e){let t=this._colors.get(e);return t||(t=this._flexColorGenerator.next(),this._colors.set(e,t)),t}setColorOfFlex(e,t){this._colors.set(e,t)}hideFlexInOverlay(e){this._flexHighlights.has(e)&&(this._flexHighlights.delete(e),this._updateHighlightsInOverlay())}hideAllInOverlay(){this._flexHighlights.clear(),this._gridHighlights.clear(),this._updateHighlightsInOverlay()}refreshHighlights(){const e=this._updateHighlightsForDeletedNodes(this._gridHighlights);(this._updateHighlightsForDeletedNodes(this._flexHighlights)||e)&&this._updateHighlightsInOverlay()}_updateHighlightsForDeletedNodes(e){let t=!1;for(const s of e.keys())null===this._model.getDOMModel().nodeForId(s)&&(e.delete(s),t=!0);return t}resetOverlay(){for(const e of this._gridHighlights.keys())this._gridHighlights.set(e,this._buildGridHighlightConfig(e));for(const e of this._flexHighlights.keys())this._flexHighlights.set(e,this._buildFlexContainerHighlightConfig(e));this._updateHighlightsInOverlay()}_updateHighlightsInOverlay(){const e=this._gridHighlights.size>0||this._flexHighlights.size>0;this._model.setShowViewportSizeOnResize(!e),this._updateGridHighlightsInOverlay(),this._updateFlexHighlightsInOverlay()}_updateGridHighlightsInOverlay(){const e=this._model,t=[];for(const[e,s]of this._gridHighlights.entries())t.push({nodeId:e,gridHighlightConfig:s});e.target().overlayAgent().invoke_setShowGridOverlays({gridNodeHighlightConfigs:t})}_updateFlexHighlightsInOverlay(){if(!this._flexEnabled)return;const e=this._model,t=[];for(const[e,s]of this._flexHighlights.entries())t.push({nodeId:e,flexContainerHighlightConfig:s});e.target().overlayAgent().invoke_setShowFlexOverlays({flexNodeHighlightConfigs:t})}}var ns=Object.freeze({__proto__:null,OverlayPersistentHighlighter:os,DOMModel:class{nodeForId(e){}},OverlayAgent:class{invoke_setShowGridOverlays(e){}invoke_setShowFlexOverlays(e){}},Target:class{overlayAgent(){throw new Error("Not implemented")}},OverlayModel:class{getDOMModel(){throw new Error("Not implemented")}target(){throw new Error("Not implemented")}setShowViewportSizeOnResize(e){}}});class as extends N{constructor(e){super(e),this._domModel=e.model(_s),e.registerOverlayDispatcher(this),this._overlayAgent=e.overlayAgent(),this._debuggerModel=e.model(Fs),this._debuggerModel&&(i.Settings.instance().moduleSetting("disablePausedStateOverlay").addChangeListener(this._updatePausedInDebuggerMessage,this),this._debuggerModel.addEventListener(Hs.DebuggerPaused,this._updatePausedInDebuggerMessage,this),this._debuggerModel.addEventListener(Hs.DebuggerResumed,this._updatePausedInDebuggerMessage,this),this._debuggerModel.addEventListener(Hs.GlobalObjectCleared,this._updatePausedInDebuggerMessage,this)),this._inspectModeEnabled=!1,this._flexFeaturesExperimentEnabled=L.experiments.isEnabled("cssFlexboxFeatures"),this._hideHighlightTimeout=null,this._defaultHighlighter=new ds(this),this._highlighter=this._defaultHighlighter,this._showPaintRectsSetting=i.Settings.instance().moduleSetting("showPaintRects"),this._showLayoutShiftRegionsSetting=i.Settings.instance().moduleSetting("showLayoutShiftRegions"),this._showAdHighlightsSetting=i.Settings.instance().moduleSetting("showAdHighlights"),this._showDebugBordersSetting=i.Settings.instance().moduleSetting("showDebugBorders"),this._showFPSCounterSetting=i.Settings.instance().moduleSetting("showFPSCounter"),this._showScrollBottleneckRectsSetting=i.Settings.instance().moduleSetting("showScrollBottleneckRects"),this._showHitTestBordersSetting=i.Settings.instance().moduleSetting("showHitTestBorders"),this._registeredListeners=[],this._showViewportSizeOnResize=!0,e.suspended()||(this._overlayAgent.invoke_enable(),this._wireAgentToSettings()),this._peristentHighlighter=new os(this,this._flexFeaturesExperimentEnabled),this._domModel.addEventListener(bs.NodeRemoved,(()=>{this._peristentHighlighter&&this._peristentHighlighter.refreshHighlights()})),this._domModel.addEventListener(bs.DocumentUpdated,(()=>{this._peristentHighlighter&&this._peristentHighlighter.hideAllInOverlay()})),this._sourceOrderHighlighter=new cs(this),this._sourceOrderModeActive=!1}static highlightObjectAsDOMNode(e){const t=e.runtimeModel().target().model(_s);t&&t.overlayModel().highlightInOverlay({object:e,selectorList:void 0})}static hideDOMNodeHighlight(){for(const e of F.instance().models(as))e._delayedHideHighlight(0)}static async muteHighlight(){return Promise.all(F.instance().models(as).map((e=>e.suspendModel())))}static async unmuteHighlight(){return Promise.all(F.instance().models(as).map((e=>e.resumeModel())))}static highlightRect(e){for(const t of F.instance().models(as))t.highlightRect(e)}static clearHighlight(){for(const e of F.instance().models(as))e.clearHighlight()}getDOMModel(){return this._domModel}highlightRect({x:e,y:t,width:s,height:i,color:r,outlineColor:o}){const n=r||{r:255,g:0,b:255,a:.3},a=o||{r:255,g:0,b:255,a:.5};return this._overlayAgent.invoke_highlightRect({x:e,y:t,width:s,height:i,color:n,outlineColor:a})}clearHighlight(){return this._overlayAgent.invoke_hideHighlight()}async _wireAgentToSettings(){this._registeredListeners=[this._showPaintRectsSetting.addChangeListener((()=>this._overlayAgent.invoke_setShowPaintRects({result:this._showPaintRectsSetting.get()}))),this._showLayoutShiftRegionsSetting.addChangeListener((()=>this._overlayAgent.invoke_setShowLayoutShiftRegions({result:this._showLayoutShiftRegionsSetting.get()}))),this._showAdHighlightsSetting.addChangeListener((()=>this._overlayAgent.invoke_setShowAdHighlights({show:this._showAdHighlightsSetting.get()}))),this._showDebugBordersSetting.addChangeListener((()=>this._overlayAgent.invoke_setShowDebugBorders({show:this._showDebugBordersSetting.get()}))),this._showFPSCounterSetting.addChangeListener((()=>this._overlayAgent.invoke_setShowFPSCounter({show:this._showFPSCounterSetting.get()}))),this._showScrollBottleneckRectsSetting.addChangeListener((()=>this._overlayAgent.invoke_setShowScrollBottleneckRects({show:this._showScrollBottleneckRectsSetting.get()}))),this._showHitTestBordersSetting.addChangeListener((()=>this._overlayAgent.invoke_setShowHitTestBorders({show:this._showHitTestBordersSetting.get()})))],this._showPaintRectsSetting.get()&&this._overlayAgent.invoke_setShowPaintRects({result:!0}),this._showLayoutShiftRegionsSetting.get()&&this._overlayAgent.invoke_setShowLayoutShiftRegions({result:!0}),this._showAdHighlightsSetting.get()&&this._overlayAgent.invoke_setShowAdHighlights({show:!0}),this._showDebugBordersSetting.get()&&this._overlayAgent.invoke_setShowDebugBorders({show:!0}),this._showFPSCounterSetting.get()&&this._overlayAgent.invoke_setShowFPSCounter({show:!0}),this._showScrollBottleneckRectsSetting.get()&&this._overlayAgent.invoke_setShowScrollBottleneckRects({show:!0}),this._showHitTestBordersSetting.get()&&this._overlayAgent.invoke_setShowHitTestBorders({show:!0}),this._debuggerModel&&this._debuggerModel.isPaused()&&this._updatePausedInDebuggerMessage(),await this._overlayAgent.invoke_setShowViewportSizeOnResize({show:this._showViewportSizeOnResize})}async suspendModel(){l.EventTarget.removeEventListeners(this._registeredListeners),await this._overlayAgent.invoke_disable()}async resumeModel(){await Promise.all([this._overlayAgent.invoke_enable(),this._wireAgentToSettings()])}setShowViewportSizeOnResize(e){this._showViewportSizeOnResize!==e&&(this._showViewportSizeOnResize=e,this.target().suspended()||this._overlayAgent.invoke_setShowViewportSizeOnResize({show:e}))}_updatePausedInDebuggerMessage(){if(this.target().suspended())return;const e=this._debuggerModel&&this._debuggerModel.isPaused()&&!i.Settings.instance().moduleSetting("disablePausedStateOverlay").get()?o.UIString("Paused in debugger"):void 0;this._overlayAgent.invoke_setPausedInDebuggerMessage({message:e})}setHighlighter(e){this._highlighter=e||this._defaultHighlighter}async setInspectMode(e,t=!0){await this._domModel.requestDocument(),this._inspectModeEnabled=e!==Protocol.Overlay.InspectMode.None,this.dispatchEventToListeners(ls.InspectModeWillBeToggled,this),this._highlighter.setInspectMode(e,this._buildHighlightConfig("all",t))}inspectModeEnabled(){return this._inspectModeEnabled}highlightInOverlay(e,t,s){if(this._sourceOrderModeActive)return;this._hideHighlightTimeout&&(clearTimeout(this._hideHighlightTimeout),this._hideHighlightTimeout=null);const i=this._buildHighlightConfig(t);void 0!==s&&(i.showInfo=s),this._highlighter.highlightInOverlay(e,i)}highlightInOverlayForTwoSeconds(e){this.highlightInOverlay(e),this._delayedHideHighlight(2e3)}highlightGridInPersistentOverlay(e){this._peristentHighlighter&&(this._peristentHighlighter.highlightGridInOverlay(e),this.dispatchEventToListeners(ls.PersistentGridOverlayStateChanged,{nodeId:e,enabled:!0}))}isHighlightedGridInPersistentOverlay(e){return!!this._peristentHighlighter&&this._peristentHighlighter.isGridHighlighted(e)}hideGridInPersistentOverlay(e){this._peristentHighlighter&&(this._peristentHighlighter.hideGridInOverlay(e),this.dispatchEventToListeners(ls.PersistentGridOverlayStateChanged,{nodeId:e,enabled:!1}))}highlightFlexContainerInPersistentOverlay(e){this._peristentHighlighter&&(this._peristentHighlighter.highlightFlexInOverlay(e),this.dispatchEventToListeners(ls.PersistentFlexContainerOverlayStateChanged,{nodeId:e,enabled:!0}))}isHighlightedFlexContainerInPersistentOverlay(e){return!!this._peristentHighlighter&&this._peristentHighlighter.isFlexHighlighted(e)}hideFlexContainerInPersistentOverlay(e){this._peristentHighlighter&&(this._peristentHighlighter.hideFlexInOverlay(e),this.dispatchEventToListeners(ls.PersistentFlexContainerOverlayStateChanged,{nodeId:e,enabled:!1}))}highlightSourceOrderInOverlay(e){const t={parentOutlineColor:s.SourceOrderHighlight.ParentOutline.toProtocolRGBA(),childOutlineColor:s.SourceOrderHighlight.ChildOutline.toProtocolRGBA()};this._sourceOrderHighlighter.highlightSourceOrderInOverlay(e,t)}colorOfGridInPersistentOverlay(e){return this._peristentHighlighter?this._peristentHighlighter.colorOfGrid(e).asString(s.Format.HEX):null}setColorOfGridInPersistentOverlay(e,t){if(!this._peristentHighlighter)return;const i=s.Color.parse(t);i&&(this._peristentHighlighter.setColorOfGrid(e,i),this._peristentHighlighter.resetOverlay())}colorOfFlexInPersistentOverlay(e){return this._peristentHighlighter?this._peristentHighlighter.colorOfFlex(e).asString(s.Format.HEX):null}setColorOfFlexInPersistentOverlay(e,t){if(!this._peristentHighlighter)return;const i=s.Color.parse(t);i&&(this._peristentHighlighter.setColorOfFlex(e,i),this._peristentHighlighter.resetOverlay())}hideSourceOrderInOverlay(){this._sourceOrderHighlighter.hideSourceOrderHighlight()}setSourceOrderActive(e){this._sourceOrderModeActive=e}sourceOrderModeActive(){return this._sourceOrderModeActive}_delayedHideHighlight(e){null===this._hideHighlightTimeout&&(this._hideHighlightTimeout=setTimeout((()=>this.highlightInOverlay({clear:!0})),e))}highlightFrame(e){this._hideHighlightTimeout&&(clearTimeout(this._hideHighlightTimeout),this._hideHighlightTimeout=null),this._highlighter.highlightFrame(e)}showHingeForDualScreen(e){if(e){const{x:t,y:s,width:i,height:r,contentColor:o,outlineColor:n}=e;this._overlayAgent.invoke_setShowHinge({hingeConfig:{rect:{x:t,y:s,width:i,height:r},contentColor:o,outlineColor:n}})}else this._overlayAgent.invoke_setShowHinge({})}_buildHighlightConfig(e="all",t=!1){const r=i.Settings.instance().moduleSetting("showMetricsRulers").get(),o=i.Settings.instance().moduleSetting("colorFormat").get(),n={showInfo:"all"===e,showRulers:r,showStyles:t,showAccessibilityInfo:t,showExtensionLines:r,gridHighlightConfig:{},flexContainerHighlightConfig:{},contrastAlgorithm:L.experiments.isEnabled("APCA")?Protocol.Overlay.ContrastAlgorithm.Apca:Protocol.Overlay.ContrastAlgorithm.Aa};"all"!==e&&"content"!==e||(n.contentColor=s.PageHighlight.Content.toProtocolRGBA()),"all"!==e&&"padding"!==e||(n.paddingColor=s.PageHighlight.Padding.toProtocolRGBA()),"all"!==e&&"border"!==e||(n.borderColor=s.PageHighlight.Border.toProtocolRGBA()),"all"!==e&&"margin"!==e||(n.marginColor=s.PageHighlight.Margin.toProtocolRGBA()),"all"===e&&(n.eventTargetColor=s.PageHighlight.EventTarget.toProtocolRGBA(),n.shapeColor=s.PageHighlight.Shape.toProtocolRGBA(),n.shapeMarginColor=s.PageHighlight.ShapeMargin.toProtocolRGBA(),n.gridHighlightConfig={rowGapColor:s.PageHighlight.GapBackground.toProtocolRGBA(),rowHatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),columnGapColor:s.PageHighlight.GapBackground.toProtocolRGBA(),columnHatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),rowLineColor:s.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineColor:s.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0},this._flexFeaturesExperimentEnabled&&(n.flexContainerHighlightConfig={containerBorder:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},itemSeparator:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dotted},lineSeparator:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},mainDistributedSpace:{hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()},crossDistributedSpace:{hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()},rowGapSpace:{hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()},columnGapSpace:{hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()}})),e.endsWith("gap")&&(n.gridHighlightConfig={gridBorderColor:s.PageHighlight.GridBorder.toProtocolRGBA(),gridBorderDash:!0},"gap"!==e&&"row-gap"!==e||(n.gridHighlightConfig.rowGapColor=s.PageHighlight.GapBackground.toProtocolRGBA(),n.gridHighlightConfig.rowHatchColor=s.PageHighlight.GapHatch.toProtocolRGBA()),"gap"!==e&&"column-gap"!==e||(n.gridHighlightConfig.columnGapColor=s.PageHighlight.GapBackground.toProtocolRGBA(),n.gridHighlightConfig.columnHatchColor=s.PageHighlight.GapHatch.toProtocolRGBA())),e.endsWith("gap")&&this._flexFeaturesExperimentEnabled&&(n.flexContainerHighlightConfig={containerBorder:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed}},"gap"!==e&&"row-gap"!==e||(n.flexContainerHighlightConfig.rowGapSpace={hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()}),"gap"!==e&&"column-gap"!==e||(n.flexContainerHighlightConfig.columnGapSpace={hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()})),"grid-areas"===e&&(n.gridHighlightConfig={rowLineColor:s.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineColor:s.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0,columnLineDash:!0,showAreaNames:!0,areaBorderColor:s.PageHighlight.GridAreaBorder.toProtocolRGBA()}),"grid-template-columns"===e&&(n.contentColor=s.PageHighlight.Content.toProtocolRGBA(),n.gridHighlightConfig={columnLineColor:s.PageHighlight.LayoutLine.toProtocolRGBA(),columnLineDash:!0}),"grid-template-rows"===e&&(n.contentColor=s.PageHighlight.Content.toProtocolRGBA(),n.gridHighlightConfig={rowLineColor:s.PageHighlight.LayoutLine.toProtocolRGBA(),rowLineDash:!0}),"justify-content"===e&&this._flexFeaturesExperimentEnabled&&(n.flexContainerHighlightConfig={containerBorder:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},mainDistributedSpace:{hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()}}),"align-content"===e&&this._flexFeaturesExperimentEnabled&&(n.flexContainerHighlightConfig={containerBorder:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},crossDistributedSpace:{hatchColor:s.PageHighlight.GapHatch.toProtocolRGBA(),fillColor:s.PageHighlight.GapBackground.toProtocolRGBA()}}),"align-items"===e&&this._flexFeaturesExperimentEnabled&&(n.flexContainerHighlightConfig={containerBorder:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},lineSeparator:{color:s.PageHighlight.LayoutLine.toProtocolRGBA(),pattern:Protocol.Overlay.LineStylePattern.Dashed},crossAlignment:{color:s.PageHighlight.LayoutLine.toProtocolRGBA()}});return new Set(["rgb","hsl","hex"]).has(o)&&(n.colorFormat=o),n}nodeHighlightRequested({nodeId:e}){const t=this._domModel.nodeForId(e);t&&this.dispatchEventToListeners(ls.HighlightNodeRequested,t)}static setInspectNodeHandler(e){as._inspectNodeHandler=e}inspectNodeRequested({backendNodeId:e}){const t=new gs(this.target(),e);as._inspectNodeHandler?t.resolvePromise().then((e=>{e&&as._inspectNodeHandler&&as._inspectNodeHandler(e)})):h.reveal(t),this.dispatchEventToListeners(ls.ExitedInspectMode)}screenshotRequested({viewport:e}){this.dispatchEventToListeners(ls.ScreenshotRequested,e),this.dispatchEventToListeners(ls.ExitedInspectMode)}inspectModeCanceled(){this.dispatchEventToListeners(ls.ExitedInspectMode)}}as._inspectNodeHandler=null;const ls={InspectModeWillBeToggled:Symbol("InspectModeWillBeToggled"),ExitedInspectMode:Symbol("InspectModeExited"),HighlightNodeRequested:Symbol("HighlightNodeRequested"),ScreenshotRequested:Symbol("ScreenshotRequested"),PersistentGridOverlayStateChanged:Symbol("PersistentGridOverlayStateChanged"),PersistentFlexContainerOverlayStateChanged:Symbol("PersistentFlexContainerOverlayStateChanged")};class ds{constructor(e){this._model=e}highlightInOverlay(e,t){const{node:s,deferredNode:i,object:r,selectorList:o}={node:void 0,deferredNode:void 0,object:void 0,selectorList:void 0,...e},n=s?s.id:void 0,a=i?i.backendNodeId():void 0,l=r?r.objectId:void 0;n||a||l?this._model.target().overlayAgent().invoke_highlightNode({highlightConfig:t,nodeId:n,backendNodeId:a,objectId:l,selector:o}):this._model.target().overlayAgent().invoke_hideHighlight()}async setInspectMode(e,t){await this._model.target().overlayAgent().invoke_setInspectMode({mode:e,highlightConfig:t})}highlightFrame(e){this._model.target().overlayAgent().invoke_highlightFrame({frameId:e,contentColor:s.PageHighlight.Content.toProtocolRGBA(),contentOutlineColor:s.PageHighlight.ContentOutline.toProtocolRGBA()})}}class cs{constructor(e){this._model=e}highlightSourceOrderInOverlay(e,t){this._model.setSourceOrderActive(!0),this._model.setShowViewportSizeOnResize(!1),this._model._overlayAgent.invoke_highlightSourceOrder({sourceOrderConfig:t,nodeId:e.id})}hideSourceOrderHighlight(){this._model.setSourceOrderActive(!1),this._model.setShowViewportSizeOnResize(!0),this._model.clearHighlight()}}N.register(as,O.DOM,!0);var hs=Object.freeze({__proto__:null,HighlightColor:undefined,HighlightRect:undefined,Hinge:undefined,OverlayModel:as,Events:ls,Highlighter:class{highlightInOverlay(e,t){}setInspectMode(e,t){throw Error("Unimplemented method")}highlightFrame(e){}},SourceOrderHighlighter:cs,HighlightData:undefined});class us{constructor(e){this._domModel=e,this._agent=this._domModel._agent,this.ownerDocument,this._isInShadowTree,this.id,this.index=void 0,this._backendNodeId,this._nodeType,this._nodeName,this._localName,this._nodeValue,this._pseudoType,this._shadowRootType,this._frameOwnerFrameId,this._xmlVersion,this._isSVGNode,this._creationStackTrace=null,this._pseudoElements=new Map,this._distributedNodes=[],this._shadowRoots=[],this._attributes=new Map,this._markers=new Map,this._subtreeMarkerCount=0,this._childNodeCount,this._children=null,this.nextSibling=null,this.previousSibling=null,this.firstChild=null,this.lastChild=null,this.parentNode=null}static create(e,t,s,i){const r=new us(e);return r._init(t,s,i),r}_init(e,t,s){if(this._agent=this._domModel._agent,this.ownerDocument=e,this._isInShadowTree=t,this.id=s.nodeId,this._backendNodeId=s.backendNodeId,this._domModel._idToDOMNode[this.id]=this,this._nodeType=s.nodeType,this._nodeName=s.nodeName,this._localName=s.localName,this._nodeValue=s.nodeValue,this._pseudoType=s.pseudoType,this._shadowRootType=s.shadowRootType,this._frameOwnerFrameId=s.frameId||null,this._xmlVersion=s.xmlVersion,this._isSVGNode=Boolean(s.isSVG),s.attributes&&this._setAttributesPayload(s.attributes),this._childNodeCount=s.childNodeCount||0,s.shadowRoots)for(let e=0;e<s.shadowRoots.length;++e){const t=s.shadowRoots[e],i=us.create(this._domModel,this.ownerDocument,!0,t);this._shadowRoots.push(i),i.parentNode=this}if(s.templateContent&&(this._templateContent=us.create(this._domModel,this.ownerDocument,!0,s.templateContent),this._templateContent.parentNode=this,this._children=[]),s.contentDocument)this._contentDocument=new ps(this._domModel,s.contentDocument),this._contentDocument.parentNode=this,this._children=[];else if(("IFRAME"===s.nodeName||"PORTAL"===s.nodeName)&&s.frameId){const e=F.instance().targetById(s.frameId),t=e?e.model(_s):null;t&&(this._childDocumentPromiseForTesting=t.requestDocument()),this._children=[]}s.importedDocument&&(this._importedDocument=us.create(this._domModel,this.ownerDocument,!0,s.importedDocument),this._importedDocument.parentNode=this,this._children=[]),s.distributedNodes&&this._setDistributedNodePayloads(s.distributedNodes),s.children&&this._setChildrenPayload(s.children),this._setPseudoElements(s.pseudoElements),this._nodeType===Node.ELEMENT_NODE?(this.ownerDocument&&!this.ownerDocument.documentElement&&"HTML"===this._nodeName&&(this.ownerDocument.documentElement=this),this.ownerDocument&&!this.ownerDocument.body&&"BODY"===this._nodeName&&(this.ownerDocument.body=this)):this._nodeType===Node.DOCUMENT_TYPE_NODE?(this.publicId=s.publicId,this.systemId=s.systemId,this.internalSubset=s.internalSubset):this._nodeType===Node.ATTRIBUTE_NODE&&(this.name=s.name,this.value=s.value)}isAdFrameNode(){if(this.isIframe()&&this._frameOwnerFrameId){const e=Ct.instance().getFrame(this._frameOwnerFrameId);return!!e&&e.adFrameType()!==Protocol.Page.AdFrameType.None}return!1}isSVGNode(){return this._isSVGNode}creationStackTrace(){if(this._creationStackTrace)return this._creationStackTrace;const e=this._agent.invoke_getNodeStackTraces({nodeId:this.id});return this._creationStackTrace=e.then((e=>e.creation||null)),this._creationStackTrace}domModel(){return this._domModel}backendNodeId(){return this._backendNodeId}children(){return this._children?this._children.slice():null}hasAttributes(){return this._attributes.size>0}childNodeCount(){return this._childNodeCount}hasShadowRoots(){return Boolean(this._shadowRoots.length)}shadowRoots(){return this._shadowRoots.slice()}templateContent(){return this._templateContent||null}contentDocument(){return this._contentDocument||null}isIframe(){return"IFRAME"===this._nodeName}isPortal(){return"PORTAL"===this._nodeName}importedDocument(){return this._importedDocument||null}nodeType(){return this._nodeType}nodeName(){return this._nodeName}pseudoType(){return this._pseudoType}hasPseudoElements(){return this._pseudoElements.size>0}pseudoElements(){return this._pseudoElements}beforePseudoElement(){return this._pseudoElements&&this._pseudoElements.get(us.PseudoElementNames.Before)||null}afterPseudoElement(){return this._pseudoElements&&this._pseudoElements.get(us.PseudoElementNames.After)||null}markerPseudoElement(){return this._pseudoElements&&this._pseudoElements.get(us.PseudoElementNames.Marker)||null}isInsertionPoint(){return!this.isXMLNode()&&("SHADOW"===this._nodeName||"CONTENT"===this._nodeName||"SLOT"===this._nodeName)}distributedNodes(){return this._distributedNodes}isInShadowTree(){return this._isInShadowTree}ancestorShadowHost(){const e=this.ancestorShadowRoot();return e?e.parentNode:null}ancestorShadowRoot(){if(!this._isInShadowTree)return null;let e=this;for(;e&&!e.isShadowRoot();)e=e.parentNode;return e}ancestorUserAgentShadowRoot(){const e=this.ancestorShadowRoot();return e&&e.shadowRootType()===us.ShadowRootTypes.UserAgent?e:null}isShadowRoot(){return Boolean(this._shadowRootType)}shadowRootType(){return this._shadowRootType||null}nodeNameInCorrectCase(){const e=this.shadowRootType();return e?"#shadow-root ("+e+")":this.localName()?this.localName().length!==this.nodeName().length?this.nodeName():this.localName():this.nodeName()}setNodeName(e,t){this._agent.invoke_setNodeName({nodeId:this.id,name:e}).then((e=>{e.getError()||this._domModel.markUndoableState(),t&&t(e.getError()||null,this._domModel.nodeForId(e.nodeId))}))}localName(){return this._localName}nodeValue(){return this._nodeValue}setNodeValue(e,t){this._agent.invoke_setNodeValue({nodeId:this.id,value:e}).then((e=>{e.getError()||this._domModel.markUndoableState(),t&&t(e.getError()||null)}))}getAttribute(e){const t=this._attributes.get(e);return t?t.value:void 0}setAttribute(e,t,s){this._agent.invoke_setAttributesAsText({nodeId:this.id,text:t,name:e}).then((e=>{e.getError()||this._domModel.markUndoableState(),s&&s(e.getError()||null)}))}setAttributeValue(e,t,s){this._agent.invoke_setAttributeValue({nodeId:this.id,name:e,value:t}).then((e=>{e.getError()||this._domModel.markUndoableState(),s&&s(e.getError()||null)}))}setAttributeValuePromise(e,t){return new Promise((s=>this.setAttributeValue(e,t,s)))}attributes(){return[...this._attributes.values()]}async removeAttribute(e){(await this._agent.invoke_removeAttribute({nodeId:this.id,name:e})).getError()||(this._attributes.delete(e),this._domModel.markUndoableState())}getChildNodes(e){this._children?e(this.children()):this._agent.invoke_requestChildNodes({nodeId:this.id}).then((t=>{e(t.getError()?null:this.children())}))}async getSubtree(e,t){return(await this._agent.invoke_requestChildNodes({nodeId:this.id,depth:e,pierce:t})).getError()?null:this._children}async getOuterHTML(){const{outerHTML:e}=await this._agent.invoke_getOuterHTML({nodeId:this.id});return e}setOuterHTML(e,t){this._agent.invoke_setOuterHTML({nodeId:this.id,outerHTML:e}).then((e=>{e.getError()||this._domModel.markUndoableState(),t&&t(e.getError()||null)}))}removeNode(e){this._agent.invoke_removeNode({nodeId:this.id}).then((t=>{t.getError()||this._domModel.markUndoableState(),e&&e(t.getError()||null)}))}async copyNode(){const{outerHTML:e}=await this._agent.invoke_getOuterHTML({nodeId:this.id});return null!==e&&u.InspectorFrontendHostInstance.copyText(e),e}path(){function e(e){return(void 0!==e.index||e.isShadowRoot()&&e.parentNode)&&e._nodeName.length}const t=[];let s=this;for(;s&&e(s);){const e="number"==typeof s.index?s.index:s.shadowRootType()===us.ShadowRootTypes.UserAgent?"u":"a";t.push([e,s._nodeName]),s=s.parentNode}return t.reverse(),t.join(",")}isAncestor(e){if(!e)return!1;let t=e.parentNode;for(;t;){if(this===t)return!0;t=t.parentNode}return!1}isDescendant(e){return null!==e&&e.isAncestor(this)}frameId(){let e=this.parentNode||this;for(;!e._frameOwnerFrameId&&e.parentNode;)e=e.parentNode;return e._frameOwnerFrameId}_setAttributesPayload(e){let t=!this._attributes||e.length!==2*this._attributes.size;const s=this._attributes||new Map;this._attributes=new Map;for(let i=0;i<e.length;i+=2){const r=e[i],o=e[i+1];if(this._addAttribute(r,o),t)continue;const n=s.get(r);n&&n.value===o||(t=!0)}return t}_insertChild(e,t){if(!this._children)throw new Error("DOMNode._children is expected to not be null.");const s=us.create(this._domModel,this.ownerDocument,this._isInShadowTree,t);return this._children.splice(this._children.indexOf(e)+1,0,s),this._renumber(),s}_removeChild(e){const t=e.pseudoType();if(t)this._pseudoElements.delete(t);else{const t=this._shadowRoots.indexOf(e);if(-1!==t)this._shadowRoots.splice(t,1);else{if(!this._children)throw new Error("DOMNode._children is expected to not be null.");if(-1===this._children.indexOf(e))throw new Error("DOMNode._children is expected to contain the node to be removed.");this._children.splice(this._children.indexOf(e),1)}}e.parentNode=null,this._subtreeMarkerCount-=e._subtreeMarkerCount,e._subtreeMarkerCount&&this._domModel.dispatchEventToListeners(bs.MarkersChanged,this),this._renumber()}_setChildrenPayload(e){this._children=[];for(let t=0;t<e.length;++t){const s=e[t],i=us.create(this._domModel,this.ownerDocument,this._isInShadowTree,s);this._children.push(i)}this._renumber()}_setPseudoElements(e){if(e)for(let t=0;t<e.length;++t){const s=us.create(this._domModel,this.ownerDocument,this._isInShadowTree,e[t]);s.parentNode=this;const i=s.pseudoType();if(!i)throw new Error("DOMNode.pseudoType() is expected to be defined.");this._pseudoElements.set(i,s)}}_setDistributedNodePayloads(e){this._distributedNodes=[];for(const t of e)this._distributedNodes.push(new ms(this._domModel.target(),t.backendNodeId,t.nodeType,t.nodeName))}_renumber(){if(!this._children)throw new Error("DOMNode._children is expected to not be null.");if(this._childNodeCount=this._children.length,0===this._childNodeCount)return this.firstChild=null,void(this.lastChild=null);this.firstChild=this._children[0],this.lastChild=this._children[this._childNodeCount-1];for(let e=0;e<this._childNodeCount;++e){const t=this._children[e];t.index=e,t.nextSibling=e+1<this._childNodeCount?this._children[e+1]:null,t.previousSibling=e-1>=0?this._children[e-1]:null,t.parentNode=this}}_addAttribute(e,t){const s={name:e,value:t,_node:this};this._attributes.set(e,s)}_setAttribute(e,t){const s=this._attributes.get(e);s?s.value=t:this._addAttribute(e,t)}_removeAttribute(e){this._attributes.delete(e)}copyTo(e,t,s){this._agent.invoke_copyTo({nodeId:this.id,targetNodeId:e.id,insertBeforeNodeId:t?t.id:void 0}).then((e=>{e.getError()||this._domModel.markUndoableState(),s&&s(e.getError()||null,this._domModel.nodeForId(e.nodeId))}))}moveTo(e,t,s){this._agent.invoke_moveTo({nodeId:this.id,targetNodeId:e.id,insertBeforeNodeId:t?t.id:void 0}).then((e=>{e.getError()||this._domModel.markUndoableState(),s&&s(e.getError()||null,this._domModel.nodeForId(e.nodeId))}))}isXMLNode(){return Boolean(this._xmlVersion)}setMarker(e,t){if(null!==t){if(this.parentNode&&!this._markers.has(e))for(let e=this;e;e=e.parentNode)++e._subtreeMarkerCount;this._markers.set(e,t);for(let e=this;e;e=e.parentNode)this._domModel.dispatchEventToListeners(bs.MarkersChanged,e)}else{if(!this._markers.has(e))return;this._markers.delete(e);for(let e=this;e;e=e.parentNode)--e._subtreeMarkerCount;for(let e=this;e;e=e.parentNode)this._domModel.dispatchEventToListeners(bs.MarkersChanged,e)}}marker(e){return this._markers.get(e)||null}traverseMarkers(e){!function t(s){if(s._subtreeMarkerCount){for(const t of s._markers.keys())e(s,t);if(s._children)for(const e of s._children)t(e)}}(this)}resolveURL(e){if(!e)return e;for(let s=this;s;s=s.parentNode)if(s instanceof ps&&s.baseURL)return t.ParsedURL.completeURL(s.baseURL,e);return null}highlight(e){this._domModel.overlayModel().highlightInOverlay({node:this,selectorList:void 0},e)}highlightForTwoSeconds(){this._domModel.overlayModel().highlightInOverlayForTwoSeconds({node:this,selectorList:void 0})}async resolveToObject(e){const{object:t}=await this._agent.invoke_resolveNode({nodeId:this.id,backendNodeId:void 0,objectGroup:e});return t&&this._domModel._runtimeModel.createRemoteObject(t)||null}async boxModel(){const{model:e}=await this._agent.invoke_getBoxModel({nodeId:this.id});return e}async setAsInspectedNode(){let e=this;for(e&&e.pseudoType()&&(e=e.parentNode);e;){let t=e.ancestorUserAgentShadowRoot();if(!t)break;if(t=e.ancestorShadowHost(),!t)break;e=t}if(!e)throw new Error("In DOMNode.setAsInspectedNode: node is expected to not be null.");await this._agent.invoke_setInspectedNode({nodeId:e.id})}enclosingElementOrSelf(){let e=this;return e&&e.nodeType()===Node.TEXT_NODE&&e.parentNode&&(e=e.parentNode),e&&e.nodeType()!==Node.ELEMENT_NODE&&(e=null),e}async scrollIntoView(){const e=this.enclosingElementOrSelf();if(!e)return;const t=await e.resolveToObject();t&&(t.callFunction((function(){this.scrollIntoViewIfNeeded(!0)})),t.release(),e.highlightForTwoSeconds())}async focus(){const e=this.enclosingElementOrSelf();if(!e)throw new Error("DOMNode.focus expects node to not be null.");const t=await e.resolveToObject();t&&(await t.callFunction((function(){this.focus()})),t.release(),e.highlightForTwoSeconds(),await this._domModel.target().pageAgent().invoke_bringToFront())}simpleSelector(){const e=this.localName()||this.nodeName().toLowerCase();if(this.nodeType()!==Node.ELEMENT_NODE)return e;const t=this.getAttribute("type"),s=this.getAttribute("id"),i=this.getAttribute("class");if("input"===e&&t&&!s&&!i)return e+'[type="'+CSS.escape(t)+'"]';if(s)return e+"#"+CSS.escape(s);if(i){return("div"===e?"":e)+"."+i.trim().split(/\s+/g).map((e=>CSS.escape(e))).join(".")}return e}}us.PseudoElementNames={Before:"before",After:"after",Marker:"marker"},us.ShadowRootTypes={UserAgent:"user-agent",Open:"open",Closed:"closed"};class gs{constructor(e,t){this._domModel=e.model(_s),this._backendNodeId=t}resolve(e){this.resolvePromise().then(e)}async resolvePromise(){const e=await this._domModel.pushNodesByBackendIdsToFrontend(new Set([this._backendNodeId]));return e&&e.get(this._backendNodeId)||null}backendNodeId(){return this._backendNodeId}domModel(){return this._domModel}highlight(){this._domModel.overlayModel().highlightInOverlay({deferredNode:this,selectorList:void 0})}}class ms{constructor(e,t,s,i){this.nodeType=s,this.nodeName=i,this.deferredNode=new gs(e,t)}}class ps extends us{constructor(e,t){super(e),this.body=null,this.documentElement=null,this._init(this,!1,t),this.documentURL=t.documentURL||"",this.baseURL=t.baseURL||""}}class _s extends N{constructor(e){super(e),this._agent=e.domAgent(),this._idToDOMNode={},this._document=null,this._attributeLoadNodeIds=new Set,e.registerDOMDispatcher(new fs(this)),this._runtimeModel=e.model(ti),this._lastMutationId,this._pendingDocumentRequestPromise=null,e.suspended()||this._agent.invoke_enable(),L.experiments.isEnabled("captureNodeCreationStacks")&&this._agent.invoke_setNodeStackTracesEnabled({enable:!0})}runtimeModel(){return this._runtimeModel}cssModel(){return this.target().model(Wt)}overlayModel(){return this.target().model(as)}static cancelSearch(){for(const e of F.instance().models(_s))e._cancelSearch()}_scheduleMutationEvent(e){this.hasEventListeners(bs.DOMMutated)&&(this._lastMutationId=(this._lastMutationId||0)+1,Promise.resolve().then(function(e,t){if(!this.hasEventListeners(bs.DOMMutated)||this._lastMutationId!==t)return;this.dispatchEventToListeners(bs.DOMMutated,e)}.bind(this,e,this._lastMutationId)))}requestDocument(){return this._document?Promise.resolve(this._document):(this._pendingDocumentRequestPromise||(this._pendingDocumentRequestPromise=this._requestDocument()),this._pendingDocumentRequestPromise)}async getOwnerNodeForFrame(e){const t=await this._agent.invoke_getFrameOwner({frameId:e});return t.getError()?null:new gs(this.target(),t.backendNodeId)}async _requestDocument(){const{root:e}=await this._agent.invoke_getDocument({});if(this._pendingDocumentRequestPromise=null,e&&this._setDocument(e),!this._document)return console.error("No document"),null;const t=this.parentModel();if(t&&!this._frameOwnerNode){await t.requestDocument();const e=await t._agent.invoke_getFrameOwner({frameId:this.target().id()});!e.getError()&&e.nodeId&&(this._frameOwnerNode=t.nodeForId(e.nodeId))}if(this._frameOwnerNode){const e=this._frameOwnerNode._contentDocument;this._frameOwnerNode._contentDocument=this._document,this._frameOwnerNode._children=[],this._document?(this._document.parentNode=this._frameOwnerNode,this.dispatchEventToListeners(bs.NodeInserted,this._document)):e&&this.dispatchEventToListeners(bs.NodeRemoved,{node:e,parent:this._frameOwnerNode})}return this._document}existingDocument(){return this._document}async pushNodeToFrontend(e){await this.requestDocument();const{nodeId:t}=await this._agent.invoke_requestNode({objectId:e});return t?this.nodeForId(t):null}pushNodeByPathToFrontend(e){return this.requestDocument().then((()=>this._agent.invoke_pushNodeByPathToFrontend({path:e}))).then((({nodeId:e})=>e))}async pushNodesByBackendIdsToFrontend(e){await this.requestDocument();const t=[...e],{nodeIds:s}=await this._agent.invoke_pushNodesByBackendIdsToFrontend({backendNodeIds:t});if(!s)return null;const i=new Map;for(let e=0;e<s.length;++e)s[e]&&i.set(t[e],this.nodeForId(s[e]));return i}_attributeModified(e,t,s){const i=this._idToDOMNode[e];i&&(i._setAttribute(t,s),this.dispatchEventToListeners(bs.AttrModified,{node:i,name:t}),this._scheduleMutationEvent(i))}_attributeRemoved(e,t){const s=this._idToDOMNode[e];s&&(s._removeAttribute(t),this.dispatchEventToListeners(bs.AttrRemoved,{node:s,name:t}),this._scheduleMutationEvent(s))}_inlineStyleInvalidated(e){v.addAll(this._attributeLoadNodeIds,e),this._loadNodeAttributesTimeout||(this._loadNodeAttributesTimeout=setTimeout(this._loadNodeAttributes.bind(this),20))}_loadNodeAttributes(){delete this._loadNodeAttributesTimeout;for(const e of this._attributeLoadNodeIds)this._agent.invoke_getAttributes({nodeId:e}).then((({attributes:t})=>{if(!t)return;const s=this._idToDOMNode[e];s&&s._setAttributesPayload(t)&&(this.dispatchEventToListeners(bs.AttrModified,{node:s,name:"style"}),this._scheduleMutationEvent(s))}));this._attributeLoadNodeIds.clear()}_characterDataModified(e,t){const s=this._idToDOMNode[e];s._nodeValue=t,this.dispatchEventToListeners(bs.CharacterDataModified,s),this._scheduleMutationEvent(s)}nodeForId(e){return e&&this._idToDOMNode[e]||null}_documentUpdated(){const e=this._document||this._pendingDocumentRequestPromise;this._setDocument(null),this.parentModel()&&e&&this.requestDocument()}_setDocument(e){this._idToDOMNode={},this._document=e&&"nodeId"in e?new ps(this,e):null,ys.instance()._dispose(this),this.parentModel()||this.dispatchEventToListeners(bs.DocumentUpdated,this)}_setDetachedRoot(e){"#document"===e.nodeName?new ps(this,e):us.create(this,null,!1,e)}_setChildNodes(e,t){if(!e&&t.length)return void this._setDetachedRoot(t[0]);this._idToDOMNode[e]._setChildrenPayload(t)}_childNodeCountUpdated(e,t){const s=this._idToDOMNode[e];s._childNodeCount=t,this.dispatchEventToListeners(bs.ChildNodeCountUpdated,s),this._scheduleMutationEvent(s)}_childNodeInserted(e,t,s){const i=this._idToDOMNode[e],r=this._idToDOMNode[t],o=i._insertChild(r,s);this._idToDOMNode[o.id]=o,this.dispatchEventToListeners(bs.NodeInserted,o),this._scheduleMutationEvent(o)}_childNodeRemoved(e,t){const s=this._idToDOMNode[e],i=this._idToDOMNode[t];s._removeChild(i),this._unbind(i),this.dispatchEventToListeners(bs.NodeRemoved,{node:i,parent:s}),this._scheduleMutationEvent(i)}_shadowRootPushed(e,t){const s=this._idToDOMNode[e];if(!s)return;const i=us.create(this,s.ownerDocument,!0,t);i.parentNode=s,this._idToDOMNode[i.id]=i,s._shadowRoots.unshift(i),this.dispatchEventToListeners(bs.NodeInserted,i),this._scheduleMutationEvent(i)}_shadowRootPopped(e,t){const s=this._idToDOMNode[e];if(!s)return;const i=this._idToDOMNode[t];i&&(s._removeChild(i),this._unbind(i),this.dispatchEventToListeners(bs.NodeRemoved,{node:i,parent:s}),this._scheduleMutationEvent(i))}_pseudoElementAdded(e,t){const s=this._idToDOMNode[e];if(!s)return;const i=us.create(this,s.ownerDocument,!1,t);i.parentNode=s,this._idToDOMNode[i.id]=i;const r=i.pseudoType();if(!r)throw new Error("DOMModel._pseudoElementAdded expects pseudoType to be defined.");if(s._pseudoElements.get(r))throw new Error("DOMModel._pseudoElementAdded expects parent to not already have this pseudo type added.");s._pseudoElements.set(r,i),this.dispatchEventToListeners(bs.NodeInserted,i),this._scheduleMutationEvent(i)}_pseudoElementRemoved(e,t){const s=this._idToDOMNode[e];if(!s)return;const i=this._idToDOMNode[t];i&&(s._removeChild(i),this._unbind(i),this.dispatchEventToListeners(bs.NodeRemoved,{node:i,parent:s}),this._scheduleMutationEvent(i))}_distributedNodesUpdated(e,t){const s=this._idToDOMNode[e];s&&(s._setDistributedNodePayloads(t),this.dispatchEventToListeners(bs.DistributedNodesChanged,s),this._scheduleMutationEvent(s))}_unbind(e){delete this._idToDOMNode[e.id];for(let t=0;e._children&&t<e._children.length;++t)this._unbind(e._children[t]);for(let t=0;t<e._shadowRoots.length;++t)this._unbind(e._shadowRoots[t]);const t=e.pseudoElements();for(const e of t.values())this._unbind(e);e._templateContent&&this._unbind(e._templateContent)}async getNodesByStyle(e,t=!1){if(await this.requestDocument(),!this._document)throw new Error("DOMModel.getNodesByStyle expects to have a document.");const s=await this._agent.invoke_getNodesForSubtreeByStyle({nodeId:this._document.id,computedStyles:e,pierce:t});if(s.getError())throw s.getError();return s.nodeIds}async performSearch(e,t){const s=await this._agent.invoke_performSearch({query:e,includeUserAgentShadowDOM:t});return s.getError()||(this._searchId=s.searchId),s.getError()?0:s.resultCount}async searchResult(e){if(!this._searchId)return null;const{nodeIds:t}=await this._agent.invoke_getSearchResults({searchId:this._searchId,fromIndex:e,toIndex:e+1});return t&&1===t.length?this.nodeForId(t[0]):null}_cancelSearch(){this._searchId&&(this._agent.invoke_discardSearchResults({searchId:this._searchId}),delete this._searchId)}classNamesPromise(e){return this._agent.invoke_collectClassNamesFromSubtree({nodeId:e}).then((({classNames:e})=>e||[]))}querySelector(e,t){return this._agent.invoke_querySelector({nodeId:e,selector:t}).then((({nodeId:e})=>e))}querySelectorAll(e,t){return this._agent.invoke_querySelectorAll({nodeId:e,selector:t}).then((({nodeIds:e})=>e))}markUndoableState(e){ys.instance()._markUndoableState(this,e||!1)}async nodeForLocation(e,t,s){const i=await this._agent.invoke_getNodeForLocation({x:e,y:t,includeUserAgentShadowDOM:s});return i.getError()||!i.nodeId?null:this.nodeForId(i.nodeId)}pushObjectAsNodeToFrontend(e){return e.isNode()?this.pushNodeToFrontend(e.objectId):Promise.resolve(null)}suspendModel(){return this._agent.invoke_disable().then((()=>this._setDocument(null)))}async resumeModel(){await this._agent.invoke_enable()}dispose(){ys.instance()._dispose(this)}parentModel(){const e=this.target().parentTarget();return e?e.model(_s):null}}const bs={AttrModified:Symbol("AttrModified"),AttrRemoved:Symbol("AttrRemoved"),CharacterDataModified:Symbol("CharacterDataModified"),DOMMutated:Symbol("DOMMutated"),NodeInserted:Symbol("NodeInserted"),NodeRemoved:Symbol("NodeRemoved"),DocumentUpdated:Symbol("DocumentUpdated"),ChildNodeCountUpdated:Symbol("ChildNodeCountUpdated"),DistributedNodesChanged:Symbol("DistributedNodesChanged"),MarkersChanged:Symbol("MarkersChanged")};class fs{constructor(e){this._domModel=e}documentUpdated(){this._domModel._documentUpdated()}attributeModified({nodeId:e,name:t,value:s}){this._domModel._attributeModified(e,t,s)}attributeRemoved({nodeId:e,name:t}){this._domModel._attributeRemoved(e,t)}inlineStyleInvalidated({nodeIds:e}){this._domModel._inlineStyleInvalidated(e)}characterDataModified({nodeId:e,characterData:t}){this._domModel._characterDataModified(e,t)}setChildNodes({parentId:e,nodes:t}){this._domModel._setChildNodes(e,t)}childNodeCountUpdated({nodeId:e,childNodeCount:t}){this._domModel._childNodeCountUpdated(e,t)}childNodeInserted({parentNodeId:e,previousNodeId:t,node:s}){this._domModel._childNodeInserted(e,t,s)}childNodeRemoved({parentNodeId:e,nodeId:t}){this._domModel._childNodeRemoved(e,t)}shadowRootPushed({hostId:e,root:t}){this._domModel._shadowRootPushed(e,t)}shadowRootPopped({hostId:e,rootId:t}){this._domModel._shadowRootPopped(e,t)}pseudoElementAdded({parentId:e,pseudoElement:t}){this._domModel._pseudoElementAdded(e,t)}pseudoElementRemoved({parentId:e,pseudoElementId:t}){this._domModel._pseudoElementRemoved(e,t)}distributedNodesUpdated({insertionPointId:e,distributedNodes:t}){this._domModel._distributedNodesUpdated(e,t)}}let vs;class ys{constructor(){this._stack=[],this._index=0,this._lastModelWithMinorChange=null}static instance(e={forceNew:null}){const{forceNew:t}=e;return vs&&!t||(vs=new ys),vs}async _markUndoableState(e,t){this._lastModelWithMinorChange&&e!==this._lastModelWithMinorChange&&(this._lastModelWithMinorChange.markUndoableState(),this._lastModelWithMinorChange=null),t&&this._lastModelWithMinorChange===e||(this._stack=this._stack.slice(0,this._index),this._stack.push(e),this._index=this._stack.length,t?this._lastModelWithMinorChange=e:(await e._agent.invoke_markUndoableState(),this._lastModelWithMinorChange=null))}async undo(){if(0===this._index)return Promise.resolve();--this._index,this._lastModelWithMinorChange=null,await this._stack[this._index]._agent.invoke_undo()}async redo(){if(this._index>=this._stack.length)return Promise.resolve();++this._index,this._lastModelWithMinorChange=null,await this._stack[this._index-1]._agent.invoke_redo()}_dispose(e){let t=0;for(let s=0;s<this._index;++s)this._stack[s]===e&&++t;S.removeElement(this._stack,e),this._index-=t,this._lastModelWithMinorChange===e&&(this._lastModelWithMinorChange=null)}}N.register(_s,O.DOM,!0);var ks=Object.freeze({__proto__:null,DOMNode:us,DeferredDOMNode:gs,DOMNodeShortcut:ms,DOMDocument:ps,DOMModel:_s,Events:bs,DOMModelUndoStack:ys,Attribute:undefined});class Ss{constructor(e,t,s,i,o,n,a,l,d,c){this._resourceTreeModel=e,this._request=t,this.url=s,this._url,this._documentURL=i,this._frameId=o,this._loaderId=n,this._type=a||r.resourceTypes.Other,this._mimeType=l,this._lastModified=d&&w.isValid(d)?d:null,this._contentSize=c,this._content,this._contentLoadError,this._contentEncoded,this._pendingContentCallbacks=[],this._request&&!this._request.finished&&this._request.addEventListener(Be.FinishedLoading,this._requestFinished,this)}lastModified(){if(this._lastModified||!this._request)return this._lastModified;const e=this._request.responseLastModified(),t=e?new Date(e):null;return this._lastModified=t&&w.isValid(t)?t:null,this._lastModified}contentSize(){return"number"!=typeof this._contentSize&&this._request?this._request.resourceSize:this._contentSize}get request(){return this._request}get url(){return this._url}set url(e){this._url=e,this._parsedURL=new t.ParsedURL(e)}get parsedURL(){return this._parsedURL}get documentURL(){return this._documentURL}get frameId(){return this._frameId}get loaderId(){return this._loaderId}get displayName(){return this._parsedURL?this._parsedURL.displayName:""}resourceType(){return this._request?this._request.resourceType():this._type}get mimeType(){return this._request?this._request.mimeType:this._mimeType}get content(){return this._content}contentURL(){return this._url}contentType(){return this.resourceType()===r.resourceTypes.Document&&-1!==this.mimeType.indexOf("javascript")?r.resourceTypes.Script:this.resourceType()}async contentEncoded(){return await this.requestContent(),this._contentEncoded}requestContent(){return void 0!==this._content?Promise.resolve({content:this._content,isEncoded:this._contentEncoded}):new Promise((e=>{this._pendingContentCallbacks.push(e),this._request&&!this._request.finished||this._innerRequestContent()}))}canonicalMimeType(){return this.contentType().canonicalMimeType()||this.mimeType}async searchInContent(e,t,s){if(!this.frameId)return[];if(this.request)return this.request.searchInContent(e,t,s);return(await this._resourceTreeModel.target().pageAgent().invoke_searchInResource({frameId:this.frameId,url:this.url,query:e,caseSensitive:t,isRegex:s})).result||[]}async populateImageSource(e){const{content:t}=await this.requestContent(),s=this._contentEncoded;e.src=T.contentAsDataURL(t,this._mimeType,s)||this._url}_requestFinished(){this._request&&this._request.removeEventListener(Be.FinishedLoading,this._requestFinished,this),this._pendingContentCallbacks.length&&this._innerRequestContent()}async _innerRequestContent(){if(this._contentRequested)return;let e;if(this._contentRequested=!0,this.request){const t=await this.request.contentData();this._content=t.content,this._contentEncoded=t.encoded,e={content:t.content,isEncoded:t.encoded}}else{const t=await this._resourceTreeModel.target().pageAgent().invoke_getResourceContent({frameId:this.frameId,url:this.url}),s=t.getError();s?(this._contentLoadError=s,this._content=null,e={content:null,error:s,isEncoded:!1}):(this._content=t.content,this._contentLoadError=null,e={content:t.content,isEncoded:t.base64Encoded}),this._contentEncoded=t.base64Encoded}null===this._content&&(this._contentEncoded=!1);for(const t of this._pendingContentCallbacks.splice(0))t(e);delete this._contentRequested}hasTextContent(){return!!this._type.isTextType()||this._type===r.resourceTypes.Other&&(Boolean(this._content)&&!this._contentEncoded)}frame(){return this._resourceTreeModel.frameForId(this._frameId)}statusCode(){return this._request?this._request.statusCode:0}}var ws=Object.freeze({__proto__:null,Resource:Ss});class Cs extends N{constructor(e){super(e),this._mainSecurityOrigin="",this._unreachableMainSecurityOrigin="",this._securityOrigins=new Set}updateSecurityOrigins(e){const t=this._securityOrigins;this._securityOrigins=e;for(const e of t)this._securityOrigins.has(e)||this.dispatchEventToListeners(Is.SecurityOriginRemoved,e);for(const e of this._securityOrigins)t.has(e)||this.dispatchEventToListeners(Is.SecurityOriginAdded,e)}securityOrigins(){return[...this._securityOrigins]}mainSecurityOrigin(){return this._mainSecurityOrigin}unreachableMainSecurityOrigin(){return this._unreachableMainSecurityOrigin}setMainSecurityOrigin(e,t){this._mainSecurityOrigin=e,this._unreachableMainSecurityOrigin=t||null,this.dispatchEventToListeners(Is.MainSecurityOriginChanged,{mainSecurityOrigin:this._mainSecurityOrigin,unreachableMainSecurityOrigin:this._unreachableMainSecurityOrigin})}}const Is={SecurityOriginAdded:Symbol("SecurityOriginAdded"),SecurityOriginRemoved:Symbol("SecurityOriginRemoved"),MainSecurityOriginChanged:Symbol("MainSecurityOriginChanged")};N.register(Cs,O.None,!1);var Rs=Object.freeze({__proto__:null,SecurityOriginManager:Cs,Events:Is});class Ts extends N{constructor(e){super(e);const t=e.model(ve);t&&(t.addEventListener(ye.RequestFinished,this._onRequestFinished,this),t.addEventListener(ye.RequestUpdateDropped,this._onRequestUpdateDropped,this)),this._agent=e.pageAgent(),this._agent.invoke_enable(),this._securityOriginManager=e.model(Cs),e.registerPageDispatcher(new Ps(this)),this._frames=new Map,this._cachedResourcesProcessed=!1,this._pendingReloadOptions=null,this._reloadSuspensionCount=0,this._isInterstitialShowing=!1,this.mainFrame=null,this._agent.invoke_getResourceTree().then((e=>{this._processCachedResources(e.getError()?null:e.frameTree)}))}static frameForRequest(e){const t=ve.forRequest(e),s=t?t.target().model(Ts):null;return s?s.frameForId(e.frameId):null}static frames(){const e=[];for(const t of F.instance().models(Ts))e.push(...t._frames.values());return e}static resourceForURL(e){for(const t of F.instance().models(Ts)){const s=t.mainFrame,i=s?s.resourceForURL(e):null;if(i)return i}return null}static reloadAllPages(e,t){for(const s of F.instance().models(Ts))s.target().parentTarget()||s.reloadPage(e,t)}domModel(){return this.target().model(_s)}_processCachedResources(e){e&&":"!==e.frame.url&&(this.dispatchEventToListeners(xs.WillLoadCachedResources),this._addFramesRecursively(null,e),this.target().setInspectedURL(e.frame.url)),this._cachedResourcesProcessed=!0;const t=this.target().model(ti);t&&(t.setExecutionContextComparator(this._executionContextComparator.bind(this)),t.fireExecutionContextOrderChanged()),this.dispatchEventToListeners(xs.CachedResourcesLoaded,this)}cachedResourcesLoaded(){return this._cachedResourcesProcessed}isInterstitialShowing(){return this._isInterstitialShowing}_addFrame(e,t){this._frames.set(e.id,e),e.isMainFrame()&&(this.mainFrame=e),this.dispatchEventToListeners(xs.FrameAdded,e),this._updateSecurityOrigins()}_frameAttached(e,t,s){const i=t&&this._frames.get(t)||null;if(!this._cachedResourcesProcessed&&i)return null;if(this._frames.has(e))return null;const r=new Ms(this,i,e,null,s||null);return t&&!i&&(r._crossTargetParentFrameId=t),r.isMainFrame()&&this.mainFrame&&this._frameDetached(this.mainFrame.id),this._addFrame(r,!0),r}_frameNavigated(e){const t=e.parentId&&this._frames.get(e.parentId)||null;if(!this._cachedResourcesProcessed&&t)return;let s=this._frames.get(e.id)||null;if(!s&&(s=this._frameAttached(e.id,e.parentId||""),console.assert(Boolean(s)),!s))return;this.dispatchEventToListeners(xs.FrameWillNavigate,s),s._navigate(e),this.dispatchEventToListeners(xs.FrameNavigated,s),s.isMainFrame()&&this.dispatchEventToListeners(xs.MainFrameNavigated,s);const i=s.resources();for(let e=0;e<i.length;++e)this.dispatchEventToListeners(xs.ResourceAdded,i[e]);s.isMainFrame()&&this.target().setInspectedURL(s.url),this._updateSecurityOrigins()}_frameDetached(e){if(!this._cachedResourcesProcessed)return;const t=this._frames.get(e);if(!t)return;const s=t.sameTargetParentFrame();s?s._removeChildFrame(t):t._remove(),this._updateSecurityOrigins()}_onRequestFinished(e){if(!this._cachedResourcesProcessed)return;const t=e.data;if(t.failed||t.resourceType()===r.resourceTypes.XHR)return;const s=this._frames.get(t.frameId);s&&s._addRequest(t)}_onRequestUpdateDropped(e){if(!this._cachedResourcesProcessed)return;const t=e.data,s=t.frameId,i=this._frames.get(s);if(!i)return;const o=t.url;if(i._resourcesMap.get(o))return;const n=new Ss(this,null,o,i.url,s,t.loaderId,r.resourceTypes[t.resourceType],t.mimeType,t.lastModified,null);i.addResource(n)}frameForId(e){return this._frames.get(e)||null}forAllResources(e){return!!this.mainFrame&&this.mainFrame._callForFrameResources(e)}frames(){return[...this._frames.values()]}resourceForURL(e){return this.mainFrame?this.mainFrame.resourceForURL(e):null}_addFramesRecursively(e,t){const s=t.frame,i=new Ms(this,e,s.id,s,null);!e&&s.parentId&&(i._crossTargetParentFrameId=s.parentId),this._addFrame(i);for(const e of t.childFrames||[])this._addFramesRecursively(i,e);for(let e=0;e<t.resources.length;++e){const o=t.resources[e],n=this._createResourceFromFramePayload(s,o.url,r.resourceTypes[o.type],o.mimeType,o.lastModified||null,o.contentSize||null);i.addResource(n)}if(!i._resourcesMap.get(s.url)){const e=this._createResourceFromFramePayload(s,s.url,r.resourceTypes.Document,s.mimeType,null,null);i.addResource(e)}}_createResourceFromFramePayload(e,t,s,i,r,o){const n="number"==typeof r?new Date(1e3*r):null;return new Ss(this,null,t,e.url,e.id,e.loaderId,s,i,n,o)}suspendReload(){this._reloadSuspensionCount++}resumeReload(){if(this._reloadSuspensionCount--,console.assert(this._reloadSuspensionCount>=0,"Unbalanced call to ResourceTreeModel.resumeReload()"),!this._reloadSuspensionCount&&this._pendingReloadOptions){const{ignoreCache:e,scriptToEvaluateOnLoad:t}=this._pendingReloadOptions;this.reloadPage(e,t)}}reloadPage(e,t){this._pendingReloadOptions||this.dispatchEventToListeners(xs.PageReloadRequested,this),this._reloadSuspensionCount?this._pendingReloadOptions={ignoreCache:e,scriptToEvaluateOnLoad:t}:(this._pendingReloadOptions=null,this.dispatchEventToListeners(xs.WillReloadPage),this._agent.invoke_reload({ignoreCache:e,scriptToEvaluateOnLoad:t}))}navigate(e){return this._agent.invoke_navigate({url:e})}async navigationHistory(){const e=await this._agent.invoke_getNavigationHistory();return e.getError()?null:{currentIndex:e.currentIndex,entries:e.entries}}navigateToHistoryEntry(e){this._agent.invoke_navigateToHistoryEntry({entryId:e.id})}async fetchAppManifest(){const e=await this._agent.invoke_getAppManifest();return e.getError()?{url:e.url,data:null,errors:[]}:{url:e.url,data:e.data||null,errors:e.errors}}async getInstallabilityErrors(){return(await this._agent.invoke_getInstallabilityErrors()).installabilityErrors||[]}async getManifestIcons(){return{primaryIcon:(await this._agent.invoke_getManifestIcons()).primaryIcon||null}}_executionContextComparator(e,t){function s(e){let t=e;const s=[];for(;t;)s.push(t),t=t.sameTargetParentFrame();return s.reverse()}if(e.target()!==t.target())return oi.comparator(e,t);const i=e.frameId?s(this.frameForId(e.frameId)):[],r=t.frameId?s(this.frameForId(t.frameId)):[];let o,n;for(let e=0;;e++)if(!i[e]||!r[e]||i[e]!==r[e]){o=i[e],n=r[e];break}return!o&&n?-1:!n&&o?1:o&&n?o.id.localeCompare(n.id):oi.comparator(e,t)}_getSecurityOriginData(){const e=new Set;let s=null,i=null;for(const r of this._frames.values()){const o=r.securityOrigin;if(o&&(e.add(o),r.isMainFrame()&&(s=o,r.unreachableUrl()))){i=new t.ParsedURL(r.unreachableUrl()).securityOrigin()}}return{securityOrigins:e,mainSecurityOrigin:s,unreachableMainSecurityOrigin:i}}_updateSecurityOrigins(){const e=this._getSecurityOriginData();this._securityOriginManager.setMainSecurityOrigin(e.mainSecurityOrigin||"",e.unreachableMainSecurityOrigin||""),this._securityOriginManager.updateSecurityOrigins(e.securityOrigins)}getMainSecurityOrigin(){const e=this._getSecurityOriginData();return e.mainSecurityOrigin||e.unreachableMainSecurityOrigin}}const xs={FrameAdded:Symbol("FrameAdded"),FrameNavigated:Symbol("FrameNavigated"),FrameDetached:Symbol("FrameDetached"),FrameResized:Symbol("FrameResized"),FrameWillNavigate:Symbol("FrameWillNavigate"),MainFrameNavigated:Symbol("MainFrameNavigated"),ResourceAdded:Symbol("ResourceAdded"),WillLoadCachedResources:Symbol("WillLoadCachedResources"),CachedResourcesLoaded:Symbol("CachedResourcesLoaded"),DOMContentLoaded:Symbol("DOMContentLoaded"),LifecycleEvent:Symbol("LifecycleEvent"),Load:Symbol("Load"),PageReloadRequested:Symbol("PageReloadRequested"),WillReloadPage:Symbol("WillReloadPage"),InterstitialShown:Symbol("InterstitialShown"),InterstitialHidden:Symbol("InterstitialHidden")};class Ms{constructor(e,t,s,i,r){this._model=e,this._sameTargetParentFrame=t,this._id=s,this._crossTargetParentFrameId=null,this._loaderId=i&&i.loaderId||"",this._name=i&&i.name,this._url=i&&i.url||"",this._domainAndRegistry=i&&i.domainAndRegistry||"",this._securityOrigin=i&&i.securityOrigin,this._mimeType=i&&i.mimeType,this._unreachableUrl=i&&i.unreachableUrl||"",this._adFrameType=i&&i.adFrameType||Protocol.Page.AdFrameType.None,this._secureContextType=i&&i.secureContextType,this._crossOriginIsolatedContextType=i&&i.crossOriginIsolatedContextType,this._gatedAPIFeatures=i&&i.gatedAPIFeatures,this._creationStackTrace=r,this._childFrames=new Set,this._resourcesMap=new Map,this._sameTargetParentFrame&&this._sameTargetParentFrame._childFrames.add(this)}isSecureContext(){return null!==this._secureContextType&&this._secureContextType.startsWith("Secure")}getSecureContextType(){return this._secureContextType}isCrossOriginIsolated(){return null!==this._crossOriginIsolatedContextType&&this._crossOriginIsolatedContextType.startsWith("Isolated")}getCrossOriginIsolatedContextType(){return this._crossOriginIsolatedContextType}getGatedAPIFeatures(){return this._gatedAPIFeatures}_navigate(e){this._loaderId=e.loaderId,this._name=e.name,this._url=e.url,this._domainAndRegistry=e.domainAndRegistry,this._securityOrigin=e.securityOrigin,this._mimeType=e.mimeType,this._unreachableUrl=e.unreachableUrl||"",this._adFrameType=e.adFrameType||Protocol.Page.AdFrameType.None,this._secureContextType=e.secureContextType,this._crossOriginIsolatedContextType=e.crossOriginIsolatedContextType,this._gatedAPIFeatures=e.gatedAPIFeatures;const t=this._resourcesMap.get(this._url);this._resourcesMap.clear(),this._removeChildFrames(),t&&t.loaderId===this._loaderId&&this.addResource(t)}resourceTreeModel(){return this._model}get id(){return this._id}get name(){return this._name||""}get url(){return this._url}domainAndRegistry(){return this._domainAndRegistry}get securityOrigin(){return this._securityOrigin}unreachableUrl(){return this._unreachableUrl}get loaderId(){return this._loaderId}adFrameType(){return this._adFrameType}get childFrames(){return[...this._childFrames]}sameTargetParentFrame(){return this._sameTargetParentFrame}crossTargetParentFrame(){if(!this._crossTargetParentFrameId)return null;const e=this._model.target().parentTarget();if(!e)return null;const t=e.model(Ts);return t&&t._frames.get(this._crossTargetParentFrameId)||null}parentFrame(){return this.sameTargetParentFrame()||this.crossTargetParentFrame()}isMainFrame(){return!this._sameTargetParentFrame}isTopFrame(){return!this._model.target().parentTarget()&&!this._sameTargetParentFrame&&!this._crossTargetParentFrameId}_removeChildFrame(e){this._childFrames.delete(e),e._remove()}_removeChildFrames(){const e=this._childFrames;this._childFrames=new Set;for(const t of e)t._remove()}_remove(){this._removeChildFrames(),this._model._frames.delete(this.id),this._model.dispatchEventToListeners(xs.FrameDetached,this)}addResource(e){this._resourcesMap.get(e.url)!==e&&(this._resourcesMap.set(e.url,e),this._model.dispatchEventToListeners(xs.ResourceAdded,e))}_addRequest(e){let t=this._resourcesMap.get(e.url());t&&t.request===e||(t=new Ss(this._model,e,e.url(),e.documentURL,e.frameId,e.loaderId,e.resourceType(),e.mimeType,null,null),this._resourcesMap.set(t.url,t),this._model.dispatchEventToListeners(xs.ResourceAdded,t))}resources(){return Array.from(this._resourcesMap.values())}resourceForURL(e){const t=this._resourcesMap.get(e);if(t)return t;for(const t of this._childFrames){const s=t.resourceForURL(e);if(s)return s}return null}_callForFrameResources(e){for(const t of this._resourcesMap.values())if(e(t))return!0;for(const t of this._childFrames)if(t._callForFrameResources(e))return!0;return!1}displayName(){if(this.isTopFrame())return o.UIString("top");const e=new t.ParsedURL(this._url).displayName;return e?this._name?this._name+" ("+e+")":e:o.UIString("<iframe>")}async getOwnerDeferredDOMNode(){const e=this.parentFrame();return e?e.resourceTreeModel().domModel().getOwnerNodeForFrame(this._id):null}async getOwnerDOMNodeOrDocument(){const e=await this.getOwnerDeferredDOMNode();return e?e.resolvePromise():this.isTopFrame()?this.resourceTreeModel().domModel().requestDocument():null}async highlight(){const e=this.parentFrame(),t=this.resourceTreeModel().target().parentTarget(),s=async e=>{const t=await e.getOwnerNodeForFrame(this._id);t&&e.overlayModel().highlightInOverlay({deferredNode:t,selectorList:""},"all",!0)};if(e)return s(e.resourceTreeModel().domModel());if(t){const e=t.model(_s);if(e)return s(e)}const i=await this.resourceTreeModel().domModel().requestDocument();i&&this.resourceTreeModel().domModel().overlayModel().highlightInOverlay({node:i,selectorList:""},"all",!0)}}class Ps{constructor(e){this._resourceTreeModel=e}domContentEventFired({timestamp:e}){this._resourceTreeModel.dispatchEventToListeners(xs.DOMContentLoaded,e)}loadEventFired({timestamp:e}){this._resourceTreeModel.dispatchEventToListeners(xs.Load,{resourceTreeModel:this._resourceTreeModel,loadTime:e})}lifecycleEvent({frameId:e,loaderId:t,name:s,timestamp:i}){this._resourceTreeModel.dispatchEventToListeners(xs.LifecycleEvent,{frameId:e,name:s})}frameAttached({frameId:e,parentFrameId:t,stack:s}){this._resourceTreeModel._frameAttached(e,t,s)}frameNavigated({frame:e}){this._resourceTreeModel._frameNavigated(e)}documentOpened({frame:e}){this._resourceTreeModel._frameNavigated(e)}frameDetached({frameId:e}){this._resourceTreeModel._frameDetached(e)}frameStartedLoading({frameId:e}){}frameStoppedLoading({frameId:e}){}frameRequestedNavigation({frameId:e}){}frameScheduledNavigation({frameId:e,delay:t}){}frameClearedScheduledNavigation({frameId:e}){}navigatedWithinDocument({frameId:e,url:t}){}frameResized(){this._resourceTreeModel.dispatchEventToListeners(xs.FrameResized,null)}javascriptDialogOpening({url:e,message:t,type:s,hasBrowserHandler:i,defaultPrompt:r}){i||this._resourceTreeModel._agent.invoke_handleJavaScriptDialog({accept:!1})}javascriptDialogClosed({result:e,userInput:t}){}screencastFrame({data:e,metadata:t,sessionId:s}){}screencastVisibilityChanged({visible:e}){}interstitialShown(){this._resourceTreeModel._isInterstitialShowing=!0,this._resourceTreeModel.dispatchEventToListeners(xs.InterstitialShown)}interstitialHidden(){this._resourceTreeModel._isInterstitialShowing=!1,this._resourceTreeModel.dispatchEventToListeners(xs.InterstitialHidden)}windowOpen({url:e,windowName:t,windowFeatures:s,userGesture:i}){}compilationCacheProduced({url:e,data:t}){}fileChooserOpened({mode:e}){}downloadWillBegin({frameId:e,url:t}){}downloadProgress(){}}N.register(Ts,O.DOM,!0);var Ls=Object.freeze({__proto__:null,ResourceTreeModel:Ts,Events:xs,ResourceTreeFrame:Ms,PageDispatcher:Ps,SecurityOriginData:undefined});class Es{constructor(e,t,s,i,r,o,n,a,l,d,c,h,u,g,m,p,_,b,f){this.debuggerModel=e,this.scriptId=t,this.sourceURL=s,this.lineOffset=i,this.columnOffset=r,this.endLine=o,this.endColumn=n,this.executionContextId=a,this.hash=l,this._isContentScript=d,this._isLiveEdit=c,this.sourceMapURL=h,this.debugSymbols=b,this.hasSourceURL=u,this.contentLength=g,this._originalContentProvider=null,this.originStackTrace=m,this._codeOffset=p,this._language=_,this._contentPromise=null,this._embedderName=f}embedderName(){return this._embedderName}target(){return this.debuggerModel.target()}static _trimSourceURLComment(e){let t=e.lastIndexOf("//# sourceURL=");if(-1===t&&(t=e.lastIndexOf("//@ sourceURL="),-1===t))return e;const s=e.lastIndexOf("\n",t);if(-1===s)return e;return e.substr(s+1).match(As)?e.substr(0,s):e}isContentScript(){return this._isContentScript}codeOffset(){return this._codeOffset}isJavaScript(){return this._language===Protocol.Debugger.ScriptLanguage.JavaScript}isWasm(){return this._language===Protocol.Debugger.ScriptLanguage.WebAssembly}scriptLanguage(){return this._language}executionContext(){return this.debuggerModel.runtimeModel().executionContext(this.executionContextId)}isLiveEdit(){return this._isLiveEdit}contentURL(){return this.sourceURL}contentType(){return r.resourceTypes.Script}contentEncoded(){return Promise.resolve(!1)}requestContent(){return this._contentPromise||(this._contentPromise=this.originalContentProvider().requestContent()),this._contentPromise}async getWasmBytecode(){const e=await this.debuggerModel.target().debuggerAgent().invoke_getWasmBytecode({scriptId:this.scriptId});return(await fetch("data:application/wasm;base64,"+e.bytecode)).arrayBuffer()}originalContentProvider(){if(!this._originalContentProvider){let e;this._originalContentProvider=new P.StaticContentProvider(this.contentURL(),this.contentType(),(()=>(e||(e=(async()=>{if(!this.scriptId)return{content:null,error:k`Script removed or deleted.`,isEncoded:!1};try{const e=await this.debuggerModel.target().debuggerAgent().invoke_getScriptSource({scriptId:this.scriptId});if(e.getError())throw new Error(e.getError());const{scriptSource:t,bytecode:s}=e;if(s)return{content:s,isEncoded:!0};let i=t||"";return this.hasSourceURL&&(i=Es._trimSourceURLComment(i)),{content:i,isEncoded:!1}}catch(e){return{content:null,error:k`Unable to fetch script source.`,isEncoded:!1}}})()),e)))}return this._originalContentProvider}async searchInContent(e,t,s){if(!this.scriptId)return[];return((await this.debuggerModel.target().debuggerAgent().invoke_searchInContent({scriptId:this.scriptId,query:e,caseSensitive:t,isRegex:s})).result||[]).map((e=>new T.SearchMatch(e.lineNumber,e.lineContent)))}_appendSourceURLCommentIfNeeded(e){return this.hasSourceURL?e+"\n //# sourceURL="+this.sourceURL:e}async editSource(e,t){if(e=Es._trimSourceURLComment(e),e=this._appendSourceURLCommentIfNeeded(e),!this.scriptId)return void t("Script failed to parse");const{content:s}=await this.requestContent();if(s===e)return void t(null);const i=await this.debuggerModel.target().debuggerAgent().invoke_setScriptSource({scriptId:this.scriptId,scriptSource:e});i.getError()||i.exceptionDetails||(this._contentPromise=Promise.resolve({content:e,isEncoded:!1}));const r=Boolean(i.stackChanged);t(i.getError()||null,i.exceptionDetails,i.callFrames,i.asyncStackTrace,i.asyncStackTraceId,r)}rawLocation(e,t){return this.containsLocation(e,t)?new zs(this.debuggerModel,this.scriptId,e,t):null}toRelativeLocation(e){console.assert(e.scriptId===this.scriptId,"`toRelativeLocation` must be used with location of the same script");const t=e.lineNumber-this.lineOffset;return[t,(e.columnNumber||0)-(0===t?this.columnOffset:0)]}isInlineScript(){const e=!this.lineOffset&&!this.columnOffset;return!this.isWasm()&&Boolean(this.sourceURL)&&!e}isAnonymousScript(){return!this.sourceURL}isInlineScriptWithSourceURL(){return Boolean(this.hasSourceURL)&&this.isInlineScript()}async setBlackboxedRanges(e){return!(await this.debuggerModel.target().debuggerAgent().invoke_setBlackboxedRanges({scriptId:this.scriptId,positions:e})).getError()}containsLocation(e,t){const s=e===this.lineOffset&&t>=this.columnOffset||e>this.lineOffset,i=e<this.endLine||e===this.endLine&&t<=this.endColumn;return s&&i}get frameId(){return"string"!=typeof this[Ns]&&(this[Ns]=function(e){const t=e.executionContext();if(t)return t.frameId||"";const s=e.debuggerModel.target().model(Ts);if(!s||!s.mainFrame)return"";return s.mainFrame.id}(this)),this[Ns]||""}createPageResourceLoadInitiator(){return{target:this.target(),frameId:this.frameId,initiatorUrl:this.embedderName()}}}const Ns=Symbol("frameid");const As=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/;var Os=Object.freeze({__proto__:null,Script:Es,sourceURLRegex:As});function Ds(e){if(0===e.length)return[];e.sort(Ws.comparator);let t=e[0];const s=[];for(let i=1;i<e.length;++i){const r=e[i];if(t.overlap(r)){const e=t.end.compareTo(r.end)>0?t.end:r.end;t=new Ws(t.scriptId,t.start,e)}else s.push(t),t=r}return s.push(t),s}const Bs={StepInto:Symbol("StepInto"),StepOut:Symbol("StepOut"),StepOver:Symbol("StepOver")};class Fs extends N{constructor(t){super(t),t.registerDebuggerDispatcher(new js(this)),this._agent=t.debuggerAgent(),this._runtimeModel=t.model(ti),this._sourceMapManager=new jt(t),this._sourceMapIdToScript=new Map,this._debuggerPausedDetails=null,this._scripts=new Map,this._scriptsBySourceURL=new Map,this._discardableScripts=[],this._continueToLocationCallback=null,this._selectedCallFrame=null,this._debuggerEnabled=!1,this._debuggerId=null,this._skipAllPausesTimeout=0,this._beforePausedCallback=null,this._computeAutoStepRangesCallback=null,this._expandCallFramesCallback=null,this._evaluateOnCallFrameCallback=null,this._ignoreDebuggerPausedEvents=!1,this._breakpointResolvedEventTarget=new e.ObjectWrapper,this._autoStepOver=!1,this._isPausing=!1,i.Settings.instance().moduleSetting("pauseOnExceptionEnabled").addChangeListener(this._pauseOnExceptionStateChanged,this),i.Settings.instance().moduleSetting("pauseOnCaughtException").addChangeListener(this._pauseOnExceptionStateChanged,this),i.Settings.instance().moduleSetting("disableAsyncStackTraces").addChangeListener(this._asyncStackTracesStateChanged,this),i.Settings.instance().moduleSetting("breakpointsActive").addChangeListener(this._breakpointsActiveChanged,this),t.suspended()||this._enableDebugger(),this._sourceMapManager.setEnabled(i.Settings.instance().moduleSetting("jsSourceMapsEnabled").get()),i.Settings.instance().moduleSetting("jsSourceMapsEnabled").addChangeListener((e=>this._sourceMapManager.setEnabled(e.data)));const s=t.model(Ts);s&&s.addEventListener(xs.FrameNavigated,this._onFrameNavigated,this)}static _sourceMapId(e,t,s){return s?e+":"+t+":"+s:null}sourceMapManager(){return this._sourceMapManager}runtimeModel(){return this._runtimeModel}debuggerEnabled(){return Boolean(this._debuggerEnabled)}ignoreDebuggerPausedEvents(e){this._ignoreDebuggerPausedEvents=e}async _enableDebugger(){if(this._debuggerEnabled)return Promise.resolve();this._debuggerEnabled=!0;const e=L.Runtime.queryParam("remoteFrontend")||L.Runtime.queryParam("ws")?1e7:1e8,t=this._agent.invoke_enable({maxScriptsCacheSize:e});t.then(this._registerDebugger.bind(this)),this._pauseOnExceptionStateChanged(),this._asyncStackTracesStateChanged(),i.Settings.instance().moduleSetting("breakpointsActive").get()||this._breakpointsActiveChanged(),Us&&this._pauseOnAsyncCall(Us),this.dispatchEventToListeners(Hs.DebuggerWasEnabled,this),await t}async syncDebuggerId(){const e=L.Runtime.queryParam("remoteFrontend")||L.Runtime.queryParam("ws")?1e7:1e8,t=this._agent.invoke_enable({maxScriptsCacheSize:e});return t.then(this._registerDebugger.bind(this)),t}_onFrameNavigated(){Fs._shouldResyncDebuggerId||(Fs._shouldResyncDebuggerId=!0)}_registerDebugger(e){if(e.getError())return;const{debuggerId:t}=e;qs.set(t,this),this._debuggerId=t,this.dispatchEventToListeners(Hs.DebuggerIsReadyToPause,this)}isReadyToPause(){return Boolean(this._debuggerId)}static async modelForDebuggerId(e){return Fs._shouldResyncDebuggerId&&(await Fs.resyncDebuggerIdForModels(),Fs._shouldResyncDebuggerId=!1),qs.get(e)||null}static async resyncDebuggerIdForModels(){const e=qs.values();for(const t of e)t.debuggerEnabled()&&await t.syncDebuggerId()}async _disableDebugger(){if(!this._debuggerEnabled)return Promise.resolve();this._debuggerEnabled=!1,await this._asyncStackTracesStateChanged(),await this._agent.invoke_disable(),this._isPausing=!1,this.globalObjectCleared(),this.dispatchEventToListeners(Hs.DebuggerWasDisabled),"string"==typeof this._debuggerId&&qs.delete(this._debuggerId)}_skipAllPauses(e){this._skipAllPausesTimeout&&(clearTimeout(this._skipAllPausesTimeout),this._skipAllPausesTimeout=0),this._agent.invoke_setSkipAllPauses({skip:e})}skipAllPausesUntilReloadOrTimeout(e){this._skipAllPausesTimeout&&clearTimeout(this._skipAllPausesTimeout),this._agent.invoke_setSkipAllPauses({skip:!0}),this._skipAllPausesTimeout=window.setTimeout(this._skipAllPauses.bind(this,!1),e)}_pauseOnExceptionStateChanged(){let e;e=i.Settings.instance().moduleSetting("pauseOnExceptionEnabled").get()?i.Settings.instance().moduleSetting("pauseOnCaughtException").get()?Protocol.Debugger.SetPauseOnExceptionsRequestState.All:Protocol.Debugger.SetPauseOnExceptionsRequestState.Uncaught:Protocol.Debugger.SetPauseOnExceptionsRequestState.None,this._agent.invoke_setPauseOnExceptions({state:e})}_asyncStackTracesStateChanged(){const e=!i.Settings.instance().moduleSetting("disableAsyncStackTraces").get()&&this._debuggerEnabled?32:0;return this._agent.invoke_setAsyncCallStackDepth({maxDepth:e})}_breakpointsActiveChanged(){this._agent.invoke_setBreakpointsActive({active:i.Settings.instance().moduleSetting("breakpointsActive").get()})}setComputeAutoStepRangesCallback(e){this._computeAutoStepRangesCallback=e}async _computeAutoStepSkipList(e){let t=[];if(this._computeAutoStepRangesCallback&&this._debuggerPausedDetails){const[s]=this._debuggerPausedDetails.callFrames;t=await this._computeAutoStepRangesCallback.call(null,e,s)}return Ds(t.map((e=>new Ws(e.start.scriptId,new Vs(e.start.lineNumber,e.start.columnNumber),new Vs(e.end.lineNumber,e.end.columnNumber))))).map((e=>e.payload()))}async stepInto(){const e=await this._computeAutoStepSkipList(Bs.StepInto);this._agent.invoke_stepInto({breakOnAsyncCall:!1,skipList:e})}async stepOver(){this._autoStepOver=!0;const e=await this._computeAutoStepSkipList(Bs.StepOver);this._agent.invoke_stepOver({skipList:e})}async stepOut(){const e=await this._computeAutoStepSkipList(Bs.StepOut);0!==e.length?this._agent.invoke_stepOver({skipList:e}):this._agent.invoke_stepOut()}scheduleStepIntoAsync(){this._computeAutoStepSkipList(Bs.StepInto).then((e=>{this._agent.invoke_stepInto({breakOnAsyncCall:!0,skipList:e})}))}resume(){this._agent.invoke_resume({terminateOnResume:!1}),this._isPausing=!1}pause(){this._isPausing=!0,this._skipAllPauses(!1),this._agent.invoke_pause()}_pauseOnAsyncCall(e){return this._agent.invoke_pauseOnAsyncCall({parentStackTraceId:e})}async setBreakpointByURL(e,s,i,r){let o;if(this.target().type()===D.Node){o=`${t.ParsedURL.urlToPlatformPath(e,_.isWin()).escapeForRegExp()}|${e.escapeForRegExp()}`}let n=0;const a=this._scriptsBySourceURL.get(e)||[];for(let e=0,t=a.length;e<t;++e){const t=a[e];s===t.lineOffset&&(n=n?Math.min(n,t.columnOffset):t.columnOffset)}i=Math.max(i||0,n);const l=await this._agent.invoke_setBreakpointByUrl({lineNumber:s,url:o?void 0:e,urlRegex:o,columnNumber:i,condition:r});if(l.getError())return{locations:[],breakpointId:null};let d=[];return l.locations&&(d=l.locations.map((e=>zs.fromPayload(this,e)))),{locations:d,breakpointId:l.breakpointId}}async setBreakpointInAnonymousScript(e,t,s,i,r){const o=await this._agent.invoke_setBreakpointByUrl({lineNumber:s,scriptHash:t,columnNumber:i,condition:r}),n=o.getError();if(n)return"Either url or urlRegex must be specified."!==n?{locations:[],breakpointId:null}:this._setBreakpointBySourceId(e,s,i,r);let a=[];return o.locations&&(a=o.locations.map((e=>zs.fromPayload(this,e)))),{locations:a,breakpointId:o.breakpointId}}async _setBreakpointBySourceId(e,t,s,i){const r=await this._agent.invoke_setBreakpoint({location:{scriptId:e,lineNumber:t,columnNumber:s},condition:i});if(r.getError())return{breakpointId:null,locations:[]};let o=[];return r.actualLocation&&(o=[zs.fromPayload(this,r.actualLocation)]),{locations:o,breakpointId:r.breakpointId}}async removeBreakpoint(e){const t=await this._agent.invoke_removeBreakpoint({breakpointId:e});t.getError()&&console.error("Failed to remove breakpoint: "+t.getError())}async getPossibleBreakpoints(e,t,s){const i=await this._agent.invoke_getPossibleBreakpoints({start:e.payload(),end:t?t.payload():void 0,restrictToFunction:s});return i.getError()||!i.locations?[]:i.locations.map((e=>Gs.fromPayload(this,e)))}async fetchAsyncStackTrace(e){const t=await this._agent.invoke_getStackTrace({stackTraceId:e});return t.getError()?null:t.stackTrace}_breakpointResolved(e,t){this._breakpointResolvedEventTarget.dispatchEventToListeners(e,zs.fromPayload(this,t))}globalObjectCleared(){this._setDebuggerPausedDetails(null),this._reset(),this.dispatchEventToListeners(Hs.GlobalObjectCleared,this)}_reset(){for(const e of this._sourceMapIdToScript.values())this._sourceMapManager.detachSourceMap(e);this._sourceMapIdToScript.clear(),this._scripts.clear(),this._scriptsBySourceURL.clear(),this._discardableScripts=[],this._autoStepOver=!1}scripts(){return Array.from(this._scripts.values())}scriptForId(e){return this._scripts.get(e)||null}scriptsForSourceURL(e){return e&&this._scriptsBySourceURL.get(e)||[]}scriptsForExecutionContext(e){const t=[];for(const s of this._scripts.values())s.executionContextId===e.id&&t.push(s);return t}setScriptSource(e,t,s){const i=this._scripts.get(e);i&&i.editSource(t,this._didEditScriptSource.bind(this,e,t,s))}_didEditScriptSource(e,t,s,i,r,o,n,a,l){s(i,r),l?this.stepInto():!i&&o&&o.length&&this._debuggerPausedDetails&&this._pausedScript(o,this._debuggerPausedDetails.reason,this._debuggerPausedDetails.auxData,this._debuggerPausedDetails.breakpointIds,n,a)}get callFrames(){return this._debuggerPausedDetails?this._debuggerPausedDetails.callFrames:null}debuggerPausedDetails(){return this._debuggerPausedDetails}_setDebuggerPausedDetails(e){if(e){if(this._isPausing=!1,this._debuggerPausedDetails=e,this._beforePausedCallback&&!this._beforePausedCallback.call(null,e))return!1;this._autoStepOver=!1,this.dispatchEventToListeners(Hs.DebuggerPaused,this),this.setSelectedCallFrame(e.callFrames[0])}else this._isPausing=!1,this._debuggerPausedDetails=null,this.setSelectedCallFrame(null);return!0}setBeforePausedCallback(e){this._beforePausedCallback=e}setExpandCallFramesCallback(e){this._expandCallFramesCallback=e}setEvaluateOnCallFrameCallback(e){this._evaluateOnCallFrameCallback=e}async _pausedScript(e,t,s,i,r,o,n){if(this._ignoreDebuggerPausedEvents)return;if(n){Us=n;const e=[];for(const t of qs.values())e.push(t._pauseOnAsyncCall(n));return await Promise.all(e),void this.resume()}const a=new Xs(this,e,t,s,i,r,o);if(this._expandCallFramesCallback&&(a.callFrames=await this._expandCallFramesCallback.call(null,a.callFrames)),this._continueToLocationCallback){const e=this._continueToLocationCallback;if(this._continueToLocationCallback=null,e(a))return}this._setDebuggerPausedDetails(a)?l.fireEvent("DevTools.DebuggerPaused"):this._autoStepOver?this.stepOver():this.stepInto(),Us=null}_resumedScript(){this._setDebuggerPausedDetails(null),this.dispatchEventToListeners(Hs.DebuggerResumed,this)}_parsedScriptSource(e,t,s,i,r,o,n,a,l,d,c,h,u,g,m,p,_,b,f){const v=this._scripts.get(e);if(v)return v;let y=!1;l&&"isDefault"in l&&(y=!l.isDefault);const k=new Es(this,e,t,s,i,r,o,n,a,y,d,c,h,g,m,p,_,b,f);this._registerScript(k),this.dispatchEventToListeners(Hs.ParsedScriptSource,k);const S=Fs._sourceMapId(k.executionContextId,k.sourceURL,k.sourceMapURL);if(S&&!u){const e=this._sourceMapIdToScript.get(S);e&&this._sourceMapManager.detachSourceMap(e),this._sourceMapIdToScript.set(S,k),this._sourceMapManager.attachSourceMap(k,k.sourceURL,k.sourceMapURL)}return u&&k.isAnonymousScript()&&(this._discardableScripts.push(k),this._collectDiscardedScripts()),k}setSourceMapURL(e,t){let s=Fs._sourceMapId(e.executionContextId,e.sourceURL,e.sourceMapURL);s&&this._sourceMapIdToScript.get(s)===e&&this._sourceMapIdToScript.delete(s),this._sourceMapManager.detachSourceMap(e),e.sourceMapURL=t,s=Fs._sourceMapId(e.executionContextId,e.sourceURL,e.sourceMapURL),s&&(this._sourceMapIdToScript.set(s,e),this._sourceMapManager.attachSourceMap(e,e.sourceURL,e.sourceMapURL))}executionContextDestroyed(e){const t=Array.from(this._sourceMapIdToScript.keys());for(const s of t){const t=this._sourceMapIdToScript.get(s);t&&t.executionContextId===e.id&&(this._sourceMapIdToScript.delete(s),this._sourceMapManager.detachSourceMap(t))}}_registerScript(e){if(this._scripts.set(e.scriptId,e),e.isAnonymousScript())return;let t=this._scriptsBySourceURL.get(e.sourceURL);t||(t=[],this._scriptsBySourceURL.set(e.sourceURL,t)),t.push(e)}_unregisterScript(e){console.assert(e.isAnonymousScript()),this._scripts.delete(e.scriptId)}_collectDiscardedScripts(){if(this._discardableScripts.length<1e3)return;const e=this._discardableScripts.splice(0,100);for(const t of e)this._unregisterScript(t),this.dispatchEventToListeners(Hs.DiscardedAnonymousScriptSource,t)}createRawLocation(e,t,s){return this.createRawLocationByScriptId(e.scriptId,t,s)}createRawLocationByURL(e,t,s){let i=null;const r=this._scriptsBySourceURL.get(e)||[];for(let e=0,o=r.length;e<o;++e){const o=r[e];if(i||(i=o),!(o.lineOffset>t||o.lineOffset===t&&o.columnOffset>s||o.endLine<t||o.endLine===t&&o.endColumn<=s)){i=o;break}}return i?new zs(this,i.scriptId,t,s):null}createRawLocationByScriptId(e,t,s){return new zs(this,e,t,s)}createRawLocationsByStackTrace(e){const t=[];let s=e;for(;s;){for(const e of s.callFrames)t.push(e);s=s.parent}const i=[];for(const e of t){const t=this.createRawLocationByScriptId(e.scriptId,e.lineNumber,e.columnNumber);t&&i.push(t)}return i}isPaused(){return Boolean(this.debuggerPausedDetails())}isPausing(){return this._isPausing}setSelectedCallFrame(e){this._selectedCallFrame!==e&&(this._selectedCallFrame=e,this.dispatchEventToListeners(Hs.CallFrameSelected,this))}selectedCallFrame(){return this._selectedCallFrame}async evaluateOnSelectedCallFrame(e){const t=this.selectedCallFrame();if(!t)throw new Error("No call frame selected");return t.evaluate(e)}functionDetailsPromise(e){return e.getAllProperties(!1,!1).then(function(e){if(!e)return null;let t=null;if(e.internalProperties)for(const s of e.internalProperties)"[[FunctionLocation]]"===s.name&&(t=s.value);let s=null;if(e.properties)for(const t of e.properties)if("name"===t.name&&t.value&&"string"===t.value.type&&(s=t.value),"displayName"===t.name&&t.value&&"string"===t.value.type){s=t.value;break}let i=null;t&&(i=this.createRawLocationByScriptId(t.value.scriptId,t.value.lineNumber,t.value.columnNumber));return{location:i,functionName:s?s.value:""}}.bind(this))}async setVariableValue(e,t,s,i){const r=(await this._agent.invoke_setVariableValue({scopeNumber:e,variableName:t,newValue:s,callFrameId:i})).getError();return r&&console.error(r),r}addBreakpointListener(e,t,s){this._breakpointResolvedEventTarget.addEventListener(e,t,s)}removeBreakpointListener(e,t,s){this._breakpointResolvedEventTarget.removeEventListener(e,t,s)}async setBlackboxPatterns(e){const t=(await this._agent.invoke_setBlackboxPatterns({patterns:e})).getError();return t&&console.error(t),!t}dispose(){this._sourceMapManager.dispose(),this._debuggerId&&qs.delete(this._debuggerId),i.Settings.instance().moduleSetting("pauseOnExceptionEnabled").removeChangeListener(this._pauseOnExceptionStateChanged,this),i.Settings.instance().moduleSetting("pauseOnCaughtException").removeChangeListener(this._pauseOnExceptionStateChanged,this),i.Settings.instance().moduleSetting("disableAsyncStackTraces").removeChangeListener(this._asyncStackTracesStateChanged,this)}async suspendModel(){await this._disableDebugger()}async resumeModel(){await this._enableDebugger()}}Fs._shouldResyncDebuggerId=!1;const qs=new Map;let Us=null;const Hs={DebuggerWasEnabled:Symbol("DebuggerWasEnabled"),DebuggerWasDisabled:Symbol("DebuggerWasDisabled"),DebuggerPaused:Symbol("DebuggerPaused"),DebuggerResumed:Symbol("DebuggerResumed"),ParsedScriptSource:Symbol("ParsedScriptSource"),FailedToParseScriptSource:Symbol("FailedToParseScriptSource"),DiscardedAnonymousScriptSource:Symbol("DiscardedAnonymousScriptSource"),GlobalObjectCleared:Symbol("GlobalObjectCleared"),CallFrameSelected:Symbol("CallFrameSelected"),ConsoleCommandEvaluatedInSelectedCallFrame:Symbol("ConsoleCommandEvaluatedInSelectedCallFrame"),DebuggerIsReadyToPause:Symbol("DebuggerIsReadyToPause")};class js{constructor(e){this._debuggerModel=e}paused({callFrames:e,reason:t,data:s,hitBreakpoints:i,asyncStackTrace:r,asyncStackTraceId:o,asyncCallStackTraceId:n}){this._debuggerModel.debuggerEnabled()&&this._debuggerModel._pausedScript(e,t,s,i||[],r,o,n)}resumed(){this._debuggerModel.debuggerEnabled()&&this._debuggerModel._resumedScript()}scriptParsed({scriptId:e,url:t,startLine:s,startColumn:i,endLine:r,endColumn:o,executionContextId:n,hash:a,executionContextAuxData:l,isLiveEdit:d,sourceMapURL:c,hasSourceURL:h,isModule:u,length:g,stackTrace:m,codeOffset:p,scriptLanguage:_,debugSymbols:b,embedderName:f}){this._debuggerModel.debuggerEnabled()&&this._debuggerModel._parsedScriptSource(e,t,s,i,r,o,n,a,l,Boolean(d),c,Boolean(h),!1,g||0,m||null,p||null,_||null,b||null,f||null)}scriptFailedToParse({scriptId:e,url:t,startLine:s,startColumn:i,endLine:r,endColumn:o,executionContextId:n,hash:a,executionContextAuxData:l,sourceMapURL:d,hasSourceURL:c,isModule:h,length:u,stackTrace:g,codeOffset:m,scriptLanguage:p,embedderName:_}){this._debuggerModel.debuggerEnabled()&&this._debuggerModel._parsedScriptSource(e,t,s,i,r,o,n,a,l,!1,d,Boolean(c),!0,u||0,g||null,m||null,p||null,null,_||null)}breakpointResolved({breakpointId:e,location:t}){this._debuggerModel.debuggerEnabled()&&this._debuggerModel._breakpointResolved(e,t)}}class zs{constructor(e,t,s,i,r){this.debuggerModel=e,this.scriptId=t,this.lineNumber=s,this.columnNumber=i||0,this.inlineFrameIndex=r||0}static fromPayload(e,t,s){return new zs(e,t.scriptId,t.lineNumber,t.columnNumber,s)}payload(){return{scriptId:this.scriptId,lineNumber:this.lineNumber,columnNumber:this.columnNumber}}script(){return this.debuggerModel.scriptForId(this.scriptId)}continueToLocation(e){e&&(this.debuggerModel._continueToLocationCallback=this._paused.bind(this,e)),this.debuggerModel._agent.invoke_continueToLocation({location:this.payload(),targetCallFrames:Protocol.Debugger.ContinueToLocationRequestTargetCallFrames.Current})}_paused(e,t){const s=t.callFrames[0].location();return s.scriptId===this.scriptId&&s.lineNumber===this.lineNumber&&s.columnNumber===this.columnNumber&&(e(),!0)}id(){return this.debuggerModel.target().id()+":"+this.scriptId+":"+this.lineNumber+":"+this.columnNumber}}class Vs{constructor(e,t){this.lineNumber=e,this.columnNumber=t}payload(){return{lineNumber:this.lineNumber,columnNumber:this.columnNumber}}compareTo(e){return this.lineNumber!==e.lineNumber?this.lineNumber-e.lineNumber:this.columnNumber-e.columnNumber}}class Ws{constructor(e,t,s){this.scriptId=e,this.start=t,this.end=s}payload(){return{scriptId:this.scriptId,start:this.start.payload(),end:this.end.payload()}}static comparator(e,t){return e.compareTo(t)}compareTo(e){if(this.scriptId!==e.scriptId)return this.scriptId>e.scriptId?1:-1;const t=this.start.compareTo(e.start);return t||this.end.compareTo(e.end)}overlap(e){if(this.scriptId!==e.scriptId)return!1;const t=this.start.compareTo(e.start);return t<0?this.end.compareTo(e.start)>=0:!(t>0)||this.start.compareTo(e.end)<=0}}class Gs extends zs{constructor(e,t,s,i,r){super(e,t,s,i),r&&(this.type=r)}static fromPayload(e,t){return new Gs(e,t.scriptId,t.lineNumber,t.columnNumber,t.type)}}class $s{constructor(e,t,s,i,r){this.debuggerModel=e,this._script=t,this._payload=s,this._location=zs.fromPayload(e,s.location,i),this._scopeChain=[],this._localScope=null,this._inlineFrameIndex=i||0,this._functionName=r||s.functionName;for(let e=0;e<s.scopeChain.length;++e){const t=new Ks(this,e);this._scopeChain.push(t),t.type()===Protocol.Debugger.ScopeType.Local&&(this._localScope=t)}s.functionLocation&&(this._functionLocation=zs.fromPayload(e,s.functionLocation)),this._returnValue=s.returnValue?this.debuggerModel._runtimeModel.createRemoteObject(s.returnValue):null}static fromPayloadArray(e,t){const s=[];for(let i=0;i<t.length;++i){const r=t[i],o=e.scriptForId(r.location.scriptId);o&&s.push(new $s(e,o,r))}return s}createVirtualCallFrame(e,t){return new $s(this.debuggerModel,this._script,this._payload,e,t)}get script(){return this._script}get id(){return this._payload.callFrameId}get inlineFrameIndex(){return this._inlineFrameIndex}scopeChain(){return this._scopeChain}localScope(){return this._localScope}thisObject(){return this._payload.this?this.debuggerModel._runtimeModel.createRemoteObject(this._payload.this):null}returnValue(){return this._returnValue}async setReturnValue(e){if(!this._returnValue)return null;const t=await this.debuggerModel._agent.invoke_evaluateOnCallFrame({callFrameId:this.id,expression:e,silent:!0,objectGroup:"backtrace"});if(t.getError()||t.exceptionDetails)return null;return(await this.debuggerModel._agent.invoke_setReturnValue({newValue:t.result})).getError()?null:(this._returnValue=this.debuggerModel._runtimeModel.createRemoteObject(t.result),this._returnValue)}get functionName(){return this._functionName}location(){return this._location}functionLocation(){return this._functionLocation||null}async evaluate(e){const t=this.debuggerModel,s=t.runtimeModel();if((Boolean(e.throwOnSideEffect)||void 0!==e.timeout)&&(!1===s.hasSideEffectSupport()||null===s.hasSideEffectSupport()&&!await s.checkSideEffectSupport()))return{error:"Side-effect checks not supported by backend."};if(t._evaluateOnCallFrameCallback){const s=await t._evaluateOnCallFrameCallback(this,e);if(s)return s}const i=await this.debuggerModel._agent.invoke_evaluateOnCallFrame({callFrameId:this.id,expression:e.expression,objectGroup:e.objectGroup,includeCommandLineAPI:e.includeCommandLineAPI,silent:e.silent,returnByValue:e.returnByValue,generatePreview:e.generatePreview,throwOnSideEffect:e.throwOnSideEffect,timeout:e.timeout}),r=i.getError();return r?(console.error(r),{error:r}):{object:s.createRemoteObject(i.result),exceptionDetails:i.exceptionDetails}}async restart(){(await this.debuggerModel._agent.invoke_restartFrame({callFrameId:this._payload.callFrameId})).getError()||this.debuggerModel.stepInto()}}class Ks{constructor(e,t){this._callFrame=e,this._payload=e._payload.scopeChain[t],this._type=this._payload.type,this._name=this._payload.name,this._ordinal=t,this._startLocation=this._payload.startLocation?zs.fromPayload(e.debuggerModel,this._payload.startLocation):null,this._endLocation=this._payload.endLocation?zs.fromPayload(e.debuggerModel,this._payload.endLocation):null,this._object=null}callFrame(){return this._callFrame}type(){return this._type}typeName(){switch(this._type){case Protocol.Debugger.ScopeType.Local:return o.UIString("Local");case Protocol.Debugger.ScopeType.Closure:return o.UIString("Closure");case Protocol.Debugger.ScopeType.Catch:return o.UIString("Catch");case Protocol.Debugger.ScopeType.Block:return o.UIString("Block");case Protocol.Debugger.ScopeType.Script:return o.UIString("Script");case Protocol.Debugger.ScopeType.With:return o.UIString("With Block");case Protocol.Debugger.ScopeType.Global:return o.UIString("Global");case Protocol.Debugger.ScopeType.Module:return o.UIString("Module");case Protocol.Debugger.ScopeType.WasmExpressionStack:return o.UIString("Stack")}return""}name(){return this._name}startLocation(){return this._startLocation}endLocation(){return this._endLocation}object(){if(this._object)return this._object;const e=this._callFrame.debuggerModel._runtimeModel,t=this._type!==Protocol.Debugger.ScopeType.With&&this._type!==Protocol.Debugger.ScopeType.Global;return this._object=t?e.createScopeRemoteObject(this._payload.object,new Ve(this._ordinal,this._callFrame.id)):e.createRemoteObject(this._payload.object),this._object}description(){return this._type!==Protocol.Debugger.ScopeType.With&&this._type!==Protocol.Debugger.ScopeType.Global?"":this._payload.object.description||""}icon(){}}class Xs{constructor(e,t,s,i,r,o,n){this.debuggerModel=e,this.callFrames=$s.fromPayloadArray(e,t),this.reason=s,this.auxData=i,this.breakpointIds=r,o&&(this.asyncStackTrace=this._cleanRedundantFrames(o)),this.asyncStackTraceId=n}exception(){return this.reason!==Protocol.Debugger.PausedEventReason.Exception&&this.reason!==Protocol.Debugger.PausedEventReason.PromiseRejection?null:this.debuggerModel._runtimeModel.createRemoteObject(this.auxData)}_cleanRedundantFrames(e){let t=e,s=null;for(;t;)"async function"===t.description&&t.callFrames.length&&t.callFrames.shift(),s&&!t.callFrames.length?s.parent=t.parent:s=t,t=t.parent;return e}}N.register(Fs,O.JS,!0);var Js=Object.freeze({__proto__:null,sortAndMergeRanges:Ds,StepMode:Bs,DebuggerModel:Fs,_debuggerIdToModel:qs,get _scheduledPauseOnAsyncCall(){return Us},PauseOnExceptionsState:{DontPauseOnExceptions:"none",PauseOnAllExceptions:"all",PauseOnUncaughtExceptions:"uncaught"},Events:Hs,Location:zs,ScriptPosition:Vs,LocationRange:Ws,BreakLocation:Gs,CallFrame:$s,ScopeChainEntry:class{callFrame(){throw new Error("not implemented")}type(){throw new Error("not implemented")}typeName(){throw new Error("not implemented")}name(){throw new Error("not implemented")}startLocation(){throw new Error("not implemented")}endLocation(){throw new Error("not implemented")}object(){throw new Error("not implemented")}description(){throw new Error("not implemented")}icon(){throw new Error("not implemented")}},Scope:Ks,DebuggerPausedDetails:Xs,FunctionDetails:undefined,SetBreakpointResult:undefined});class Qs extends N{constructor(e){super(e),e.registerHeapProfilerDispatcher(new Zs(this)),this._enabled=!1,this._heapProfilerAgent=e.heapProfilerAgent(),this._memoryAgent=e.memoryAgent(),this._runtimeModel=e.model(ti),this._samplingProfilerDepth=0}debuggerModel(){return this._runtimeModel.debuggerModel()}runtimeModel(){return this._runtimeModel}async enable(){this._enabled||(this._enabled=!0,await this._heapProfilerAgent.invoke_enable())}async startSampling(e){if(this._samplingProfilerDepth++)return!1;const t=await this._heapProfilerAgent.invoke_startSampling({samplingInterval:e||16384});return Boolean(t.getError())}async stopSampling(){if(!this._samplingProfilerDepth)throw new Error("Sampling profiler is not running.");if(--this._samplingProfilerDepth)return this.getSamplingProfile();const e=await this._heapProfilerAgent.invoke_stopSampling();return e.getError()?null:e.profile}async getSamplingProfile(){const e=await this._heapProfilerAgent.invoke_getSamplingProfile();return e.getError()?null:e.profile}async collectGarbage(){const e=await this._heapProfilerAgent.invoke_collectGarbage();return Boolean(e.getError())}async snapshotObjectIdForObjectId(e){const t=await this._heapProfilerAgent.invoke_getHeapObjectId({objectId:e});return t.getError()?null:t.heapSnapshotObjectId}async objectForSnapshotObjectId(e,t){const s=await this._heapProfilerAgent.invoke_getObjectByHeapObjectId({objectId:e,objectGroup:t});return s.getError()?null:this._runtimeModel.createRemoteObject(s.result)}async addInspectedHeapObject(e){const t=await this._heapProfilerAgent.invoke_addInspectedHeapObject({heapObjectId:e});return Boolean(t.getError())}async takeHeapSnapshot(e,t){await this._heapProfilerAgent.invoke_takeHeapSnapshot({reportProgress:e,treatGlobalObjectsAsRoots:t})}async startTrackingHeapObjects(e){const t=await this._heapProfilerAgent.invoke_startTrackingHeapObjects({trackAllocations:e});return Boolean(t.getError())}async stopTrackingHeapObjects(e){const t=await this._heapProfilerAgent.invoke_stopTrackingHeapObjects({reportProgress:e});return Boolean(t.getError())}heapStatsUpdate(e){this.dispatchEventToListeners(Ys.HeapStatsUpdate,e)}lastSeenObjectId(e,t){this.dispatchEventToListeners(Ys.LastSeenObjectId,{lastSeenObjectId:e,timestamp:t})}addHeapSnapshotChunk(e){this.dispatchEventToListeners(Ys.AddHeapSnapshotChunk,e)}reportHeapSnapshotProgress(e,t,s){this.dispatchEventToListeners(Ys.ReportHeapSnapshotProgress,{done:e,total:t,finished:s})}resetProfiles(){this.dispatchEventToListeners(Ys.ResetProfiles,this)}}const Ys={HeapStatsUpdate:Symbol("HeapStatsUpdate"),LastSeenObjectId:Symbol("LastSeenObjectId"),AddHeapSnapshotChunk:Symbol("AddHeapSnapshotChunk"),ReportHeapSnapshotProgress:Symbol("ReportHeapSnapshotProgress"),ResetProfiles:Symbol("ResetProfiles")};class Zs{constructor(e){this._heapProfilerModel=e}heapStatsUpdate({statsUpdate:e}){this._heapProfilerModel.heapStatsUpdate(e)}lastSeenObjectId({lastSeenObjectId:e,timestamp:t}){this._heapProfilerModel.lastSeenObjectId(e,t)}addHeapSnapshotChunk({chunk:e}){this._heapProfilerModel.addHeapSnapshotChunk(e)}reportHeapSnapshotProgress({done:e,total:t,finished:s}){this._heapProfilerModel.reportHeapSnapshotProgress(e,t,s)}resetProfiles(){this._heapProfilerModel.resetProfiles()}}N.register(Qs,O.JS,!1);var ei=Object.freeze({__proto__:null,HeapProfilerModel:Qs,Events:Ys,NativeProfilerCallFrame:undefined,CommonHeapProfileNode:undefined,CommonHeapProfile:undefined});class ti extends N{constructor(e){super(e),this._agent=e.runtimeAgent(),this.target().registerRuntimeDispatcher(new ri(this)),this._agent.invoke_enable(),this._executionContextById=new Map,this._executionContextComparator=oi.comparator,this._hasSideEffectSupport=null,i.Settings.instance().moduleSetting("customFormatters").get()&&this._agent.invoke_setCustomObjectFormatterEnabled({enabled:!0}),i.Settings.instance().moduleSetting("customFormatters").addChangeListener(this._customFormattersStateChanged.bind(this))}static isSideEffectFailure(e){const t="exceptionDetails"in e&&e.exceptionDetails;return Boolean(t&&t.exception&&t.exception.description&&t.exception.description.startsWith("EvalError: Possible side-effect in debug-evaluate"))}debuggerModel(){return this.target().model(Fs)}heapProfilerModel(){return this.target().model(Qs)}executionContexts(){return[...this._executionContextById.values()].sort(this.executionContextComparator())}setExecutionContextComparator(e){this._executionContextComparator=e}executionContextComparator(){return this._executionContextComparator}defaultExecutionContext(){for(const e of this.executionContexts())if(e.isDefault)return e;return null}executionContext(e){return this._executionContextById.get(e)||null}_executionContextCreated(e){const t=e.auxData||{isDefault:!0},s=new oi(this,e.id,e.uniqueId,e.name,e.origin,t.isDefault,t.frameId);this._executionContextById.set(s.id,s),this.dispatchEventToListeners(ii.ExecutionContextCreated,s)}_executionContextDestroyed(e){const t=this._executionContextById.get(e);t&&(this.debuggerModel().executionContextDestroyed(t),this._executionContextById.delete(e),this.dispatchEventToListeners(ii.ExecutionContextDestroyed,t))}fireExecutionContextOrderChanged(){this.dispatchEventToListeners(ii.ExecutionContextOrderChanged,this)}_executionContextsCleared(){this.debuggerModel().globalObjectCleared();const e=this.executionContexts();this._executionContextById.clear();for(let t=0;t<e.length;++t)this.dispatchEventToListeners(ii.ExecutionContextDestroyed,e[t])}createRemoteObject(e){return console.assert("object"==typeof e,"Remote object payload should only be an object"),new je(this,e.objectId,e.type,e.subtype,e.value,e.unserializableValue,e.description,e.preview,e.customPreview,e.className)}createScopeRemoteObject(e,t){return new ze(this,e.objectId,t,e.type,e.subtype,e.value,e.unserializableValue,e.description,e.preview)}createRemoteObjectFromPrimitiveValue(e){const t=typeof e;let s=void 0;const i=He.unserializableDescription(e);return null!==i&&(s=i),void 0!==s&&(e=void 0),new je(this,void 0,t,void 0,e,s)}createRemotePropertyFromPrimitiveValue(e,t){return new We(e,this.createRemoteObjectFromPrimitiveValue(t))}discardConsoleEntries(){this._agent.invoke_discardConsoleEntries()}releaseObjectGroup(e){this._agent.invoke_releaseObjectGroup({objectGroup:e})}releaseEvaluationResult(e){if("object"in e&&e.object&&e.object.release(),"exceptionDetails"in e&&e.exceptionDetails&&e.exceptionDetails.exception){const t=e.exceptionDetails.exception;this.createRemoteObject({type:t.type,objectId:t.objectId}).release()}}runIfWaitingForDebugger(){this._agent.invoke_runIfWaitingForDebugger()}_customFormattersStateChanged(e){const t=e.data;this._agent.invoke_setCustomObjectFormatterEnabled({enabled:t})}async compileScript(e,t,s,i){const r=await this._agent.invoke_compileScript({expression:e,sourceURL:t,persistScript:s,executionContextId:i});return r.getError()?(console.error(r.getError()),null):{scriptId:r.scriptId,exceptionDetails:r.exceptionDetails}}async runScript(e,t,s,i,r,o,n,a){const l=await this._agent.invoke_runScript({scriptId:e,executionContextId:t,objectGroup:s,silent:i,includeCommandLineAPI:r,returnByValue:o,generatePreview:n,awaitPromise:a}),d=l.getError();return d?(console.error(d),{error:d}):{object:this.createRemoteObject(l.result),exceptionDetails:l.exceptionDetails}}async queryObjects(e){if(!e.objectId)return{error:"Prototype should be an Object."};const t=await this._agent.invoke_queryObjects({prototypeObjectId:e.objectId,objectGroup:"console"}),s=t.getError();return s?(console.error(s),{error:s}):{objects:this.createRemoteObject(t.objects)}}async isolateId(){const e=await this._agent.invoke_getIsolateId();return e.getError()||!e.id?this.target().id():e.id}async heapUsage(){const e=await this._agent.invoke_getHeapUsage();return e.getError()?null:e}_inspectRequested(e,t){const s=this.createRemoteObject(e);t&&"copyToClipboard"in t&&Boolean(t.copyToClipboard)?this._copyRequested(s):t&&"queryObjects"in t&&t.queryObjects?this._queryObjectsRequested(s):s.isNode()?h.reveal(s).then(s.release.bind(s)):"function"!==s.type?s.release():Ke.objectAsFunction(s).targetFunctionDetails().then((function(e){if(s.release(),!e||!e.location)return;h.reveal(e.location)}))}_copyRequested(e){if(!e.objectId)return void u.InspectorFrontendHostInstance.copyText(e.unserializableValue()||e.value);const t=i.Settings.instance().moduleSetting("textEditorIndent").get();e.callFunctionJSON((function(e){const t=e.subtype,s=e.indent;if("node"===t)return this instanceof Element?this.outerHTML:void 0;if(t&&void 0===this)return String(t);try{return JSON.stringify(this,null,s)}catch(e){return String(this)}}),[{value:{subtype:e.subtype,indent:t}}]).then(u.InspectorFrontendHostInstance.copyText.bind(u.InspectorFrontendHostInstance))}async _queryObjectsRequested(e){const t=await this.queryObjects(e);e.release(),"error"in t?a.Console.instance().error(t.error):this.dispatchEventToListeners(ii.QueryObjectRequested,{objects:t.objects})}static simpleTextFromException(e){let t=e.text;if(e.exception&&e.exception.description){let s=e.exception.description;-1!==s.indexOf("\n")&&(s=s.substring(0,s.indexOf("\n"))),t+=" "+s}return t}exceptionThrown(e,t){const s={timestamp:e,details:t};this.dispatchEventToListeners(ii.ExceptionThrown,s)}_exceptionRevoked(e){this.dispatchEventToListeners(ii.ExceptionRevoked,e)}_consoleAPICalled(e,t,s,i,r,o){const n={type:e,args:t,executionContextId:s,timestamp:i,stackTrace:r,context:o};this.dispatchEventToListeners(ii.ConsoleAPICalled,n)}executionContextIdForScriptId(e){const t=this.debuggerModel().scriptForId(e);return t?t.executionContextId:0}executionContextForStackTrace(e){let t=e;for(;t&&!t.callFrames.length;)t=t.parent||null;return t&&t.callFrames.length?this.executionContextIdForScriptId(t.callFrames[0].scriptId):0}hasSideEffectSupport(){return this._hasSideEffectSupport}async checkSideEffectSupport(){const e=this.executionContexts(),t=e[e.length-1];if(!t)return!1;const s=await this._agent.invoke_evaluate({expression:si,contextId:t.id,throwOnSideEffect:!0});return this._hasSideEffectSupport=!s.getError()&&ti.isSideEffectFailure(s),this._hasSideEffectSupport}terminateExecution(){return this._agent.invoke_terminateExecution()}}const si="(async function(){ await 1; })()",ii={ExecutionContextCreated:Symbol("ExecutionContextCreated"),ExecutionContextDestroyed:Symbol("ExecutionContextDestroyed"),ExecutionContextChanged:Symbol("ExecutionContextChanged"),ExecutionContextOrderChanged:Symbol("ExecutionContextOrderChanged"),ExceptionThrown:Symbol("ExceptionThrown"),ExceptionRevoked:Symbol("ExceptionRevoked"),ConsoleAPICalled:Symbol("ConsoleAPICalled"),QueryObjectRequested:Symbol("QueryObjectRequested")};class ri{constructor(e){this._runtimeModel=e}executionContextCreated({context:e}){this._runtimeModel._executionContextCreated(e)}executionContextDestroyed({executionContextId:e}){this._runtimeModel._executionContextDestroyed(e)}executionContextsCleared(){this._runtimeModel._executionContextsCleared()}exceptionThrown({timestamp:e,exceptionDetails:t}){this._runtimeModel.exceptionThrown(e,t)}exceptionRevoked({reason:e,exceptionId:t}){this._runtimeModel._exceptionRevoked(t)}consoleAPICalled({type:e,args:t,executionContextId:s,timestamp:i,stackTrace:r,context:o}){this._runtimeModel._consoleAPICalled(e,t,s,i,r,o)}inspectRequested({object:e,hints:t}){this._runtimeModel._inspectRequested(e,t)}bindingCalled(e){}}class oi{constructor(e,t,s,i,r,o,n){this.id=t,this.uniqueId=s,this.name=i,this._label=null,this.origin=r,this.isDefault=o,this.runtimeModel=e,this.debuggerModel=e.debuggerModel(),this.frameId=n,this._setLabel("")}target(){return this.runtimeModel.target()}static comparator(e,t){function s(e){return e.parentTarget()?e.type()===D.Frame?4:e.type()===D.ServiceWorker?3:e.type()===D.Worker?2:1:5}function i(e){let t=e;const s=[];for(;t;)s.push(t),t=t.parentTarget();return s.reverse()}const r=i(e.target()),o=i(t.target());let n,a;for(let e=0;;e++)if(!r[e]||!o[e]||r[e]!==o[e]){n=r[e],a=o[e];break}if(!n&&a)return-1;if(!a&&n)return 1;if(n&&a){const e=s(n)-s(a);return e?-e:n.id().localeCompare(a.id())}return e.isDefault?-1:t.isDefault?1:e.name.localeCompare(t.name)}evaluate(e,t,s){if(this.debuggerModel.selectedCallFrame())return this.debuggerModel.evaluateOnSelectedCallFrame(e);if(!(Boolean(e.throwOnSideEffect)||void 0!==e.timeout)||this.runtimeModel.hasSideEffectSupport())return this._evaluateGlobal(e,t,s);const i={error:"Side-effect checks not supported by backend."};return!1===this.runtimeModel.hasSideEffectSupport()?Promise.resolve(i):this.runtimeModel.checkSideEffectSupport().then((()=>this.runtimeModel.hasSideEffectSupport()?this._evaluateGlobal(e,t,s):Promise.resolve(i)))}globalObject(e,t){const s={expression:"this",objectGroup:e,includeCommandLineAPI:!1,silent:!0,returnByValue:!1,generatePreview:t};return this._evaluateGlobal(s,!1,!1)}async _evaluateGlobal(e,t,s){e.expression||(e.expression="this");const i=await this.runtimeModel._agent.invoke_evaluate({expression:e.expression,objectGroup:e.objectGroup,includeCommandLineAPI:e.includeCommandLineAPI,silent:e.silent,uniqueContextId:this.uniqueId,returnByValue:e.returnByValue,generatePreview:e.generatePreview,userGesture:t,awaitPromise:s,throwOnSideEffect:e.throwOnSideEffect,timeout:e.timeout,disableBreaks:e.disableBreaks,replMode:e.replMode,allowUnsafeEvalBlockedByCSP:e.allowUnsafeEvalBlockedByCSP}),r=i.getError();return r?(console.error(r),{error:r}):{object:this.runtimeModel.createRemoteObject(i.result),exceptionDetails:i.exceptionDetails}}async globalLexicalScopeNames(){const e=await this.runtimeModel._agent.invoke_globalLexicalScopeNames({executionContextId:this.id});return e.getError()?[]:e.names}label(){return this._label}setLabel(e){this._setLabel(e),this.runtimeModel.dispatchEventToListeners(ii.ExecutionContextChanged,this)}_setLabel(e){if(e)return void(this._label=e);if(this.name)return void(this._label=this.name);const s=t.ParsedURL.fromString(this.origin);this._label=s?s.lastPathComponentWithFragment():""}}N.register(ti,O.JS,!0);var ni=Object.freeze({__proto__:null,RuntimeModel:ti,Events:ii,ExecutionContext:oi,EvaluationResult:undefined,CompileScriptResult:undefined,EvaluationOptions:undefined,QueryObjectResult:undefined});const ai={Name:"name",Description:"description",Value:"value",Role:"role"};class li{constructor(e,t){this._accessibilityModel=e,this._agent=e._agent,this._id=t.nodeId,e._setAXNodeForAXId(this._id,this),t.backendDOMNodeId?(e._setAXNodeForBackendDOMNodeId(t.backendDOMNodeId,this),this._backendDOMNodeId=t.backendDOMNodeId,this._deferredDOMNode=new gs(e.target(),t.backendDOMNodeId)):(this._backendDOMNodeId=null,this._deferredDOMNode=null),this._ignored=t.ignored,this._ignored&&"ignoredReasons"in t&&(this._ignoredReasons=t.ignoredReasons),this._role=t.role||null,this._name=t.name||null,this._description=t.description||null,this._value=t.value||null,this._properties=t.properties||null,this._childIds=t.childIds||null,this._parentNode=null}accessibilityModel(){return this._accessibilityModel}ignored(){return this._ignored}ignoredReasons(){return this._ignoredReasons||null}role(){return this._role||null}coreProperties(){const e=[];return this._name&&e.push({name:ai.Name,value:this._name}),this._description&&e.push({name:ai.Description,value:this._description}),this._value&&e.push({name:ai.Value,value:this._value}),e}name(){return this._name||null}description(){return this._description||null}value(){return this._value||null}properties(){return this._properties||null}parentNode(){return this._parentNode}_setParentNode(e){this._parentNode=e}isDOMNode(){return Boolean(this._backendDOMNodeId)}backendDOMNodeId(){return this._backendDOMNodeId}deferredDOMNode(){return this._deferredDOMNode}highlightDOMNode(){const e=this.deferredDOMNode();e&&e.highlight()}children(){if(!this._childIds)return[];const e=[];for(const t of this._childIds){const s=this._accessibilityModel.axNodeForId(t);s&&e.push(s)}return e}numChildren(){return this._childIds?this._childIds.length:0}hasOnlyUnloadedChildren(){return!(!this._childIds||!this._childIds.length)&&!this._childIds.some((e=>null!==this._accessibilityModel.axNodeForId(e)))}}class di extends N{constructor(e){super(e),this._agent=e.accessibilityAgent(),this._axIdToAXNode=new Map,this._backendDOMNodeIdToAXNode=new Map}clear(){this._axIdToAXNode.clear()}async requestPartialAXTree(e){const{nodes:t}=await this._agent.invoke_getPartialAXTree({nodeId:e.id,backendNodeId:void 0,objectId:void 0,fetchRelatives:!0});if(t){for(const e of t)new li(this,e);for(const e of this._axIdToAXNode.values())for(const t of e.children())t._setParentNode(e)}}async requestRootNode(e=2){const{nodes:t}=await this._agent.invoke_getFullAXTree({max_depth:e});if(!t)return;const s=t.map((e=>new li(this,e)));for(const e of this._axIdToAXNode.values())for(const t of e.children())t._setParentNode(e);return s[0]}axNodeForId(e){return this._axIdToAXNode.get(e)||null}_setAXNodeForAXId(e,t){this._axIdToAXNode.set(e,t)}axNodeForDOMNode(e){return e?this._backendDOMNodeIdToAXNode.get(e.backendNodeId()):null}_setAXNodeForBackendDOMNodeId(e,t){this._backendDOMNodeIdToAXNode.set(e,t)}}N.register(di,O.DOM,!1);var ci=Object.freeze({__proto__:null,CoreAxPropertyName:ai,CoreOrProtocolAxProperty:undefined,AccessibilityNode:li,AccessibilityModel:di});class hi{constructor(){this._onMessage=null,this._onDisconnect=null,this._messageBuffer="",this._messageSize=0,this._eventListeners=[u.InspectorFrontendHostInstance.events.addEventListener(b.Events.DispatchMessage,this._dispatchMessage,this),u.InspectorFrontendHostInstance.events.addEventListener(b.Events.DispatchMessageChunk,this._dispatchMessageChunk,this)]}setOnMessage(e){this._onMessage=e}setOnDisconnect(e){this._onDisconnect=e}sendRawMessage(e){this._onMessage&&u.InspectorFrontendHostInstance.sendMessageToBackend(e)}_dispatchMessage(e){this._onMessage&&this._onMessage.call(null,e.data)}_dispatchMessageChunk(e){const t=e.data.messageChunk,s=e.data.messageSize;s&&(this._messageBuffer="",this._messageSize=s),this._messageBuffer+=t,this._messageBuffer.length===this._messageSize&&this._onMessage&&(this._onMessage.call(null,this._messageBuffer),this._messageBuffer="",this._messageSize=0)}disconnect(){const e=this._onDisconnect;return l.EventTarget.removeEventListeners(this._eventListeners),this._onDisconnect=null,this._onMessage=null,e&&e.call(null,"force disconnect"),Promise.resolve()}}class ui{constructor(e,t){this._socket=new WebSocket(e),this._socket.onerror=this._onError.bind(this),this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=e=>{this._onMessage&&this._onMessage.call(null,e.data)},this._socket.onclose=this._onClose.bind(this),this._onMessage=null,this._onDisconnect=null,this._onWebSocketDisconnect=t,this._connected=!1,this._messages=[]}setOnMessage(e){this._onMessage=e}setOnDisconnect(e){this._onDisconnect=e}_onError(){this._onWebSocketDisconnect&&this._onWebSocketDisconnect.call(null),this._onDisconnect&&this._onDisconnect.call(null,"connection failed"),this._close()}_onOpen(){if(this._connected=!0,this._socket){this._socket.onerror=console.error;for(const e of this._messages)this._socket.send(e)}this._messages=[]}_onClose(){this._onWebSocketDisconnect&&this._onWebSocketDisconnect.call(null),this._onDisconnect&&this._onDisconnect.call(null,"websocket closed"),this._close()}_close(e){this._socket&&(this._socket.onerror=null,this._socket.onopen=null,this._socket.onclose=e||null,this._socket.onmessage=null,this._socket.close(),this._socket=null),this._onWebSocketDisconnect=null}sendRawMessage(e){this._connected&&this._socket?this._socket.send(e):this._messages.push(e)}disconnect(){return new Promise((e=>{this._close((()=>{this._onDisconnect&&this._onDisconnect.call(null,"force disconnect"),e()}))}))}}class gi{constructor(){this._onMessage=null,this._onDisconnect=null}setOnMessage(e){this._onMessage=e}setOnDisconnect(e){this._onDisconnect=e}sendRawMessage(e){setTimeout(this._respondWithError.bind(this,e),0)}_respondWithError(e){const t=JSON.parse(e),s={message:"This is a stub connection, can't dispatch message.",code:I.DevToolsStubErrorCode,data:t};this._onMessage&&this._onMessage.call(null,{id:t.id,error:s})}disconnect(){return this._onDisconnect&&this._onDisconnect.call(null,"force disconnect"),this._onDisconnect=null,this._onMessage=null,Promise.resolve()}}class mi{constructor(e,t){this._connection=e,this._sessionId=t,this._onMessage=null,this._onDisconnect=null}setOnMessage(e){this._onMessage=e}setOnDisconnect(e){this._onDisconnect=e}sendRawMessage(e){const t=JSON.parse(e);t.sessionId||(t.sessionId=this._sessionId),this._connection.sendRawMessage(JSON.stringify(t))}disconnect(){return this._onDisconnect&&this._onDisconnect.call(null,"force disconnect"),this._onDisconnect=null,this._onMessage=null,Promise.resolve()}}function pi(e){const t=L.Runtime.queryParam("ws"),s=L.Runtime.queryParam("wss");if(t||s){return new ui(t?"ws://"+t:"wss://"+s,e)}return u.InspectorFrontendHostInstance.isHostedMode()?new gi:new hi}var _i=Object.freeze({__proto__:null,MainConnection:hi,WebSocketConnection:ui,StubConnection:gi,ParallelConnection:mi,initMainConnection:async function(e,t){return I.Connection.setFactory(pi.bind(null,t)),await e(),u.InspectorFrontendHostInstance.connectionReady(),u.InspectorFrontendHostInstance.events.addEventListener(b.Events.ReattachMainTarget,(()=>{const t=F.instance().mainTarget();if(t){const e=t.router();e&&e.connection().disconnect()}e()})),Promise.resolve()},_createMainConnection:pi});let bi,fi=0;class vi extends N{constructor(e){super(e),this._targetManager=e.targetManager(),this._parentTarget=e,this._targetAgent=e.targetAgent(),this._targetInfos=new Map,this._childTargets=new Map,this._parallelConnections=new Map,this._parentTargetId=null,e.registerTargetDispatcher(this),this._targetAgent.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),e.parentTarget()||u.isUnderTest()||(this._targetAgent.invoke_setDiscoverTargets({discover:!0}),this._targetAgent.invoke_setRemoteLocations({locations:[{host:"localhost",port:9229}]}))}static install(e){bi=e,N.register(vi,O.Target,!0)}suspendModel(){return this._targetAgent.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!1,flatten:!0})}resumeModel(){return this._targetAgent.invoke_setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0})}dispose(){for(const e of this._childTargets.keys())this.detachedFromTarget({sessionId:e,targetId:void 0})}targetCreated({targetInfo:e}){this._targetInfos.set(e.targetId,e),this._fireAvailableTargetsChanged(),this.dispatchEventToListeners(yi.TargetCreated,e)}targetInfoChanged({targetInfo:e}){this._targetInfos.set(e.targetId,e),this._fireAvailableTargetsChanged(),this.dispatchEventToListeners(yi.TargetInfoChanged,e)}targetDestroyed({targetId:e}){this._targetInfos.delete(e),this._fireAvailableTargetsChanged(),this.dispatchEventToListeners(yi.TargetDestroyed,e)}targetCrashed({targetId:e,status:t,errorCode:s}){}_fireAvailableTargetsChanged(){F.instance().dispatchEventToListeners(q.AvailableTargetsChanged,[...this._targetInfos.values()])}async _getParentTargetId(){return this._parentTargetId||(this._parentTargetId=(await this._parentTarget.targetAgent().invoke_getTargetInfo({})).targetInfo.targetId),this._parentTargetId}attachedToTarget({sessionId:e,targetInfo:s,waitingForDebugger:i}){if(this._parentTargetId===s.targetId)return;let r="";if("worker"===s.type&&s.title&&s.title!==s.url)r=s.title;else if("iframe"!==s.type){const e=t.ParsedURL.fromString(s.url);r=e?e.lastPathComponentWithFragment():"#"+ ++fi}let o=D.Browser;"iframe"===s.type||"page"===s.type?o=D.Frame:"worker"===s.type?o=D.Worker:"service_worker"===s.type&&(o=D.ServiceWorker);const n=this._targetManager.createTarget(s.targetId,r,o,this._parentTarget,e);this._childTargets.set(e,n),bi?bi({target:n,waitingForDebugger:i}).then((()=>{n.runtimeAgent().invoke_runIfWaitingForDebugger()})):n.runtimeAgent().invoke_runIfWaitingForDebugger()}detachedFromTarget({sessionId:e}){if(this._parallelConnections.has(e))this._parallelConnections.delete(e);else{const t=this._childTargets.get(e);t&&(t.dispose("target terminated"),this._childTargets.delete(e))}}receivedMessageFromTarget({}){}async createParallelConnection(e){const t=await this._getParentTargetId(),{connection:s,sessionId:i}=await this._createParallelConnectionAndSessionForTarget(this._parentTarget,t);return s.setOnMessage(e),this._parallelConnections.set(i,s),s}async _createParallelConnectionAndSessionForTarget(e,t){const s=e.targetAgent(),i=e.router(),r=(await s.invoke_attachToTarget({targetId:t,flatten:!0})).sessionId,o=new mi(i.connection(),r);return i.registerSession(e,r,o),o.setOnDisconnect((()=>{i.unregisterSession(r),s.invoke_detachFromTarget({sessionId:r})})),{connection:o,sessionId:r}}targetInfos(){return Array.from(this._targetInfos.values())}}const yi={TargetCreated:Symbol("TargetCreated"),TargetDestroyed:Symbol("TargetDestroyed"),TargetInfoChanged:Symbol("TargetInfoChanged")};var ki,Si,wi=Object.freeze({__proto__:null,ChildTargetManager:vi,Events:yi});!function(e){e.Result="result",e.Command="command",e.System="system",e.QueryObjectResult="queryObjectResult"}(ki||(ki={})),function(e){e.CSS="css",e.ConsoleAPI="console-api"}(Si||(Si={}));class Ci extends N{constructor(e){super(e),this._isRecording=!1,this._nextAnonymousConsoleProfileNumber=1,this._anonymousConsoleProfileIdToTitle=new Map,this._profilerAgent=e.profilerAgent(),this._preciseCoverageDeltaUpdateCallback=null,e.registerProfilerDispatcher(this),this._profilerAgent.invoke_enable(),this._debuggerModel=e.model(Fs)}runtimeModel(){return this._debuggerModel.runtimeModel()}debuggerModel(){return this._debuggerModel}consoleProfileStarted({id:e,location:t,title:s}){s||(s=o.UIString("Profile %d",this._nextAnonymousConsoleProfileNumber++),this._anonymousConsoleProfileIdToTitle.set(e,s)),this._dispatchProfileEvent(Ii.ConsoleProfileStarted,e,t,s)}consoleProfileFinished({id:e,location:t,profile:s,title:i}){i||(i=this._anonymousConsoleProfileIdToTitle.get(e),this._anonymousConsoleProfileIdToTitle.delete(e)),L.Runtime.instance().loadModulePromise("profiler").then((()=>{this._dispatchProfileEvent(Ii.ConsoleProfileFinished,e,t,i,s)}))}_dispatchProfileEvent(e,t,s,i,r){const o=zs.fromPayload(this._debuggerModel,s),n={id:this.target().id()+"."+t,scriptLocation:o,cpuProfile:r,title:i,cpuProfilerModel:this};this.dispatchEventToListeners(e,n)}isRecordingProfile(){return this._isRecording}startRecording(){this._isRecording=!0;return this._profilerAgent.invoke_setSamplingInterval({interval:100}),this._profilerAgent.invoke_start()}stopRecording(){return this._isRecording=!1,this._profilerAgent.invoke_stop().then((e=>e.profile||null))}startPreciseCoverage(e,t){this._preciseCoverageDeltaUpdateCallback=t;return this._profilerAgent.invoke_startPreciseCoverage({callCount:!1,detailed:e,allowTriggeredUpdates:!0})}async takePreciseCoverage(){const e=await this._profilerAgent.invoke_takePreciseCoverage();return{timestamp:e&&e.timestamp||0,coverage:e&&e.result||[]}}stopPreciseCoverage(){return this._preciseCoverageDeltaUpdateCallback=null,this._profilerAgent.invoke_stopPreciseCoverage()}preciseCoverageDeltaUpdate({timestamp:e,occassion:t,result:s}){this._preciseCoverageDeltaUpdateCallback&&this._preciseCoverageDeltaUpdateCallback(e,t,s)}}const Ii={ConsoleProfileStarted:Symbol("ConsoleProfileStarted"),ConsoleProfileFinished:Symbol("ConsoleProfileFinished")};N.register(Ci,O.JS,!0);var Ri=Object.freeze({__proto__:null,CPUProfilerModel:Ci,Events:Ii,EventData:undefined});class Ti extends N{constructor(e){super(e),e.registerLogDispatcher(this),this._logAgent=e.logAgent(),this._logAgent.invoke_enable(),u.isUnderTest()||this._logAgent.invoke_startViolationsReport({config:[{name:Protocol.Log.ViolationSettingName.LongTask,threshold:200},{name:Protocol.Log.ViolationSettingName.LongLayout,threshold:30},{name:Protocol.Log.ViolationSettingName.BlockedEvent,threshold:100},{name:Protocol.Log.ViolationSettingName.BlockedParser,threshold:-1},{name:Protocol.Log.ViolationSettingName.Handler,threshold:150},{name:Protocol.Log.ViolationSettingName.RecurringHandler,threshold:50},{name:Protocol.Log.ViolationSettingName.DiscouragedAPIUse,threshold:-1}]})}entryAdded({entry:e}){this.dispatchEventToListeners(xi.EntryAdded,{logModel:this,entry:e})}requestClear(){this._logAgent.invoke_clear()}}const xi={EntryAdded:Symbol("EntryAdded")};N.register(Ti,O.Log,!0);var Mi=Object.freeze({__proto__:null,LogModel:Ti,Events:xi});let Pi;class Li extends e.ObjectWrapper{constructor(){super(),this._messages=[],this._messageByExceptionId=new Map,this._warnings=0,this._errors=0,this._violations=0,this._pageLoadSequenceNumber=0,this._targetListeners=new WeakMap,F.instance().observeTargets(this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return Pi&&!t||(Pi=new Li),Pi}targetAdded(e){const t=e.model(Ts);if(!t||t.cachedResourcesLoaded())return void this._initTarget(e);const s=t.addEventListener(xs.CachedResourcesLoaded,(()=>{l.EventTarget.removeEventListeners([s]),this._initTarget(e)}))}_initTarget(e){const t=[],s=e.model(Ci);s&&(t.push(s.addEventListener(Ii.ConsoleProfileStarted,this._consoleProfileStarted.bind(this,s))),t.push(s.addEventListener(Ii.ConsoleProfileFinished,this._consoleProfileFinished.bind(this,s))));const i=e.model(Ts);i&&!e.parentTarget()&&t.push(i.addEventListener(xs.MainFrameNavigated,this._mainFrameNavigated,this));const r=e.model(ti);r&&(t.push(r.addEventListener(ii.ExceptionThrown,this._exceptionThrown.bind(this,r))),t.push(r.addEventListener(ii.ExceptionRevoked,this._exceptionRevoked.bind(this,r))),t.push(r.addEventListener(ii.ConsoleAPICalled,this._consoleAPICalled.bind(this,r))),e.parentTarget()||t.push(r.debuggerModel().addEventListener(Hs.GlobalObjectCleared,this._clearIfNecessary,this)),t.push(r.addEventListener(ii.QueryObjectRequested,this._queryObjectRequested.bind(this,r)))),this._targetListeners.set(e,t)}targetRemoved(e){const t=e.model(ti);t&&this._messageByExceptionId.delete(t),l.EventTarget.removeEventListeners(this._targetListeners.get(e)||[])}async evaluateCommandInConsole(e,t,s,r){const o=await e.evaluate({expression:s,objectGroup:"console",includeCommandLineAPI:r,silent:!1,returnByValue:!1,generatePreview:!0,replMode:!0,allowUnsafeEvalBlockedByCSP:!1,disableBreaks:void 0,throwOnSideEffect:void 0,timeout:void 0},i.Settings.instance().moduleSetting("consoleUserActivationEval").get(),!1);m.actionTaken(p.Action.ConsoleEvaluated),"error"in o||(await a.Console.instance().showPromise(),this.dispatchEventToListeners(Ei.CommandEvaluated,{result:o.object,commandMessage:t,exceptionDetails:o.exceptionDetails}))}addCommandMessage(e,t){const s=new Ni(e.runtimeModel,Ai.Javascript,null,t,Di.Command);return s.setExecutionContextId(e.id),this.addMessage(s),s}addMessage(e){e._pageLoadSequenceNumber=this._pageLoadSequenceNumber,e.source===Ai.ConsoleAPI&&e.type===Di.Clear&&this._clearIfNecessary(),this._messages.push(e);const t=e.runtimeModel();if(e._exceptionId&&t){let s=this._messageByExceptionId.get(t);s||(s=new Map,this._messageByExceptionId.set(t,s)),s.set(e._exceptionId,e)}this._incrementErrorWarningCount(e),this.dispatchEventToListeners(Ei.MessageAdded,e)}_exceptionThrown(e,t){const s=t.data,i=Ni.fromException(e,s.details,void 0,s.timestamp,void 0);i.setExceptionId(s.details.exceptionId),this.addMessage(i)}_exceptionRevoked(e,t){const s=t.data,i=this._messageByExceptionId.get(e),r=i?i.get(s):null;r&&(this._errors--,r.level=Oi.Verbose,this.dispatchEventToListeners(Ei.MessageUpdated,r))}_consoleAPICalled(e,t){const s=t.data;let i=Oi.Info;s.type===Di.Debug?i=Oi.Verbose:s.type===Di.Error||s.type===Di.Assert?i=Oi.Error:s.type===Di.Warning?i=Oi.Warning:s.type!==Di.Info&&s.type!==Di.Log||(i=Oi.Info);let r="";s.args.length&&s.args[0].unserializableValue?r=s.args[0].unserializableValue:!s.args.length||"object"==typeof s.args[0].value&&null!==s.args[0].value?s.args.length&&s.args[0].description&&(r=s.args[0].description):r=String(s.args[0].value);const o=s.stackTrace&&s.stackTrace.callFrames.length?s.stackTrace.callFrames[0]:null,n=new Ni(e,Ai.ConsoleAPI,i,r,s.type,o?o.url:void 0,o?o.lineNumber:void 0,o?o.columnNumber:void 0,s.args,s.stackTrace,s.timestamp,s.executionContextId,void 0,void 0,s.context);this.addMessage(n)}_queryObjectRequested(e,t){const s=t.data,i=new Ni(e,Ai.ConsoleAPI,Oi.Info,"",Di.QueryObjectResult,void 0,void 0,void 0,[s.objects]);this.addMessage(i)}_clearIfNecessary(){i.Settings.instance().moduleSetting("preserveConsoleLog").get()||this._clear(),++this._pageLoadSequenceNumber}_mainFrameNavigated(e){i.Settings.instance().moduleSetting("preserveConsoleLog").get()&&a.Console.instance().log(o.UIString("Navigated to %s",e.data.url))}_consoleProfileStarted(e,t){const s=t.data;this._addConsoleProfileMessage(e,Di.Profile,s.scriptLocation,o.UIString("Profile '%s' started.",s.title))}_consoleProfileFinished(e,t){const s=t.data;this._addConsoleProfileMessage(e,Di.ProfileEnd,s.scriptLocation,o.UIString("Profile '%s' finished.",s.title))}_addConsoleProfileMessage(e,t,s,i){const r=s.script(),o=[{functionName:"",scriptId:s.scriptId,url:r?r.contentURL():"",lineNumber:s.lineNumber,columnNumber:s.columnNumber||0}];this.addMessage(new Ni(e.runtimeModel(),Ai.ConsoleAPI,Oi.Info,i,t,void 0,void 0,void 0,void 0,{callFrames:o}))}_incrementErrorWarningCount(e){if(e.source!==Ai.Violation)switch(e.level){case Oi.Warning:this._warnings++;break;case Oi.Error:this._errors++}else this._violations++}messages(){return this._messages}requestClearMessages(){for(const e of F.instance().models(Ti))e.requestClear();for(const e of F.instance().models(ti))e.discardConsoleEntries();this._clear()}_clear(){this._messages=[],this._messageByExceptionId.clear(),this._errors=0,this._warnings=0,this._violations=0,this.dispatchEventToListeners(Ei.ConsoleCleared)}errors(){return this._errors}warnings(){return this._warnings}violations(){return this._violations}async saveToTempVariable(e,t){if(!t||!e)return void l(null);const s=e,i=await s.globalObject("",!1);if("error"in i||Boolean(i.exceptionDetails)||!i.object)return void l("object"in i&&i.object||null);const r=i.object,n=await r.callFunction((function(e){const t="temp";let s=1;for(;t+s in this;)++s;const i=t+s;return this[i]=e,i}),[He.toCallArgument(t)]);if(r.release(),n.wasThrown||!n.object||"string"!==n.object.type)l(n.object||null);else{const e=n.object.value,t=this.addCommandMessage(s,e);this.evaluateCommandInConsole(s,t,e,!1)}function l(e){let t=o.UIString("Failed to save to temp variable.");e&&(t=t+" "+e.description),a.Console.instance().error(t)}n.object&&n.object.release()}}const Ei={ConsoleCleared:Symbol("ConsoleCleared"),MessageAdded:Symbol("MessageAdded"),MessageUpdated:Symbol("MessageUpdated"),CommandEvaluated:Symbol("CommandEvaluated")};class Ni{constructor(e,t,s,i,r,o,n,a,l,d,c,h,u,g,m){if(this._runtimeModel=e,this.source=t,this.level=s,this.messageText=i,this._type=r||Di.Log,this.url=o||void 0,this.line=n||0,this.column=a||0,this.parameters=l,this.stackTrace=d,this.timestamp=c||Date.now(),this.executionContextId=h||0,this.scriptId=u||null,this.workerId=g||null,!this.executionContextId&&this._runtimeModel&&(this.scriptId?this.executionContextId=this._runtimeModel.executionContextIdForScriptId(this.scriptId):this.stackTrace&&(this.executionContextId=this._runtimeModel.executionContextForStackTrace(this.stackTrace))),m){const e=m.match(/[^#]*/);this.context=e&&e[0]}this._originatingConsoleMessage=null,this._pageLoadSequenceNumber=void 0,this._exceptionId=void 0}get type(){return this._type}static fromException(e,t,s,i,r){return new Ni(e,Ai.Javascript,Oi.Error,ti.simpleTextFromException(t),s,r||t.url,t.lineNumber,t.columnNumber,t.exception?[He.fromLocalObject(t.text),t.exception]:void 0,t.stackTrace,i,t.executionContextId,t.scriptId)}runtimeModel(){return this._runtimeModel}target(){return this._runtimeModel?this._runtimeModel.target():null}setOriginatingMessage(e){this._originatingConsoleMessage=e,this.executionContextId=e.executionContextId}setExecutionContextId(e){this.executionContextId=e}setExceptionId(e){this._exceptionId=e}originatingMessage(){return this._originatingConsoleMessage}isGroupMessage(){return this.type===Di.StartGroup||this.type===Di.StartGroupCollapsed||this.type===Di.EndGroup}isGroupStartMessage(){return this.type===Di.StartGroup||this.type===Di.StartGroupCollapsed}isErrorOrWarning(){return this.level===Oi.Warning||this.level===Oi.Error}isGroupable(){const e=this.level===Oi.Error&&(this.source===Ai.Javascript||this.source===Ai.Network);return this.source!==Ai.ConsoleAPI&&this.type!==Di.Command&&this.type!==Di.Result&&this.type!==Di.System&&!e}groupCategoryKey(){return[this.source,this.level,this.type,this._pageLoadSequenceNumber].join(":")}isEqual(e){if(!e)return!1;if(!this._isEqualStackTraces(this.stackTrace,e.stackTrace))return!1;if(this.parameters){if(!e.parameters||this.parameters.length!==e.parameters.length)return!1;for(let t=0;t<e.parameters.length;++t){const s=e.parameters[t],i=this.parameters[t];if("string"==typeof s||"string"==typeof i)return!1;if("object"===s.type&&"error"!==s.subtype)return!1;if(i.type!==s.type||i.value!==s.value||i.description!==s.description)return!1}}return this.runtimeModel()===e.runtimeModel()&&this.source===e.source&&this.type===e.type&&this.level===e.level&&this.line===e.line&&this.url===e.url&&this.scriptId===e.scriptId&&this.messageText===e.messageText&&this.executionContextId===e.executionContextId}_isEqualStackTraces(e,t){if(!e!=!t)return!1;if(!e||!t)return!0;const s=e.callFrames,i=t.callFrames;if(s.length!==i.length)return!1;for(let e=0,t=s.length;e<t;++e)if(s[e].url!==i[e].url||s[e].functionName!==i[e].functionName||s[e].lineNumber!==i[e].lineNumber||s[e].columnNumber!==i[e].columnNumber)return!1;return this._isEqualStackTraces(e.parent,t.parent)}}const Ai={...Protocol.Log.LogEntrySource,...Si},Oi={...Protocol.Log.LogEntryLevel},Di={...Protocol.Runtime.ConsoleAPICalledEventType,...ki},Bi=new Map([[Ai.XML,"xml"],[Ai.Javascript,"javascript"],[Ai.Network,"network"],[Ai.ConsoleAPI,"console-api"],[Ai.Storage,"storage"],[Ai.Appcache,"appcache"],[Ai.Rendering,"rendering"],[Ai.CSS,"css"],[Ai.Security,"security"],[Ai.Deprecation,"deprecation"],[Ai.Worker,"worker"],[Ai.Violation,"violation"],[Ai.Intervention,"intervention"],[Ai.Recommendation,"recommendation"],[Ai.Other,"other"]]);var Fi=Object.freeze({__proto__:null,ConsoleModel:Li,Events:Ei,ConsoleMessage:Ni,MessageSource:Ai,MessageLevel:Oi,MessageType:Di,MessageSourceDisplayName:Bi,ConsoleAPICall:undefined,ExceptionWithTimestamp:undefined});const qi={CrossOriginEmbedderPolicy:Symbol("CrossOriginEmbedderPolicy"),MixedContent:Symbol("MixedContent"),SameSiteCookie:Symbol("SameSiteCookie"),HeavyAd:Symbol("HeavyAd"),ContentSecurityPolicy:Symbol("ContentSecurityPolicy"),Other:Symbol("Other")},Ui={BreakingChange:Symbol("BreakingChange")};class Hi extends e.ObjectWrapper{constructor(e,t=null){super(),this._code=e,this._issuesModel=t,m.issueCreated(e)}code(){return this._code}primaryKey(){throw new Error("Not implemented")}blockedByResponseDetails(){return[]}cookies(){return[]}elements(){return[]}heavyAds(){return[]}mixedContents(){return[]}requests(){return[]}sources(){return[]}isAssociatedWithRequestId(e){for(const t of this.requests())if(t.requestId===e)return!0;return!1}model(){return this._issuesModel}getDescription(){throw new Error("Not implemented")}getCategory(){throw new Error("Not implemented")}isCausedByThirdParty(){return!1}}var ji=Object.freeze({__proto__:null,IssueCategory:qi,IssueKind:Ui,getShowThirdPartyIssuesSetting:function(){return i.Settings.instance().createSetting("showThirdPartyIssues",!1)},IssueDescription:undefined,MarkdownIssueDescription:undefined,AffectedElement:undefined,AffectedSource:undefined,Issue:Hi});class zi extends Hi{constructor(e,t){super([Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,e.contentSecurityPolicyViolationType].join("::"),t),this._issueDetails=e}getCategory(){return qi.ContentSecurityPolicy}primaryKey(){return JSON.stringify(this._issueDetails,["blockedURL","contentSecurityPolicyViolationType","violatedDirective","isReportOnly","sourceCodeLocation","url","lineNumber","columnNumber","violatingNodeId"])}getDescription(){const e=er.get(this._issueDetails.contentSecurityPolicyViolationType);return e||null}details(){return this._issueDetails}}const Vi={file:"issues/descriptions/cspURLViolation.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://developers.google.com/web/fundamentals/security/csp#source_allowlists",linkTitle:k`Content Security Policy - Source Allowlists`}]},Wi={file:"issues/descriptions/cspInlineViolation.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://developers.google.com/web/fundamentals/security/csp#inline_code_is_considered_harmful",linkTitle:k`Content Security Policy - Inline Code`}]},Gi={file:"issues/descriptions/cspEvalViolation.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://developers.google.com/web/fundamentals/security/csp#eval_too",linkTitle:k`Content Security Policy - Eval`}]},$i={file:"issues/descriptions/cspTrustedTypesSinkViolation.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/trusted-types/#fix-the-violations",linkTitle:k`Trusted Types - Fix violations`}]},Ki={file:"issues/descriptions/cspTrustedTypesPolicyViolation.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/trusted-types/",linkTitle:k`Trusted Types - Policy violation`}]},Xi=[Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,Protocol.Audits.ContentSecurityPolicyViolationType.KURLViolation].join("::"),Ji=[Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,Protocol.Audits.ContentSecurityPolicyViolationType.KInlineViolation].join("::"),Qi=[Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,Protocol.Audits.ContentSecurityPolicyViolationType.KEvalViolation].join("::"),Yi=[Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,Protocol.Audits.ContentSecurityPolicyViolationType.KTrustedTypesSinkViolation].join("::"),Zi=[Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,Protocol.Audits.ContentSecurityPolicyViolationType.KTrustedTypesPolicyViolation].join("::"),er=new Map([[Protocol.Audits.ContentSecurityPolicyViolationType.KURLViolation,Vi],[Protocol.Audits.ContentSecurityPolicyViolationType.KInlineViolation,Wi],[Protocol.Audits.ContentSecurityPolicyViolationType.KEvalViolation,Gi],[Protocol.Audits.ContentSecurityPolicyViolationType.KTrustedTypesSinkViolation,$i],[Protocol.Audits.ContentSecurityPolicyViolationType.KTrustedTypesPolicyViolation,Ki]]);var tr=Object.freeze({__proto__:null,ContentSecurityPolicyIssue:zi,urlViolationCode:Xi,inlineViolationCode:Ji,evalViolationCode:Qi,trustedTypesSinkViolationCode:Yi,trustedTypesPolicyViolationCode:Zi});class sr extends N{constructor(e){super(e),this._blockedCookies=new Map,this._cookieToBlockedReasons=new Map}addBlockedCookie(e,t){const s=e.key(),i=this._blockedCookies.get(s);this._blockedCookies.set(s,e),this._cookieToBlockedReasons.set(e,t),i&&this._cookieToBlockedReasons.delete(s)}getCookieToBlockedReasonsMap(){return this._cookieToBlockedReasons}async getCookies(e){const t=await this.target().networkAgent().invoke_getCookies({urls:e});if(t.getError())return[];return t.cookies.map(ce.fromProtocolCookie).concat(Array.from(this._blockedCookies.values()))}async deleteCookie(e){await this.deleteCookies([e])}async clear(e,t){const s=await this.getCookiesForDomain(e||null);if(t){const e=s.filter((e=>t.endsWith(e.domain())));await this.deleteCookies(e)}else await this.deleteCookies(s)}async saveCookie(e){let t=e.domain();t.startsWith(".")||(t="");let s=void 0;e.expires()&&(s=Math.floor(Date.parse(""+e.expires())/1e3));const i={name:e.name(),value:e.value(),url:e.url()||void 0,domain:t,path:e.path(),secure:e.secure(),httpOnly:e.httpOnly(),sameSite:e.sameSite(),expires:s,priority:e.priority()},r=await this.target().networkAgent().invoke_setCookie(i);return!r.getError()&&r.success}getCookiesForDomain(e){const s=[];const i=this.target().model(Ts);return i&&(i.mainFrame&&i.mainFrame.unreachableUrl()&&s.push(i.mainFrame.unreachableUrl()),i.forAllResources((function(i){const r=t.ParsedURL.fromString(i.documentURL);return!r||e&&r.securityOrigin()!==e||s.push(i.url),!1}))),this.getCookies(s)}async deleteCookies(e){const t=this.target().networkAgent();this._blockedCookies.clear(),this._cookieToBlockedReasons.clear(),await Promise.all(e.map((e=>t.invoke_deleteCookies({name:e.name(),url:void 0,domain:e.domain(),path:e.path()}))))}}N.register(sr,O.Network,!1);var ir=Object.freeze({__proto__:null,CookieModel:sr,BlockedReason:undefined});class rr extends ae{constructor(e,t){super(e.callFrame||{functionName:e.functionName,scriptId:e.scriptId,url:e.url,lineNumber:e.lineNumber-1,columnNumber:e.columnNumber-1}),this.id=e.id,this.self=(e.hitCount||0)*t,this.positionTicks=e.positionTicks,this.deoptReason=e.deoptReason&&"no reason"!==e.deoptReason?e.deoptReason:null}}var or=Object.freeze({__proto__:null,CPUProfileNode:rr,CPUProfileDataModel:class extends le{constructor(e,t){super(t);Boolean(e.head)?(this.profileStartTime=1e3*e.startTime,this.profileEndTime=1e3*e.endTime,this.timestamps=e.timestamps,this._compatibilityConversionHeadToNodes(e)):(this.profileStartTime=e.startTime/1e3,this.profileEndTime=e.endTime/1e3,this.timestamps=this._convertTimeDeltas(e)),this.samples=e.samples,this.lines=e.lines,this.totalHitCount=0,this.profileHead=this._translateProfileTree(e.nodes),this.initialize(this.profileHead),this._extractMetaNodes(),this.samples&&(this._buildIdToNodeMap(),this._sortSamples(),this._normalizeTimestamps(),this._fixMissingSamples()),this.timestamps,this._idToNode,this.gcNode}_compatibilityConversionHeadToNodes(e){if(!e.head||e.nodes)return;const t=[];!function e(s){return t.push(s),s.children=s.children.map(e),s.id}(e.head),e.nodes=t,delete e.head}_convertTimeDeltas(e){if(!e.timeDeltas)return[];let t=e.startTime;const s=new Array(e.timeDeltas.length);for(let i=0;i<e.timeDeltas.length;++i)t+=e.timeDeltas[i],s[i]=t;return s}_translateProfileTree(e){const t=new Map;for(let s=0;s<e.length;++s){const i=e[s];t.set(i.id,i)}!function(e,s){if("number"!=typeof e[0].hitCount){if(!s)throw new Error("Error: Neither hitCount nor samples are present in profile.");for(let t=0;t<e.length;++t)e[t].hitCount=0;for(let e=0;e<s.length;++e)++t.get(s[e]).hitCount}}(e,this.samples),function(e){if(!e[0].children){e[0].children=[];for(let s=1;s<e.length;++s){const i=e[s],r=t.get(i.parent);r.children?r.children.push(i.id):r.children=[i.id]}}}(e),this.totalHitCount=e.reduce(((e,t)=>e+(t.hitCount||0)),0);const s=(this.profileEndTime-this.profileStartTime)/this.totalHitCount,r=Boolean(i.Settings.instance().moduleSetting("showNativeFunctionsInJSProfile").get()),o=e[0],n=new Map([[o.id,o.id]]),a=new rr(o,s);if(!o.children)throw new Error("Missing children for root");const l=o.children.map((()=>a)),d=o.children.map((e=>t.get(e)));for(;d.length;){let e=l.pop();const i=d.pop();if(!i||!e)continue;i.children||(i.children=[]);const o=new rr(i,s);r||!((c=i).callFrame?Boolean(c.callFrame.url)&&c.callFrame.url.startsWith("native "):Boolean(c.url)&&c.url.startsWith("native "))?(e.children.push(o),e=o):e.self+=o.self,n.set(i.id,e.id),l.push.apply(l,i.children.map((()=>e))),d.push.apply(d,i.children.map((e=>t.get(e))))}var c;return this.samples&&(this.samples=this.samples.map((e=>n.get(e)))),a}_sortSamples(){const e=this.timestamps;if(!e)return;const t=this.samples;if(!t)return;const s=e.map(((e,t)=>t));s.sort(((t,s)=>e[t]-e[s]));for(let i=0;i<e.length;++i){let r=s[i];if(r===i)continue;const o=e[i],n=t[i];let a=i;for(;r!==i;)t[a]=t[r],e[a]=e[r],a=r,r=s[r],s[a]=a;t[a]=n,e[a]=o}}_normalizeTimestamps(){if(!this.samples)return;let e=this.timestamps;if(e){for(let t=0;t<e.length;++t)e[t]/=1e3;if(this.samples.length===e.length){const t=((e[e.length-1]||0)-e[0])/(e.length-1);this.timestamps.push((e[e.length-1]||0)+t)}this.profileStartTime=e[0],this.profileEndTime=e[e.length-1]}else{const t=this.profileStartTime,s=(this.profileEndTime-t)/this.samples.length;e=new Float64Array(this.samples.length+1);for(let i=0;i<e.length;++i)e[i]=t+i*s;this.timestamps=e}}_buildIdToNodeMap(){this._idToNode=new Map;const e=this._idToNode,t=[this.profileHead];for(;t.length;){const s=t.pop();e.set(s.id,s),t.push.apply(t,s.children)}}_extractMetaNodes(){const e=this.profileHead.children;for(let t=0;t<e.length&&!(this.gcNode&&this.programNode&&this.idleNode);t++){const s=e[t];"(garbage collector)"===s.functionName?this.gcNode=s:"(program)"===s.functionName?this.programNode=s:"(idle)"===s.functionName&&(this.idleNode=s)}}_fixMissingSamples(){const e=this.samples;if(!e)return;const t=e.length;if(!this.programNode||t<3)return;const s=this._idToNode,i=this.programNode.id,r=this.gcNode?this.gcNode.id:-1,o=this.idleNode?this.idleNode.id:-1;let n=e[0],l=e[1],d=0;for(let r=1;r<t-1;r++){const t=e[r+1];l!==i||h(n)||h(t)||c(s.get(n))!==c(s.get(t))||(++d,e[r]=n),n=l,l=t}function c(e){for(;e.parent&&e.parent.parent;)e=e.parent;return e}function h(e){return e===i||e===r||e===o}d&&a.Console.instance().warn(k`DevTools: CPU profile parser is fixing ${d} missing samples.`)}forEachFrame(e,t,s,i){if(!this.profileHead||!this.samples)return;s=s||0,i=i||1/0;const r=this.samples,o=this.timestamps,n=this._idToNode,a=this.gcNode,l=r.length,d=o.lowerBound(s);let c=0;const h=[];let u,g=this.profileHead.id,m=null;const p=this.maxDepth+3;this._stackStartTimes||(this._stackStartTimes=new Float64Array(p));const _=this._stackStartTimes;this._stackChildrenDuration||(this._stackChildrenDuration=new Float64Array(p));const b=this._stackChildrenDuration;let f,v;for(v=d;v<l&&(u=o[v],!(u>=i));v++){const s=r[v];if(s===g)continue;f=n.get(s);let i=n.get(g);if(f!==a){if(i===a&&m){const e=_[c],s=u-e;b[c-1]+=s,t(m.depth+1,a,e,s,s-b[c]),--c,i=m,g=i.id,m=null}for(;f&&f.depth>i.depth;)h.push(f),f=f.parent;for(;i!==f;){const e=_[c],s=u-e;b[c-1]+=s,t(i.depth,i,e,s,s-b[c]),--c,f&&f.depth===i.depth&&(h.push(f),f=f.parent),i=i.parent}for(;h.length;){const t=h.pop();f=t,e(t.depth,t,u),_[++c]=u,b[c]=0}g=s}else m=i,e(m.depth+1,a,u),_[++c]=u,b[c]=0,g=s}if(u=o[v]||this.profileEndTime,m&&n.get(g)===a){const e=_[c],s=u-e;b[c-1]+=s,t(m.depth+1,f,e,s,s-b[c]),--c,g=m.id}for(let e=n.get(g);e&&e.parent;e=e.parent){const s=_[c],i=u-s;b[c-1]+=i,t(e.depth,e,s,i,i-b[c]),--c}}nodeByIndex(e){return this.samples&&this._idToNode.get(this.samples[e])||null}}});const nr=new Set(["inherit","initial","unset"]),ar=/[\x20-\x7E]{4}/,lr=new RegExp(`(?:'(${ar.source})')|(?:"(${ar.source})")\\s+(${/[+-]?(?:\d*\.)?\d+(?:[eE]\d+)?/.source})`);const dr=/^"(.+)"|'(.+)'$/;function cr(e){return e.split(",").map((e=>e.trim()))}function hr(e){return e.replaceAll(/(\/\*(?:.|\s)*?\*\/)/g,"")}var ur=Object.freeze({__proto__:null,parseFontVariationSettings:function(e){if(nr.has(e.trim())||"normal"===e.trim())return[];const t=[];for(const s of cr(hr(e))){const e=s.match(lr);e&&t.push({tag:e[1]||e[2],value:parseFloat(e[3])})}return t},parseFontFamily:function(e){if(nr.has(e.trim()))return[];const t=[];for(const s of cr(hr(e))){const e=s.match(dr);e?t.push(e[1]||e[2]):t.push(s)}return t},splitByComma:cr,stripComments:hr});class gr extends N{constructor(e){super(e),this._agent=e.domdebuggerAgent(),this._runtimeModel=e.model(ti),this._domModel=e.model(_s),this._domModel.addEventListener(bs.DocumentUpdated,this._documentUpdated,this),this._domModel.addEventListener(bs.NodeRemoved,this._nodeRemoved,this),this._domBreakpoints=[],this._domBreakpointsSetting=i.Settings.instance().createLocalSetting("domBreakpoints",[]),this._domModel.existingDocument()&&this._documentUpdated()}runtimeModel(){return this._runtimeModel}async eventListeners(e){if(console.assert(e.runtimeModel()===this._runtimeModel),!e.objectId)return[];const t=await this._agent.invoke_getEventListeners({objectId:e.objectId}),s=[];for(const i of t.listeners||[]){const t=this._runtimeModel.debuggerModel().createRawLocationByScriptId(i.scriptId,i.lineNumber,i.columnNumber);t&&s.push(new br(this,e,i.type,i.useCapture,i.passive,i.once,i.handler?this._runtimeModel.createRemoteObject(i.handler):null,i.originalHandler?this._runtimeModel.createRemoteObject(i.originalHandler):null,t,null))}return s}retrieveDOMBreakpoints(){this._domModel.requestDocument()}domBreakpoints(){return this._domBreakpoints.slice()}hasDOMBreakpoint(e,t){return this._domBreakpoints.some((s=>s.node===e&&s.type===t))}setDOMBreakpoint(e,t){for(const s of this._domBreakpoints)if(s.node===e&&s.type===t)return this.toggleDOMBreakpoint(s,!0),s;const s=new _r(this,e,t,!0);return this._domBreakpoints.push(s),this._saveDOMBreakpoints(),this._enableDOMBreakpoint(s),this.dispatchEventToListeners(mr.DOMBreakpointAdded,s),s}removeDOMBreakpoint(e,t){this._removeDOMBreakpoints((s=>s.node===e&&s.type===t))}removeAllDOMBreakpoints(){this._removeDOMBreakpoints((e=>!0))}toggleDOMBreakpoint(e,t){t!==e.enabled&&(e.enabled=t,t?this._enableDOMBreakpoint(e):this._disableDOMBreakpoint(e),this.dispatchEventToListeners(mr.DOMBreakpointToggled,e))}_enableDOMBreakpoint(e){e.node.id&&(this._agent.invoke_setDOMBreakpoint({nodeId:e.node.id,type:e.type}),e.node.setMarker(pr,!0))}_disableDOMBreakpoint(e){e.node.id&&(this._agent.invoke_removeDOMBreakpoint({nodeId:e.node.id,type:e.type}),e.node.setMarker(pr,!!this._nodeHasBreakpoints(e.node)||null))}_nodeHasBreakpoints(e){for(const t of this._domBreakpoints)if(t.node===e&&t.enabled)return!0;return!1}resolveDOMBreakpointData(e){const t=e.type,s=this._domModel.nodeForId(e.nodeId);if(!t||!s)return null;let i=null,r=!1;return t===Protocol.DOMDebugger.DOMBreakpointType.SubtreeModified&&(r=e.insertion||!1,i=this._domModel.nodeForId(e.targetNodeId)),{type:t,node:s,targetNode:i,insertion:r}}_currentURL(){const e=this._domModel.existingDocument();return e?e.documentURL:""}_documentUpdated(){const e=this._domBreakpoints;this._domBreakpoints=[],this.dispatchEventToListeners(mr.DOMBreakpointsRemoved,e);const t=this._currentURL();for(const e of this._domBreakpointsSetting.get())e.url===t&&this._domModel.pushNodeByPathToFrontend(e.path).then(s.bind(this,e));function s(e,t){const s=t?this._domModel.nodeForId(t):null;if(!s)return;const i=new _r(this,s,e.type,e.enabled);this._domBreakpoints.push(i),e.enabled&&this._enableDOMBreakpoint(i),this.dispatchEventToListeners(mr.DOMBreakpointAdded,i)}}_removeDOMBreakpoints(e){const t=[],s=[];for(const i of this._domBreakpoints)e(i)?(t.push(i),i.enabled&&(i.enabled=!1,this._disableDOMBreakpoint(i))):s.push(i);t.length&&(this._domBreakpoints=s,this._saveDOMBreakpoints(),this.dispatchEventToListeners(mr.DOMBreakpointsRemoved,t))}_nodeRemoved(e){const t=e.data.node,s=t.children()||[];this._removeDOMBreakpoints((e=>e.node===t||-1!==s.indexOf(e.node)))}_saveDOMBreakpoints(){const e=this._currentURL(),t=this._domBreakpointsSetting.get().filter((t=>t.url!==e));for(const s of this._domBreakpoints)t.push({url:e,path:s.node.path(),type:s.type,enabled:s.enabled});this._domBreakpointsSetting.set(t)}}const mr={DOMBreakpointAdded:Symbol("DOMBreakpointAdded"),DOMBreakpointToggled:Symbol("DOMBreakpointToggled"),DOMBreakpointsRemoved:Symbol("DOMBreakpointsRemoved")},pr="breakpoint-marker";class _r{constructor(e,t,s,i){this.domDebuggerModel=e,this.node=t,this.type=s,this.enabled=i}}class br{constructor(e,t,s,i,r,o,n,a,l,d,c){this._domDebuggerModel=e,this._eventTarget=t,this._type=s,this._useCapture=i,this._passive=r,this._once=o,this._handler=n,this._originalHandler=a||n,this._location=l;const h=l.script();this._sourceURL=h?h.contentURL():"",this._customRemoveFunction=d,this._origin=c||br.Origin.Raw}domDebuggerModel(){return this._domDebuggerModel}type(){return this._type}useCapture(){return this._useCapture}passive(){return this._passive}once(){return this._once}handler(){return this._handler}location(){return this._location}sourceURL(){return this._sourceURL}originalHandler(){return this._originalHandler}canRemove(){return Boolean(this._customRemoveFunction)||this._origin!==br.Origin.FrameworkUser}remove(){if(!this.canRemove())return Promise.resolve(void 0);if(this._origin!==br.Origin.FrameworkUser){return this._eventTarget.callFunction((function(e,t,s){this.removeEventListener(e,t,s),this["on"+e]&&(this["on"+e]=void 0)}),[He.toCallArgument(this._type),He.toCallArgument(this._originalHandler),He.toCallArgument(this._useCapture)]).then((()=>{}))}if(this._customRemoveFunction){return this._customRemoveFunction.callFunction((function(e,t,s,i){this.call(null,e,t,s,i)}),[He.toCallArgument(this._type),He.toCallArgument(this._originalHandler),He.toCallArgument(this._useCapture),He.toCallArgument(this._passive)]).then((()=>{}))}return Promise.resolve(void 0)}canTogglePassive(){return this._origin!==br.Origin.FrameworkUser}togglePassive(){return this._eventTarget.callFunction((function(e,t,s,i){this.removeEventListener(e,t,{capture:s}),this.addEventListener(e,t,{capture:s,passive:!i})}),[He.toCallArgument(this._type),He.toCallArgument(this._originalHandler),He.toCallArgument(this._useCapture),He.toCallArgument(this._passive)]).then((()=>{}))}origin(){return this._origin}markAsFramework(){this._origin=br.Origin.Framework}isScrollBlockingType(){return"touchstart"===this._type||"touchmove"===this._type||"mousewheel"===this._type||"wheel"===this._type}}br.Origin={Raw:"Raw",Framework:"Framework",FrameworkUser:"FrameworkUser"};class fr{constructor(e,t){this._category=e,this._title=t,this._enabled=!1}category(){return this._category}enabled(){return this._enabled}setEnabled(e){this._enabled=e}title(){return this._title}}class vr extends fr{constructor(e,t,s){super(e,t),this._type=s}type(){return this._type}}class yr extends fr{constructor(e,t,s,i,r){super(i,r),this._instrumentationName=e,this._eventName=t,this._eventTargetNames=s}setEnabled(e){if(this._enabled!==e){super.setEnabled(e);for(const e of F.instance().models(gr))this._updateOnModel(e)}}_updateOnModel(e){if(this._instrumentationName)this._enabled?e._agent.invoke_setInstrumentationBreakpoint({eventName:this._instrumentationName}):e._agent.invoke_removeInstrumentationBreakpoint({eventName:this._instrumentationName});else for(const t of this._eventTargetNames)this._enabled?e._agent.invoke_setEventListenerBreakpoint({eventName:this._eventName,targetName:t}):e._agent.invoke_removeEventListenerBreakpoint({eventName:this._eventName,targetName:t})}}let kr;yr._listener="listener:",yr._instrumentation="instrumentation:";class Sr{constructor(){this._xhrBreakpointsSetting=i.Settings.instance().createLocalSetting("xhrBreakpoints",[]),this._xhrBreakpoints=new Map;for(const e of this._xhrBreakpointsSetting.get())this._xhrBreakpoints.set(e.url,e.enabled);let e;this._cspViolationsToBreakOn=[],this._cspViolationsToBreakOn.push(new vr(k`Trusted Type Violations`,k`Sink Violations`,Protocol.DOMDebugger.CSPViolationType.TrustedtypeSinkViolation)),this._cspViolationsToBreakOn.push(new vr(k`Trusted Type Violations`,k`Policy Violations`,Protocol.DOMDebugger.CSPViolationType.TrustedtypePolicyViolation)),this._eventListenerBreakpoints=[],this._createInstrumentationBreakpoints(o.UIString("Animation"),["requestAnimationFrame","cancelAnimationFrame","requestAnimationFrame.callback"]),this._createInstrumentationBreakpoints(o.UIString("Canvas"),["canvasContextCreated","webglErrorFired","webglWarningFired"]),this._createInstrumentationBreakpoints(o.UIString("Geolocation"),["Geolocation.getCurrentPosition","Geolocation.watchPosition"]),this._createInstrumentationBreakpoints(o.UIString("Notification"),["Notification.requestPermission"]),this._createInstrumentationBreakpoints(o.UIString("Parse"),["Element.setInnerHTML","Document.write"]),this._createInstrumentationBreakpoints(o.UIString("Script"),["scriptFirstStatement","scriptBlockedByCSP"]),this._createInstrumentationBreakpoints(o.UIString("Timer"),["setTimeout","clearTimeout","setInterval","clearInterval","setTimeout.callback","setInterval.callback"]),this._createInstrumentationBreakpoints(o.UIString("Window"),["DOMWindow.close"]),this._createInstrumentationBreakpoints(o.UIString("WebAudio"),["audioContextCreated","audioContextClosed","audioContextResumed","audioContextSuspended"]),this._createEventListenerBreakpoints(o.UIString("Media"),["play","pause","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange","loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","waiting"],["audio","video"]),this._createEventListenerBreakpoints(o.UIString("Picture-in-Picture"),["enterpictureinpicture","leavepictureinpicture"],["video"]),this._createEventListenerBreakpoints(o.UIString("Picture-in-Picture"),["resize"],["PictureInPictureWindow"]),this._createEventListenerBreakpoints(o.UIString("Clipboard"),["copy","cut","paste","beforecopy","beforecut","beforepaste"],["*"]),this._createEventListenerBreakpoints(o.UIString("Control"),["resize","scroll","zoom","focus","blur","select","change","submit","reset"],["*"]),this._createEventListenerBreakpoints(o.UIString("Device"),["deviceorientation","devicemotion"],["*"]),this._createEventListenerBreakpoints(o.UIString("DOM Mutation"),["DOMActivate","DOMFocusIn","DOMFocusOut","DOMAttrModified","DOMCharacterDataModified","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemoved","DOMNodeRemovedFromDocument","DOMSubtreeModified","DOMContentLoaded"],["*"]),this._createEventListenerBreakpoints(o.UIString("Drag / drop"),["drag","dragstart","dragend","dragenter","dragover","dragleave","drop"],["*"]),this._createEventListenerBreakpoints(o.UIString("Keyboard"),["keydown","keyup","keypress","input"],["*"]),this._createEventListenerBreakpoints(o.UIString("Load"),["load","beforeunload","unload","abort","error","hashchange","popstate"],["*"]),this._createEventListenerBreakpoints(o.UIString("Mouse"),["auxclick","click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout","mouseenter","mouseleave","mousewheel","wheel","contextmenu"],["*"]),this._createEventListenerBreakpoints(o.UIString("Pointer"),["pointerover","pointerout","pointerenter","pointerleave","pointerdown","pointerup","pointermove","pointercancel","gotpointercapture","lostpointercapture","pointerrawupdate"],["*"]),this._createEventListenerBreakpoints(o.UIString("Touch"),["touchstart","touchmove","touchend","touchcancel"],["*"]),this._createEventListenerBreakpoints(o.UIString("Worker"),["message","messageerror"],["*"]),this._createEventListenerBreakpoints(o.UIString("XHR"),["readystatechange","load","loadstart","loadend","abort","error","progress","timeout"],["xmlhttprequest","xmlhttprequestupload"]),e=this._resolveEventListenerBreakpoint("instrumentation:setTimeout.callback"),e&&(e._title=o.UIString("setTimeout fired")),e=this._resolveEventListenerBreakpoint("instrumentation:setInterval.callback"),e&&(e._title=o.UIString("setInterval fired")),e=this._resolveEventListenerBreakpoint("instrumentation:scriptFirstStatement"),e&&(e._title=o.UIString("Script First Statement")),e=this._resolveEventListenerBreakpoint("instrumentation:scriptBlockedByCSP"),e&&(e._title=o.UIString("Script Blocked by Content Security Policy")),e=this._resolveEventListenerBreakpoint("instrumentation:requestAnimationFrame"),e&&(e._title=o.UIString("Request Animation Frame")),e=this._resolveEventListenerBreakpoint("instrumentation:cancelAnimationFrame"),e&&(e._title=o.UIString("Cancel Animation Frame")),e=this._resolveEventListenerBreakpoint("instrumentation:requestAnimationFrame.callback"),e&&(e._title=o.UIString("Animation Frame Fired")),e=this._resolveEventListenerBreakpoint("instrumentation:webglErrorFired"),e&&(e._title=o.UIString("WebGL Error Fired")),e=this._resolveEventListenerBreakpoint("instrumentation:webglWarningFired"),e&&(e._title=o.UIString("WebGL Warning Fired")),e=this._resolveEventListenerBreakpoint("instrumentation:Element.setInnerHTML"),e&&(e._title=o.UIString("Set innerHTML")),e=this._resolveEventListenerBreakpoint("instrumentation:canvasContextCreated"),e&&(e._title=o.UIString("Create canvas context")),e=this._resolveEventListenerBreakpoint("instrumentation:Geolocation.getCurrentPosition"),e&&(e._title="getCurrentPosition"),e=this._resolveEventListenerBreakpoint("instrumentation:Geolocation.watchPosition"),e&&(e._title="watchPosition"),e=this._resolveEventListenerBreakpoint("instrumentation:Notification.requestPermission"),e&&(e._title="requestPermission"),e=this._resolveEventListenerBreakpoint("instrumentation:DOMWindow.close"),e&&(e._title="window.close"),e=this._resolveEventListenerBreakpoint("instrumentation:Document.write"),e&&(e._title="document.write"),e=this._resolveEventListenerBreakpoint("instrumentation:audioContextCreated"),e&&(e._title=o.UIString("Create AudioContext")),e=this._resolveEventListenerBreakpoint("instrumentation:audioContextClosed"),e&&(e._title=o.UIString("Close AudioContext")),e=this._resolveEventListenerBreakpoint("instrumentation:audioContextResumed"),e&&(e._title=o.UIString("Resume AudioContext")),e=this._resolveEventListenerBreakpoint("instrumentation:audioContextSuspended"),e&&(e._title=o.UIString("Suspend AudioContext")),F.instance().observeModels(gr,this)}static instance(e={forceNew:null}){const{forceNew:t}=e;return kr&&!t||(kr=new Sr),kr}cspViolationBreakpoints(){return this._cspViolationsToBreakOn.slice()}_createInstrumentationBreakpoints(e,t){for(const s of t)this._eventListenerBreakpoints.push(new yr(s,"",[],e,s))}_createEventListenerBreakpoints(e,t,s){for(const i of t)this._eventListenerBreakpoints.push(new yr("",i,s,e,i))}_resolveEventListenerBreakpoint(e,t){const s="instrumentation:",i="listener:";let r="";if(e.startsWith(s))r=e.substring(s.length),e="";else{if(!e.startsWith(i))return null;e=e.substring(i.length)}t=(t||"*").toLowerCase();let o=null;for(const s of this._eventListenerBreakpoints)r&&s._instrumentationName===r&&(o=s),e&&s._eventName===e&&-1!==s._eventTargetNames.indexOf(t)&&(o=s),!o&&e&&s._eventName===e&&-1!==s._eventTargetNames.indexOf("*")&&(o=s);return o}eventListenerBreakpoints(){return this._eventListenerBreakpoints.slice()}resolveEventListenerBreakpointTitle(e){const t=e.eventName;if("instrumentation:webglErrorFired"===t&&e.webglErrorName){let t=e.webglErrorName;return t=t.replace(/^.*(0x[0-9a-f]+).*$/i,"$1"),o.UIString("WebGL Error Fired (%s)",t)}if("instrumentation:scriptBlockedByCSP"===t&&e.directiveText)return o.UIString("Script blocked due to Content Security Policy directive: %s",e.directiveText);const s=this._resolveEventListenerBreakpoint(t,e.targetName);return s?e.targetName?e.targetName+"."+s._title:s._title:""}resolveEventListenerBreakpoint(e){return this._resolveEventListenerBreakpoint(e.eventName,e.targetName)}updateCSPViolationBreakpoints(){const e=this._cspViolationsToBreakOn.filter((e=>e.enabled())).map((e=>e.type()));for(const t of F.instance().models(gr))this._updateCSPViolationBreakpointsForModel(t,e)}_updateCSPViolationBreakpointsForModel(e,t){e._agent.invoke_setBreakOnCSPViolation({violationTypes:t})}xhrBreakpoints(){return this._xhrBreakpoints}_saveXHRBreakpoints(){const e=[];for(const t of this._xhrBreakpoints.keys())e.push({url:t,enabled:this._xhrBreakpoints.get(t)});this._xhrBreakpointsSetting.set(e)}addXHRBreakpoint(e,t){if(this._xhrBreakpoints.set(e,t),t)for(const t of F.instance().models(gr))t._agent.invoke_setXHRBreakpoint({url:e});this._saveXHRBreakpoints()}removeXHRBreakpoint(e){const t=this._xhrBreakpoints.get(e);if(this._xhrBreakpoints.delete(e),t)for(const t of F.instance().models(gr))t._agent.invoke_removeXHRBreakpoint({url:e});this._saveXHRBreakpoints()}toggleXHRBreakpoint(e,t){this._xhrBreakpoints.set(e,t);for(const s of F.instance().models(gr))t?s._agent.invoke_setXHRBreakpoint({url:e}):s._agent.invoke_removeXHRBreakpoint({url:e});this._saveXHRBreakpoints()}modelAdded(e){for(const t of this._xhrBreakpoints.keys())this._xhrBreakpoints.get(t)&&e._agent.invoke_setXHRBreakpoint({url:t});for(const t of this._eventListenerBreakpoints)t._enabled&&t._updateOnModel(e);const t=this._cspViolationsToBreakOn.filter((e=>e.enabled())).map((e=>e.type()));this._updateCSPViolationBreakpointsForModel(e,t)}modelRemoved(e){}}N.register(gr,O.DOM,!1);var wr=Object.freeze({__proto__:null,DOMDebuggerModel:gr,Events:mr,DOMBreakpoint:_r,EventListener:br,CategorizedBreakpoint:fr,CSPViolationBreakpoint:vr,EventListenerBreakpoint:yr,DOMDebuggerManager:Sr});class Cr extends N{constructor(e){super(e),this._emulationAgent=e.emulationAgent(),this._pageAgent=e.pageAgent(),this._deviceOrientationAgent=e.deviceOrientationAgent(),this._cssModel=e.model(Wt),this._overlayModel=e.model(as),this._overlayModel&&this._overlayModel.addEventListener(ls.InspectModeWillBeToggled,(()=>{this._updateTouch()}),this);const t=i.Settings.instance().moduleSetting("javaScriptDisabled");t.addChangeListener((async()=>await this._emulationAgent.invoke_setScriptExecutionDisabled({value:t.get()}))),t.get()&&this._emulationAgent.invoke_setScriptExecutionDisabled({value:!0});const s=i.Settings.instance().moduleSetting("emulation.touch");s.addChangeListener((()=>{const e=s.get();this.overrideEmulateTouch("force"===e)}));const r=i.Settings.instance().moduleSetting("emulation.idleDetection");r.addChangeListener((async()=>{const e=r.get();if("none"===e)return void await this.clearIdleOverride();const t=JSON.parse(e);await this.setIdleOverride(t)}));const o=i.Settings.instance().moduleSetting("emulatedCSSMedia"),n=i.Settings.instance().moduleSetting("emulatedCSSMediaFeaturePrefersColorScheme"),a=i.Settings.instance().moduleSetting("emulatedCSSMediaFeaturePrefersReducedMotion"),l=i.Settings.instance().moduleSetting("emulatedCSSMediaFeaturePrefersReducedData"),d=i.Settings.instance().moduleSetting("emulatedCSSMediaFeatureColorGamut");this._mediaConfiguration=new Map([["type",o.get()],["prefers-color-scheme",n.get()],["prefers-reduced-motion",a.get()],["prefers-reduced-data",l.get()],["color-gamut",d.get()]]),o.addChangeListener((()=>{this._mediaConfiguration.set("type",o.get()),this._updateCssMedia()})),n.addChangeListener((()=>{this._mediaConfiguration.set("prefers-color-scheme",n.get()),this._updateCssMedia()})),a.addChangeListener((()=>{this._mediaConfiguration.set("prefers-reduced-motion",a.get()),this._updateCssMedia()})),l.addChangeListener((()=>{this._mediaConfiguration.set("prefers-reduced-data",l.get()),this._updateCssMedia()})),d.addChangeListener((()=>{this._mediaConfiguration.set("color-gamut",d.get()),this._updateCssMedia()})),this._updateCssMedia();const c=i.Settings.instance().moduleSetting("emulatedVisionDeficiency");c.addChangeListener((()=>this._emulateVisionDeficiency(c.get()))),c.get()&&this._emulateVisionDeficiency(c.get());const h=i.Settings.instance().moduleSetting("localFontsDisabled");h.addChangeListener((()=>this._setLocalFontsDisabled(h.get()))),h.get()&&this._setLocalFontsDisabled(h.get());const u=i.Settings.instance().moduleSetting("avifFormatDisabled"),g=i.Settings.instance().moduleSetting("webpFormatDisabled"),m=()=>{const e=[];u.get()&&e.push(Protocol.Emulation.DisabledImageType.Avif),g.get()&&e.push(Protocol.Emulation.DisabledImageType.Webp),this._setDisabledImageTypes(e)};u.addChangeListener(m),g.addChangeListener(m),(g.get()||u.get())&&m(),this._touchEnabled=!1,this._touchMobile=!1,this._customTouchEnabled=!1,this._touchConfiguration={enabled:!1,configuration:Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile}}supportsDeviceEmulation(){return this.target().hasAllCapabilities(O.DeviceEmulation)}async resetPageScaleFactor(){await this._emulationAgent.invoke_resetPageScaleFactor()}async emulateDevice(e){e?await this._emulationAgent.invoke_setDeviceMetricsOverride(e):await this._emulationAgent.invoke_clearDeviceMetricsOverride()}overlayModel(){return this._overlayModel}async emulateLocation(e){if(!e||e.error)await Promise.all([this._emulationAgent.invoke_clearGeolocationOverride(),this._emulationAgent.invoke_setTimezoneOverride({timezoneId:""}),this._emulationAgent.invoke_setLocaleOverride({locale:""}),this._emulationAgent.invoke_setUserAgentOverride({userAgent:xe.instance().currentUserAgent()})]);else{function t(e,t){const s=t.getError();return s?Promise.reject({type:e,message:s}):Promise.resolve()}await Promise.all([this._emulationAgent.invoke_setGeolocationOverride({latitude:e.latitude,longitude:e.longitude,accuracy:Ir.DefaultGeoMockAccuracy}).then((e=>t("emulation-set-location",e))),this._emulationAgent.invoke_setTimezoneOverride({timezoneId:e.timezoneId}).then((e=>t("emulation-set-timezone",e))),this._emulationAgent.invoke_setLocaleOverride({locale:e.locale}).then((e=>t("emulation-set-locale",e))),this._emulationAgent.invoke_setUserAgentOverride({userAgent:xe.instance().currentUserAgent(),acceptLanguage:e.locale}).then((e=>t("emulation-set-user-agent",e)))])}}async emulateDeviceOrientation(e){e?await this._deviceOrientationAgent.invoke_setDeviceOrientationOverride({alpha:e.alpha,beta:e.beta,gamma:e.gamma}):await this._deviceOrientationAgent.invoke_clearDeviceOrientationOverride()}async setIdleOverride(e){await this._emulationAgent.invoke_setIdleOverride(e)}async clearIdleOverride(){await this._emulationAgent.invoke_clearIdleOverride()}async _emulateCSSMedia(e,t){await this._emulationAgent.invoke_setEmulatedMedia({media:e,features:t}),this._cssModel&&this._cssModel.mediaQueryResultChanged()}async _emulateVisionDeficiency(e){await this._emulationAgent.invoke_setEmulatedVisionDeficiency({type:e})}_setLocalFontsDisabled(e){this._cssModel&&this._cssModel.setLocalFontsEnabled(!e)}_setDisabledImageTypes(e){this._emulationAgent.invoke_setDisabledImageTypes({imageTypes:e})}async setCPUThrottlingRate(e){await this._emulationAgent.invoke_setCPUThrottlingRate({rate:e})}async emulateTouch(e,t){this._touchEnabled=e,this._touchMobile=t,await this._updateTouch()}async overrideEmulateTouch(e){this._customTouchEnabled=e,await this._updateTouch()}async _updateTouch(){let e={enabled:this._touchEnabled,configuration:this._touchMobile?Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile:Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Desktop};this._customTouchEnabled&&(e={enabled:!0,configuration:Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile}),this._overlayModel&&this._overlayModel.inspectModeEnabled()&&(e={enabled:!1,configuration:Protocol.Emulation.SetEmitTouchEventsForMouseRequestConfiguration.Mobile}),(this._touchConfiguration.enabled||e.enabled)&&(this._touchConfiguration.enabled&&e.enabled&&this._touchConfiguration.configuration===e.configuration||(this._touchConfiguration=e,await this._emulationAgent.invoke_setTouchEmulationEnabled({enabled:e.enabled,maxTouchPoints:1}),await this._emulationAgent.invoke_setEmitTouchEventsForMouse({enabled:e.enabled,configuration:e.configuration})))}_updateCssMedia(){const e=this._mediaConfiguration.get("type"),t=[{name:"prefers-color-scheme",value:this._mediaConfiguration.get("prefers-color-scheme")},{name:"prefers-reduced-motion",value:this._mediaConfiguration.get("prefers-reduced-motion")},{name:"prefers-reduced-data",value:this._mediaConfiguration.get("prefers-reduced-data")},{name:"color-gamut",value:this._mediaConfiguration.get("color-gamut")}];this._emulateCSSMedia(e,t)}}class Ir{constructor(e,t,s,i,r){this.latitude=e,this.longitude=t,this.timezoneId=s,this.locale=i,this.error=r}static parseSetting(e){if(e){const[t,s,i,r]=e.split(":"),[o,n]=t.split("@");return new Ir(parseFloat(o),parseFloat(n),s,i,Boolean(r))}return new Ir(0,0,"","",!1)}static parseUserInput(e,t,s,i){if(!e&&!t)return null;const{valid:r}=Ir.latitudeValidator(e),{valid:o}=Ir.longitudeValidator(t);if(!r&&!o)return null;const n=r?parseFloat(e):-1,a=o?parseFloat(t):-1;return new Ir(n,a,s,i,!1)}static latitudeValidator(e){const t=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&t>=-90&&t<=90,errorMessage:void 0}}static longitudeValidator(e){const t=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&t>=-180&&t<=180,errorMessage:void 0}}static timezoneIdValidator(e){return{valid:""===e||/[a-zA-Z]/.test(e),errorMessage:void 0}}static localeValidator(e){return{valid:""===e||/[a-zA-Z]{2}/.test(e),errorMessage:void 0}}toSetting(){return`${this.latitude}@${this.longitude}:${this.timezoneId}:${this.locale}:${this.error||""}`}}Ir.DefaultGeoMockAccuracy=150;class Rr{constructor(e,t,s){this.alpha=e,this.beta=t,this.gamma=s}static parseSetting(e){if(e){const t=JSON.parse(e);return new Rr(t.alpha,t.beta,t.gamma)}return new Rr(0,0,0)}static parseUserInput(e,t,s){if(!e&&!t&&!s)return null;const{valid:i}=Rr.alphaAngleValidator(e),{valid:r}=Rr.betaAngleValidator(t),{valid:o}=Rr.gammaAngleValidator(s);if(!i&&!r&&!o)return null;const n=i?parseFloat(e):-1,a=r?parseFloat(t):-1,l=o?parseFloat(s):-1;return new Rr(n,a,l)}static angleRangeValidator(e,t){const s=parseFloat(e);return{valid:/^([+-]?[\d]+(\.\d+)?|[+-]?\.\d+)$/.test(e)&&s>=t.minimum&&s<t.maximum,errorMessage:void 0}}static alphaAngleValidator(e){return Rr.angleRangeValidator(e,{minimum:0,maximum:360})}static betaAngleValidator(e){return Rr.angleRangeValidator(e,{minimum:-180,maximum:180})}static gammaAngleValidator(e){return Rr.angleRangeValidator(e,{minimum:-90,maximum:90})}toSetting(){return JSON.stringify(this)}}N.register(Cr,O.Emulation,!0);var Tr=Object.freeze({__proto__:null,EmulationModel:Cr,Location:Ir,DeviceOrientation:Rr});class xr{constructor(e){this._backingStorage=e,this._firstWritePending=!0,this._processById=new Map,this._processByName=new Map,this._minimumRecordTime=0,this._maximumRecordTime=0,this._devToolsMetadataEvents=[],this._asyncEvents=[],this._openAsyncEvents=new Map,this._openNestableAsyncEvents=new Map,this._profileGroups=new Map,this._parsedCategories=new Map,this._mainFrameNavStartTimes=new Map}static isNestableAsyncPhase(e){return"b"===e||"e"===e||"n"===e}static isAsyncBeginPhase(e){return"S"===e||"b"===e}static isAsyncPhase(e){return xr.isNestableAsyncPhase(e)||"S"===e||"T"===e||"F"===e||"p"===e}static isFlowPhase(e){return"s"===e||"t"===e||"f"===e}static isCompletePhase(e){return"X"===e}static isTopLevelEvent(e){return e.hasCategory(Nr)&&"RunTask"===e.name||e.hasCategory(Lr)||e.hasCategory(Er)&&"Program"===e.name}static _extractId(e){const t=e.scope||"";if(void 0===e.id2)return t&&e.id?`${t}@${e.id}`:e.id;const s=e.id2;if("object"==typeof s&&"global"in s!="local"in s)return void 0!==s.global?`:${t}:${s.global}`:`:${t}:${e.pid}:${s.local}`;console.error(`Unexpected id2 field at ${e.ts/1e3}, one and only one of 'local' and 'global' should be present.`)}static browserMainThread(e){const t=e.sortedProcesses();if(!t.length)return null;const s="CrBrowserMain",i=[],r=[];for(const e of t)e.name().toLowerCase().endsWith("browser")&&i.push(e),r.push(...e.sortedThreads().filter((e=>e.name()===s)));if(1===r.length)return r[0];if(1===i.length)return i[0].threadByName(s);const o=e.devToolsMetadataEvents().filter((e=>"TracingStartedInBrowser"===e.name));return 1===o.length?o[0].thread:(a.Console.instance().error("Failed to find browser main thread in trace, some timeline features may be unavailable"),null)}devToolsMetadataEvents(){return this._devToolsMetadataEvents}addEvents(e){for(let t=0;t<e.length;++t)this._addEvent(e[t])}tracingComplete(){this._processPendingAsyncEvents(),this._backingStorage.appendString(this._firstWritePending?"[]":"]"),this._backingStorage.finishWriting(),this._firstWritePending=!1;for(const e of this._processById.values())for(const t of e._threads.values())t.tracingComplete()}dispose(){this._firstWritePending||this._backingStorage.reset()}adjustTime(e){this._minimumRecordTime+=e,this._maximumRecordTime+=e;for(const t of this._processById.values())for(const s of t._threads.values()){for(const t of s.events())t.startTime+=e,"number"==typeof t.endTime&&(t.endTime+=e);for(const t of s.asyncEvents())t.startTime+=e,"number"==typeof t.endTime&&(t.endTime+=e)}}_addEvent(e){let t=this._processById.get(e.pid);t||(t=new Ur(this,e.pid),this._processById.set(e.pid,t));const s=Mr;this._backingStorage.appendString(this._firstWritePending?"[":",\n"),this._firstWritePending=!1;const i=JSON.stringify(e);let r=null;e.ph===s.SnapshotObject&&i.length>1e4?r=this._backingStorage.appendAccessibleString(i):this._backingStorage.appendString(i);const o=e.ts/1e3;if(!o||this._minimumRecordTime&&!(o<this._minimumRecordTime)||e.ph!==s.Begin&&e.ph!==s.Complete&&e.ph!==s.Instant||(this._minimumRecordTime=o),"navigationStart"===e.name){const s=e.args.data;if(s){const{isLoadingMainFrame:i,documentLoaderURL:r,navigationId:o}=s;if(i&&""!==r){const s=t.threadById(e.tid),i=Ar.fromPayload(e,s);this._mainFrameNavStartTimes.set(o,i)}}}const n=(e.ts+(e.dur||0))/1e3;this._maximumRecordTime=Math.max(this._maximumRecordTime,n);const a=t._addEvent(e);if(a)if(e.ph!==s.Sample){if(xr.isAsyncPhase(e.ph)&&this._asyncEvents.push(a),a._setBackingStorage(r),a.hasCategory(Er)&&this._devToolsMetadataEvents.push(a),e.ph===s.Metadata)switch(e.name){case Pr.ProcessSortIndex:t._setSortIndex(e.args.sort_index);break;case Pr.ProcessName:{const s=e.args.name;t._setName(s),this._processByName.set(s,t);break}case Pr.ThreadSortIndex:t.threadById(e.tid)._setSortIndex(e.args.sort_index);break;case Pr.ThreadName:t.threadById(e.tid)._setName(e.args.name)}}else this._addSampleEvent(a)}_addSampleEvent(e){const t=`${e.thread.process().id()}:${e.id}`,s=this._profileGroups.get(t);s?s._addChild(e):this._profileGroups.set(t,new Br(e))}profileGroup(e){return this._profileGroups.get(`${e.thread.process().id()}:${e.id}`)||null}minimumRecordTime(){return this._minimumRecordTime}maximumRecordTime(){return this._maximumRecordTime}navStartTimes(){return this._mainFrameNavStartTimes}sortedProcesses(){return Fr.sort([...this._processById.values()])}processByName(e){return this._processByName.get(e)}processById(e){return this._processById.get(e)||null}threadByName(e,t){const s=this.processByName(e);return s&&s.threadByName(t)}extractEventsFromThreadByName(e,t,s){const i=this.threadByName(e,t);return i?i.removeEventsByName(s):[]}_processPendingAsyncEvents(){this._asyncEvents.sort(Ar.compareStartTime);for(let e=0;e<this._asyncEvents.length;++e){const t=this._asyncEvents[e];xr.isNestableAsyncPhase(t.phase)?this._addNestableAsyncEvent(t):this._addAsyncEvent(t)}this._asyncEvents=[],this._closeOpenAsyncEvents()}_closeOpenAsyncEvents(){for(const e of this._openAsyncEvents.values())e.setEndTime(this._maximumRecordTime),e.steps[0].setEndTime(this._maximumRecordTime);this._openAsyncEvents.clear();for(const e of this._openNestableAsyncEvents.values())for(;e.length;){const t=e.pop();t&&t.setEndTime(this._maximumRecordTime)}this._openNestableAsyncEvents.clear()}_addNestableAsyncEvent(e){const t=Mr,s=e.categoriesString+"."+e.id;let i=this._openNestableAsyncEvents.get(s);switch(e.phase){case t.NestableAsyncBegin:{i||(i=[],this._openNestableAsyncEvents.set(s,i));const t=new Dr(e);i.push(t),e.thread._addAsyncEvent(t);break}case t.NestableAsyncInstant:if(i&&i.length){const e=i[i.length-1];e&&e._addStep(e)}break;case t.NestableAsyncEnd:{if(!i||!i.length)break;const t=i.pop();if(!t)break;if(t.name!==e.name){console.error(`Begin/end event mismatch for nestable async event, ${t.name} vs. ${e.name}, key: ${s}`);break}t._addStep(e)}}}_addAsyncEvent(e){const t=Mr,s=e.categoriesString+"."+e.name+"."+e.id;let i=this._openAsyncEvents.get(s);if(e.phase===t.AsyncBegin)return i?void console.error(`Event ${e.name} has already been started`):(i=new Dr(e),this._openAsyncEvents.set(s,i),void e.thread._addAsyncEvent(i));if(i){if(e.phase===t.AsyncEnd)return i._addStep(e),void this._openAsyncEvents.delete(s);if(e.phase===t.AsyncStepInto||e.phase===t.AsyncStepPast){const s=i.steps[i.steps.length-1];return s&&s.phase!==t.AsyncBegin&&s.phase!==e.phase?void console.assert(!1,"Async event step phase mismatch: "+s.phase+" at "+s.startTime+" vs. "+e.phase+" at "+e.startTime):void i._addStep(e)}console.assert(!1,"Invalid async event phase")}}backingStorage(){return this._backingStorage}_parsedCategoriesForString(e){let t=this._parsedCategories.get(e);return t||(t=new Set(e?e.split(","):[]),this._parsedCategories.set(e,t)),t}}const Mr={Begin:"B",End:"E",Complete:"X",Instant:"I",AsyncBegin:"S",AsyncStepInto:"T",AsyncStepPast:"p",AsyncEnd:"F",NestableAsyncBegin:"b",NestableAsyncEnd:"e",NestableAsyncInstant:"n",FlowBegin:"s",FlowStep:"t",FlowEnd:"f",Metadata:"M",Counter:"C",Sample:"P",CreateObject:"N",SnapshotObject:"O",DeleteObject:"D"},Pr={ProcessSortIndex:"process_sort_index",ProcessName:"process_name",ThreadSortIndex:"thread_sort_index",ThreadName:"thread_name"},Lr="toplevel",Er="disabled-by-default-devtools.timeline",Nr="disabled-by-default-devtools.timeline";class Ar{constructor(e,t,s,i,r){this.categoriesString=e||"",this._parsedCategories=r._model._parsedCategoriesForString(this.categoriesString),this.name=t,this.phase=s,this.startTime=i,this.thread=r,this.args={},this.id,this.bind_id,this.ordinal=0,this.selfTime=0}static fromPayload(e,t){const s=new Ar(e.cat,e.name,e.ph,e.ts/1e3,t);e.args&&s.addArgs(e.args),"number"==typeof e.dur&&s.setEndTime((e.ts+e.dur)/1e3);const i=xr._extractId(e);return void 0!==i&&(s.id=i),e.bind_id&&(s.bind_id=e.bind_id),s}static compareStartTime(e,t){return e&&t?e.startTime-t.startTime:0}static orderedCompareStartTime(e,t){return e.startTime-t.startTime||e.ordinal-t.ordinal||-1}hasCategory(e){return this._parsedCategories.has(e)}setEndTime(e){e<this.startTime?console.assert(!1,"Event out of order: "+this.name):(this.endTime=e,this.duration=e-this.startTime)}addArgs(e){for(const t in e){t in this.args&&console.error("Same argument name ("+t+") is used for begin and end phases of "+this.name),this.args[t]=e[t]}}_complete(e){e.args?this.addArgs(e.args):console.error("Missing mandatory event argument 'args' at "+e.startTime),this.setEndTime(e.startTime)}_setBackingStorage(e){}}class Or extends Ar{constructor(e,t,s,i){super(e,t,Mr.SnapshotObject,s,i),this._backingStorage=null,this.id,this._objectPromise=null}static fromPayload(e,t){const s=new Or(e.cat,e.name,e.ts/1e3,t),i=xr._extractId(e);return void 0!==i&&(s.id=i),e.args&&e.args.snapshot?(e.args&&s.addArgs(e.args),s):(console.error("Missing mandatory 'snapshot' argument at "+e.ts/1e3),s)}requestObject(e){const t=this.args.snapshot;if(t)return void e(t);const s=this._backingStorage;s&&s().then((function(t){if(!t)return void e(null);try{const s=JSON.parse(t);e(s.args.snapshot)}catch(t){a.Console.instance().error("Malformed event data in backing storage"),e(null)}}),e.bind(null,null))}objectPromise(){return this._objectPromise||(this._objectPromise=new Promise(this.requestObject.bind(this))),this._objectPromise}_setBackingStorage(e){e&&(this._backingStorage=e,this.args={})}}class Dr extends Ar{constructor(e){super(e.categoriesString,e.name,e.phase,e.startTime,e.thread),this.addArgs(e.args),this.steps=[e],this.causedFrame=!1}_addStep(e){this.steps.push(e),e.phase!==Mr.AsyncEnd&&e.phase!==Mr.NestableAsyncEnd||(this.setEndTime(e.startTime),this.steps[0].setEndTime(e.startTime))}}class Br{constructor(e){this.children=[e]}_addChild(e){this.children.push(e)}}class Fr{static sort(e){return e.sort((function(e,t){return e._sortIndex!==t._sortIndex?e._sortIndex-t._sortIndex:e.name().localeCompare(t.name())}))}}class qr{constructor(e,t){this._model=e,this._id=t,this._name="",this._sortIndex=0}_setName(e){this._name=e}name(){return this._name}_setSortIndex(e){this._sortIndex=e}}class Ur extends qr{constructor(e,t){super(e,t),this._threads=new Map,this._threadByName=new Map}id(){return this._id}threadById(e){let t=this._threads.get(e);return t||(t=new Hr(this,e),this._threads.set(e,t)),t}threadByName(e){return this._threadByName.get(e)||null}_setThreadByName(e,t){this._threadByName.set(e,t)}_addEvent(e){return this.threadById(e.tid)._addEvent(e)}sortedThreads(){return Fr.sort([...this._threads.values()])}}class Hr extends qr{constructor(e,t){super(e._model,t),this._process=e,this._events=[],this._asyncEvents=[],this._lastTopLevelEvent=null}tracingComplete(){this._asyncEvents.sort(Ar.compareStartTime),this._events.sort(Ar.compareStartTime);const e=Mr,t=[],s=new Set;for(let i=0;i<this._events.length;++i){const r=this._events[i];switch(r.ordinal=i,r.phase){case e.End:{if(s.add(i),!t.length)continue;const e=t.pop();if(!e)continue;e.name!==r.name||e.categoriesString!==r.categoriesString?console.error("B/E events mismatch at "+e.startTime+" ("+e.name+") vs. "+r.startTime+" ("+r.name+")"):e._complete(r);break}case e.Begin:t.push(r)}}for(;t.length;){const e=t.pop();e&&e.setEndTime(this._model.maximumRecordTime())}this._events=this._events.filter(((e,t)=>!s.has(t)))}_addEvent(e){const t=e.ph===Mr.SnapshotObject?Or.fromPayload(e,this):Ar.fromPayload(e,this);if(xr.isTopLevelEvent(t)){const e=this._lastTopLevelEvent;if(e&&(e.endTime||0)>t.startTime)return null;this._lastTopLevelEvent=t}return this._events.push(t),t}_addAsyncEvent(e){this._asyncEvents.push(e)}_setName(e){super._setName(e),this._process._setThreadByName(e,this)}id(){return this._id}process(){return this._process}events(){return this._events}asyncEvents(){return this._asyncEvents}removeEventsByName(e){const t=[];return this._events=this._events.filter((s=>!!s&&(s.name!==e||(t.push(s),!1)))),t}}var jr=Object.freeze({__proto__:null,TracingModel:xr,Phase:Mr,MetadataEvent:Pr,LegacyTopLevelEventCategory:Lr,DevToolsMetadataEventCategory:Er,DevToolsTimelineEventCategory:Nr,BackingStorage:class{appendString(e){}appendAccessibleString(e){throw new Error("Not implemented yet")}finishWriting(){}reset(){}},Event:Ar,ObjectSnapshot:Or,AsyncEvent:Dr,Process:Ur,Thread:Hr});const zr="disabled-by-default-devtools.screenshot",Vr={CaptureFrame:"CaptureFrame",Screenshot:"Screenshot"};class Wr{constructor(e,t,s){this._model=e,this.timestamp=t,this.index=s,this._imageData=null,this._snapshot=null}static _fromEvent(e,t,s){const i=new Wr(e,t.startTime,s);return i._imageData=t.args.data,i}static _fromSnapshot(e,t,s){const i=new Wr(e,t.startTime,s);return i._snapshot=t,i}model(){return this._model}imageDataPromise(){return this._imageData||!this._snapshot?Promise.resolve(this._imageData):this._snapshot.objectPromise()}}var Gr=Object.freeze({__proto__:null,FilmStripModel:class{constructor(e,t){this._frames=[],this._zeroTime=0,this._spanTime=0,this.reset(e,t)}reset(e,t){this._zeroTime=t||e.minimumRecordTime(),this._spanTime=e.maximumRecordTime()-this._zeroTime,this._frames=[];const s=xr.browserMainThread(e);if(!s)return;const i=s.events();for(let e=0;e<i.length;++e){const t=i[e];if(!(t.startTime<this._zeroTime)&&t.hasCategory(zr))if(t.name===Vr.CaptureFrame){t.args.data&&this._frames.push(Wr._fromEvent(this,t,this._frames.length))}else t.name===Vr.Screenshot&&this._frames.push(Wr._fromSnapshot(this,t,this._frames.length))}}frames(){return this._frames}zeroTime(){return this._zeroTime}spanTime(){return this._spanTime}frameByTimestamp(e){const t=this._frames.upperBound(e,((e,t)=>e-t.timestamp))-1;return t>=0?this._frames[t]:null}},Frame:Wr});let $r;class Kr extends e.ObjectWrapper{constructor(){super(),this._requests=[],this._sentNetworkRequests=[],this._receivedNetworkResponses=[],this._requestsSet=new Set,this._requestsMap=new Map,this._pageLoadForManager=new Map,this._isRecording=!0,this._modelListeners=new WeakMap,this._initiatorData=new WeakMap,F.instance().observeModels(ve,this);const e=i.Settings.instance().moduleSetting("network_log.record-log");e.addChangeListener((()=>{!i.Settings.instance().moduleSetting("network_log.preserve-log").get()&&e.get()&&this.reset(),this.setIsRecording(e.get())}),this),this._unresolvedPreflightRequests=new Map}static instance(){return $r||($r=new Kr),$r}modelAdded(e){const t=[];t.push(e.addEventListener(ye.RequestStarted,this._onRequestStarted,this)),t.push(e.addEventListener(ye.RequestUpdated,this._onRequestUpdated,this)),t.push(e.addEventListener(ye.RequestRedirected,this._onRequestRedirect,this)),t.push(e.addEventListener(ye.RequestFinished,this._onRequestUpdated,this)),t.push(e.addEventListener(ye.MessageGenerated,this._networkMessageGenerated.bind(this,e))),t.push(e.addEventListener(ye.ResponseReceived,this._onResponseReceived,this));const s=e.target().model(Ts);s&&(t.push(s.addEventListener(xs.WillReloadPage,this._willReloadPage,this)),t.push(s.addEventListener(xs.MainFrameNavigated,this._onMainFrameNavigated,this)),t.push(s.addEventListener(xs.Load,this._onLoad,this)),t.push(s.addEventListener(xs.DOMContentLoaded,this._onDOMContentLoaded.bind(this,s)))),this._modelListeners.set(e,t)}modelRemoved(e){this._removeNetworkManagerListeners(e)}_removeNetworkManagerListeners(e){l.EventTarget.removeEventListeners(this._modelListeners.get(e)||[])}setIsRecording(e){this._isRecording!==e&&(this._isRecording=e,e?F.instance().observeModels(ve,this):(F.instance().unobserveModels(ve,this),F.instance().models(ve).forEach(this._removeNetworkManagerListeners.bind(this))))}requestForURL(e){return this._requests.find((t=>t.url()===e))||null}originalRequestForURL(e){return this._sentNetworkRequests.find((t=>t.url===e))||null}originalResponseForURL(e){return this._receivedNetworkResponses.find((t=>t.url===e))||null}requests(){return this._requests}requestByManagerAndId(e,t){for(let s=this._requests.length-1;s>=0;s--){const i=this._requests[s];if(t===i.requestId()&&e===ve.forRequest(i))return i}return null}_requestByManagerAndURL(e,t){for(const s of this._requests)if(t===s.url()&&e===ve.forRequest(s))return s;return null}_initializeInitiatorSymbolIfNeeded(e){let t=this._initiatorData.get(e);return t||(t={info:null,chain:null,request:void 0},this._initiatorData.set(e,t),t)}initiatorInfoForRequest(e){const t=this._initializeInitiatorSymbolIfNeeded(e);if(t.info)return t.info;let s=Fe.Other,i="",r=-1/0,n=-1/0,a=null,l=null,d=null;const c=e.initiator(),h=e.redirectSource();if(h)s=Fe.Redirect,i=h.url();else if(c)if(c.type===Protocol.Network.InitiatorType.Parser)s=Fe.Parser,i=c.url?c.url:i,r="number"==typeof c.lineNumber?c.lineNumber:r,n="number"==typeof c.columnNumber?c.columnNumber:n;else if(c.type===Protocol.Network.InitiatorType.Script){for(let e=c.stack;e;){const t=e.callFrames.length?e.callFrames[0]:null;if(t){s=Fe.Script,i=t.url||o.UIString("<anonymous>"),r=t.lineNumber,n=t.columnNumber,a=t.scriptId;break}e=e.parent}!c.stack&&c.url&&(s=Fe.Script,i=c.url,r=c.lineNumber||0),c.stack&&c.stack.callFrames&&c.stack.callFrames.length&&(l=c.stack||null)}else c.type===Protocol.Network.InitiatorType.Preload?s=Fe.Preload:c.type===Protocol.Network.InitiatorType.Preflight?(s=Fe.Preflight,d=e.preflightInitiatorRequest()):c.type===Protocol.Network.InitiatorType.SignedExchange&&(s=Fe.SignedExchange,i=c.url||"");return t.info={type:s,url:i,lineNumber:r,columnNumber:n,scriptId:a,stack:l,initiatorRequest:d},t.info}initiatorGraphForRequest(e){const t=new Map,s=ve.forRequest(e);for(const i of this._requests){if(s===ve.forRequest(i)&&this._initiatorChain(i).has(e)){const e=this._initiatorRequest(i);e&&t.set(i,e)}}return{initiators:this._initiatorChain(e),initiated:t}}_initiatorChain(e){const t=this._initializeInitiatorSymbolIfNeeded(e);let s=t.chain;if(s)return s;s=new Set;let i=e;for(;i;){const e=this._initializeInitiatorSymbolIfNeeded(i);if(e.chain){v.addAll(s,e.chain);break}if(s.has(i))break;s.add(i),i=this._initiatorRequest(i)}return t.chain=s,s}_initiatorRequest(e){const t=this._initializeInitiatorSymbolIfNeeded(e);if(void 0!==t.request)return t.request;const s=this.initiatorInfoForRequest(e).url,i=ve.forRequest(e);return t.request=i?this._requestByManagerAndURL(i,s):null,t.request}_willReloadPage(){i.Settings.instance().moduleSetting("network_log.preserve-log").get()||this.reset()}_onMainFrameNavigated(e){const t=e.data,s=t.resourceTreeModel().target().model(ve);if(!s||t.resourceTreeModel().target().parentTarget())return;if(t.url!==t.unreachableUrl()&&t.url.startsWith("chrome-error://"))return;const r=this._requests,o=this._requests.filter((e=>ve.forRequest(e)===s)),n=this._requestsSet;this._requests=[],this._sentNetworkRequests=[],this._receivedNetworkResponses=[],this._requestsSet=new Set,this._requestsMap.clear(),this._unresolvedPreflightRequests.clear(),this.dispatchEventToListeners(Yr.Reset);let a=null;const l=[];for(const e of o)if(e.loaderId===t.loaderId){if(!a){a=new Jr(e);let t=e.redirectSource();for(;t;)l.push(t),t=t.redirectSource()}l.push(e)}const d=[];for(const e of r){if(!e.initiatedByServiceWorker())continue;l.some((t=>t.url()===e.url()&&t.issueTime()<=e.issueTime()))&&d.push(e)}l.push(...d);for(const e of l)a&&a.bindRequest(e),n.delete(e),this._addRequest(e);if(i.Settings.instance().moduleSetting("network_log.preserve-log").get())for(const e of n)this._addRequest(e);a&&this._pageLoadForManager.set(s,a)}_addRequest(e){this._requests.push(e),this._requestsSet.add(e);const t=this._requestsMap.get(e.requestId());t?t.push(e):this._requestsMap.set(e.requestId(),[e]),this._tryResolvePreflightRequests(e),this.dispatchEventToListeners(Yr.RequestAdded,e)}_tryResolvePreflightRequests(e){if(e.isPreflightRequest()){const t=e.initiator();if(t&&t.requestId){const s=this.requestsForId(t.requestId);s.length?e.setPreflightInitiatorRequest(s[0]):this._unresolvedPreflightRequests.set(t.requestId,e)}}else{const t=this._unresolvedPreflightRequests.get(e.requestId());if(t){this._unresolvedPreflightRequests.delete(e.requestId()),e.setPreflightRequest(t),t.setPreflightInitiatorRequest(e);const s=this._initiatorData.get(t);s&&(s.info=null),this.dispatchEventToListeners(Yr.RequestUpdated,t)}}}importRequests(e){this.reset(),this._requests=[],this._sentNetworkRequests=[],this._receivedNetworkResponses=[],this._requestsSet.clear(),this._requestsMap.clear(),this._unresolvedPreflightRequests.clear();for(const t of e)this._addRequest(t)}_onRequestStarted(e){const t=e.data.request;e.data.originalRequest&&this._sentNetworkRequests.push(e.data.originalRequest),this._requestsSet.add(t);const s=ve.forRequest(t),i=s?this._pageLoadForManager.get(s):null;i&&i.bindRequest(t),this._addRequest(t)}_onResponseReceived(e){const t=e.data.response;this._receivedNetworkResponses.push(t)}_onRequestUpdated(e){const t=e.data;this._requestsSet.has(t)&&this.dispatchEventToListeners(Yr.RequestUpdated,t)}_onRequestRedirect(e){const t=e.data;this._initiatorData.delete(t)}_onDOMContentLoaded(e,t){const s=e.target().model(ve),i=s?this._pageLoadForManager.get(s):null;i&&(i.contentLoadTime=t.data)}_onLoad(e){const t=e.data.resourceTreeModel.target().model(ve),s=t?this._pageLoadForManager.get(t):null;s&&(s.loadTime=e.data.loadTime)}reset(){this._requests=[],this._sentNetworkRequests=[],this._receivedNetworkResponses=[],this._requestsSet.clear(),this._requestsMap.clear(),this._unresolvedPreflightRequests.clear();const e=new Set(F.instance().models(ve));for(const t of this._pageLoadForManager.keys())e.has(t)||this._pageLoadForManager.delete(t);this.dispatchEventToListeners(Yr.Reset)}_networkMessageGenerated(e,t){const s=t.data,i=new Ni(e.target().model(ti),Ai.Network,s.warning?Oi.Warning:Oi.Info,s.message);this.associateConsoleMessageWithRequest(i,s.requestId),Li.instance().addMessage(i)}associateConsoleMessageWithRequest(e,t){const s=e.target(),i=s?s.model(ve):null;if(!i)return;const r=this.requestByManagerAndId(i,t);if(!r)return;Xr.set(e,r);const o=r.initiator();o&&(e.stackTrace=o.stack||void 0,o.url&&(e.url=o.url,e.line=o.lineNumber||0))}static requestForConsoleMessage(e){return Xr.get(e)||null}requestsForId(e){return this._requestsMap.get(e)||[]}}const Xr=new WeakMap;class Jr{constructor(e){this.id=++Jr._lastIdentifier,this.url=e.url(),this.startTime=e.startTime,this.loadTime,this.contentLoadTime,this.mainRequest=e,this._showDataSaverWarningIfNeeded()}async _showDataSaverWarningIfNeeded(){const e=ve.forRequest(this.mainRequest);if(!e)return;this.mainRequest.finished||await this.mainRequest.once(Be.FinishedLoading);const t=this.mainRequest.requestHeaderValue("Save-Data");if(!Jr._dataSaverMessageWasShown&&t&&"on"===t){const t=o.UIString("Consider disabling %s while debugging. For more info see: %s",o.UIString("Chrome Data Saver"),"https://support.google.com/chrome/?p=datasaver");e.dispatchEventToListeners(ye.MessageGenerated,{message:t,requestId:this.mainRequest.requestId(),warning:!0}),Jr._dataSaverMessageWasShown=!0}}static forRequest(e){return Qr.get(e)||null}bindRequest(e){Qr.set(e,this)}}Jr._lastIdentifier=0;const Qr=new WeakMap;Jr._dataSaverMessageWasShown=!1;const Yr={Reset:Symbol("Reset"),RequestAdded:Symbol("RequestAdded"),RequestUpdated:Symbol("RequestUpdated")};var Zr=Object.freeze({__proto__:null,NetworkLog:Kr,PageLoad:Jr,Events:Yr,InitiatorGraph:undefined,_InitiatorInfo:undefined});class eo{static pseudoWallTime(e,t){return new Date(1e3*e.pseudoWallTime(t))}static async build(e){const t=new eo,s=[];for(const t of e)s.push(to.build(t));const i=await Promise.all(s);return{version:"1.2",creator:t._creator(),pages:t._buildPages(e),entries:i}}_creator(){const e=/AppleWebKit\/([^ ]+)/.exec(window.navigator.userAgent);return{name:"WebInspector",version:e?e[1]:"n/a"}}_buildPages(e){const t=new Set,s=[];for(let i=0;i<e.length;++i){const r=e[i],o=Jr.forRequest(r);o&&!t.has(o.id)&&(t.add(o.id),s.push(this._convertPage(o,r)))}return s}_convertPage(e,t){return{startedDateTime:eo.pseudoWallTime(t,e.startTime).toJSON(),id:"page_"+e.id,title:e.url,pageTimings:{onContentLoad:this._pageEventTime(e,e.contentLoadTime),onLoad:this._pageEventTime(e,e.loadTime)}}}_pageEventTime(e,t){const s=e.startTime;return-1===t||-1===s?-1:to._toMilliseconds(t-s)}}class to{constructor(e){this._request=e}static _toMilliseconds(e){return-1===e?-1:1e3*e}static async build(e){const t=new to(e);let s=t._request.remoteAddress();const i=s.lastIndexOf(":");-1!==i&&(s=s.substr(0,i));const o=t._buildTimings();let n=0;for(const e of[o.blocked,o.dns,o.connect,o.send,o.wait,o.receive])n+=Math.max(e,0);const a=t._request.initiator();let l=null;a&&(l={type:a.type},void 0!==a.url&&(l.url=a.url),void 0!==a.lineNumber&&(l.lineNumber=a.lineNumber),a.stack&&(l.stack=a.stack));const d={_fromCache:void 0,_initiator:l,_priority:t._request.priority(),_resourceType:t._request.resourceType().name(),_webSocketMessages:void 0,cache:{},connection:void 0,pageref:void 0,request:await t._buildRequest(),response:t._buildResponse(),serverIPAddress:s.replace(/\[\]/g,""),startedDateTime:eo.pseudoWallTime(t._request,t._request.issueTime()).toJSON(),time:n,timings:o};t._request.cached()?d._fromCache=t._request.cachedInMemory()?"memory":"disk":delete d._fromCache,"0"!==t._request.connectionId?d.connection=t._request.connectionId:delete d.connection;const c=Jr.forRequest(t._request);if(c?d.pageref="page_"+c.id:delete d.pageref,t._request.resourceType()===r.resourceTypes.WebSocket){const e=[];for(const s of t._request.frames())e.push({type:s.type,time:s.time,opcode:s.opCode,data:s.text});d._webSocketMessages=e}else delete d._webSocketMessages;return d}async _buildRequest(){const e=this._request.requestHeadersText(),t={method:this._request.requestMethod,url:this._buildRequestURL(this._request.url()),httpVersion:this._request.requestHttpVersion(),headers:this._request.requestHeaders(),queryString:this._buildParameters(this._request.queryParameters||[]),cookies:this._buildCookies(this._request.requestCookies),headersSize:e?e.length:-1,bodySize:await this._requestBodySize(),postData:void 0},s=await this._buildPostData();return s?t.postData=s:delete t.postData,t}_buildResponse(){const e=this._request.responseHeadersText;return{status:this._request.statusCode,statusText:this._request.statusText,httpVersion:this._request.responseHttpVersion(),headers:this._request.responseHeaders,cookies:this._buildCookies(this._request.responseCookies),content:this._buildContent(),redirectURL:this._request.responseHeaderValue("Location")||"",headersSize:e?e.length:-1,bodySize:this.responseBodySize,_transferSize:this._request.transferSize,_error:this._request.localizedFailDescription}}_buildContent(){const e={size:this._request.resourceSize,mimeType:this._request.mimeType||"x-unknown",compression:void 0},t=this.responseCompression;return"number"==typeof t?e.compression=t:delete e.compression,e}_buildTimings(){const e=this._request.timing,t=this._request.issueTime(),s=this._request.startTime,i={blocked:-1,dns:-1,ssl:-1,connect:-1,send:0,wait:0,receive:0,_blocked_queueing:-1,_blocked_proxy:void 0},r=t<s?s-t:-1;i.blocked=to._toMilliseconds(r),i._blocked_queueing=to._toMilliseconds(r);let o=0;if(e){const t=h([e.dnsStart,e.connectStart,e.sendStart]);t!==1/0&&(i.blocked+=t),-1!==e.proxyEnd&&(i._blocked_proxy=e.proxyEnd-e.proxyStart),i._blocked_proxy&&i._blocked_proxy>i.blocked&&(i.blocked=i._blocked_proxy);const s=e.dnsEnd>=0?t:0,r=e.dnsEnd>=0?e.dnsEnd:-1;i.dns=r-s;const n=e.sslEnd>0?e.sslStart:0,a=e.sslEnd>0?e.sslEnd:-1;i.ssl=a-n;const l=e.connectEnd>=0?h([r,t]):0,d=e.connectEnd>=0?e.connectEnd:-1;i.connect=d-l;const c=e.sendEnd>=0?Math.max(d,r,t):0,u=e.sendEnd>=0?e.sendEnd:0;i.send=u-c,i.send<0&&(i.send=0),o=Math.max(u,d,a,r,t,0)}else if(-1===this._request.responseReceivedTime)return i.blocked=to._toMilliseconds(this._request.endTime-t),i;const n=e?e.requestTime:s,a=o,l=to._toMilliseconds(this._request.responseReceivedTime-n);i.wait=l-a;const d=l,c=to._toMilliseconds(this._request.endTime-n);return i.receive=Math.max(c-d,0),i;function h(e){return e.reduce(((e,t)=>t>=0&&t<e?t:e),1/0)}}async _buildPostData(){const e=await this._request.requestFormData();if(!e)return null;const t={mimeType:this._request.requestContentType()||"",text:e,params:void 0},s=await this._request.formParameters();return s?t.params=this._buildParameters(s):delete t.params,t}_buildParameters(e){return e.slice()}_buildRequestURL(e){return e.split("#",2)[0]}_buildCookies(e){return e.map(this._buildCookie.bind(this))}_buildCookie(e){const t={name:e.name(),value:e.value(),path:e.path(),domain:e.domain(),expires:e.expiresDate(eo.pseudoWallTime(this._request,this._request.startTime)),httpOnly:e.httpOnly(),secure:e.secure(),sameSite:void 0};return e.sameSite()?t.sameSite=e.sameSite():delete t.sameSite,t}async _requestBodySize(){const e=await this._request.requestFormData();return e?(new TextEncoder).encode(e).length:0}get responseBodySize(){return this._request.cached()||304===this._request.statusCode?0:this._request.responseHeadersText?this._request.transferSize-this._request.responseHeadersText.length:-1}get responseCompression(){if(!this._request.cached()&&304!==this._request.statusCode&&206!==this._request.statusCode&&this._request.responseHeadersText)return this._request.resourceSize-this.responseBodySize}}var so=Object.freeze({__proto__:null,HARLog:eo,Entry:to,Timing:undefined,Parameter:undefined,Content:undefined,Request:undefined,Response:undefined,EntryDTO:undefined,PostData:undefined,CookieDTO:undefined,Page:undefined,Creator:undefined,HARLogDTO:undefined});class io extends Hi{constructor(e,t){super([Protocol.Audits.InspectorIssueCode.HeavyAdIssue,e.reason].join("::"),t),this._issueDetails=e}heavyAds(){return[this._issueDetails]}primaryKey(){return`${Protocol.Audits.InspectorIssueCode.HeavyAdIssue}-${JSON.stringify(this._issueDetails)}`}getDescription(){return{title:n`An ad on your site has exceeded resource limits`,message:ro,issueKind:Ui.BreakingChange,links:[{link:"https://developers.google.com/web/updates/2020/05/heavy-ad-interventions",linkTitle:n`Handling Heavy Ad Interventions`}]}}getCategory(){return qi.HeavyAd}}function ro(){const e=document.createElement("div");e.classList.add("message");const t=document.createElement("p");t.textContent=n`
  Chrome identifies heavy ads on your site that use too many resources without a user gesture. Heavy ads have an impact on performance and harm the userâ€™s browsing experience. They increase battery drain, consume mobile data, and make your site slow. To improve the user experience, Chrome warns about or removes heavy ads.`,e.append(t);const s=n`An ad is considered heavy if the user has not interacted with it (for example, has not tapped or clicked it) and it meets any of the following criteria:`,i=[n`Uses the main thread for more than 60 seconds in total (CPU total limit)`,n`Uses the main thread for more than 15 seconds in any 30 second window (CPU peak limit)`,n`Uses more than 4 megabytes of network bandwidth (Network limit)`],r=document.createElement("p");r.appendChild(document.createTextNode(s));const o=document.createElement("ul");for(const e of i){const t=document.createElement("li");t.classList.add("plain-enum"),t.textContent=e,o.append(t)}r.appendChild(o),e.append(r);const a=document.createElement("p");return a.textContent=n`Stop this from happening by only showing ads that stay within resource limits.`,e.append(a),e}var oo=Object.freeze({__proto__:null,HeavyAdIssue:io});let no;class ao extends e.ObjectWrapper{constructor(){super(),this._isolates=new Map,this._isolateIdByModel=new Map,this._observers=new Set,F.instance().observeModels(ti,this),this._pollId=0}static instance({forceNew:e}={forceNew:!1}){return no&&!e||(no=new ao),no}observeIsolates(e){if(this._observers.has(e))throw new Error("Observer can only be registered once");this._observers.size||this._poll(),this._observers.add(e);for(const t of this._isolates.values())e.isolateAdded(t)}unobserveIsolates(e){this._observers.delete(e),this._observers.size||++this._pollId}modelAdded(e){this._modelAdded(e)}async _modelAdded(e){this._isolateIdByModel.set(e,null);const t=await e.isolateId();if(!this._isolateIdByModel.has(e))return;if(!t)return void this._isolateIdByModel.delete(e);this._isolateIdByModel.set(e,t);let s=this._isolates.get(t);if(s||(s=new ho(t),this._isolates.set(t,s)),s._models.add(e),1===s._models.size)for(const e of this._observers)e.isolateAdded(s);else for(const e of this._observers)e.isolateChanged(s)}modelRemoved(e){const t=this._isolateIdByModel.get(e);if(this._isolateIdByModel.delete(e),!t)return;const s=this._isolates.get(t);if(s)if(s._models.delete(e),s._models.size)for(const e of this._observers)e.isolateChanged(s);else{for(const e of this._observers)e.isolateRemoved(s);this._isolates.delete(t)}}isolateByModel(e){return this._isolates.get(this._isolateIdByModel.get(e)||"")||null}isolates(){return this._isolates.values()}async _poll(){const e=this._pollId;for(;e===this._pollId;)await Promise.all(Array.from(this.isolates(),(e=>e._update()))),await new Promise((e=>setTimeout(e,co)))}}const lo={MemoryChanged:Symbol("MemoryChanged")},co=2e3;class ho{constructor(e){this._id=e,this._models=new Set,this._usedHeapSize=0;const t=12e4/co;this._memoryTrend=new uo(t)}id(){return this._id}models(){return this._models}runtimeModel(){return this._models.values().next().value||null}heapProfilerModel(){const e=this.runtimeModel();return e&&e.heapProfilerModel()}async _update(){const e=this.runtimeModel(),t=e&&await e.heapUsage();t&&(this._usedHeapSize=t.usedSize,this._memoryTrend.add(this._usedHeapSize),ao.instance().dispatchEventToListeners(lo.MemoryChanged,this))}samplesCount(){return this._memoryTrend.count()}usedHeapSize(){return this._usedHeapSize}usedHeapSizeGrowRate(){return this._memoryTrend.fitSlope()}isMainThread(){const e=this.runtimeModel();return!!e&&"main"===e.target().id()}}class uo{constructor(e){this._maxCount=0|e,this._base,this._index,this._x,this._y,this._sx,this._sy,this._sxx,this._sxy,this.reset()}reset(){this._base=Date.now(),this._index=0,this._x=[],this._y=[],this._sx=0,this._sy=0,this._sxx=0,this._sxy=0}count(){return this._x.length}add(e,t){const s="number"==typeof t?t:Date.now()-this._base,i=e;if(this._x.length===this._maxCount){const e=this._x[this._index],t=this._y[this._index];this._sx-=e,this._sy-=t,this._sxx-=e*e,this._sxy-=e*t}this._sx+=s,this._sy+=i,this._sxx+=s*s,this._sxy+=s*i,this._x[this._index]=s,this._y[this._index]=i,this._index=(this._index+1)%this._maxCount}fitSlope(){const e=this.count();return e<2?0:(this._sxy-this._sx*this._sy/e)/(this._sxx-this._sx*this._sx/e)}}var go=Object.freeze({__proto__:null,IsolateManager:ao,Observer:class{isolateAdded(e){}isolateRemoved(e){}isolateChanged(e){}},Events:lo,MemoryTrendWindowMs:12e4,Isolate:ho,MemoryTrend:uo});class mo extends Hi{constructor(e,t){super("CrossOriginEmbedderPolicyIssue::"+e.reason,t),this._details=e}primaryKey(){return`${this.code()}-(${this._details.request.requestId})`}blockedByResponseDetails(){return[this._details]}requests(){return[this._details.request]}getCategory(){return qi.CrossOriginEmbedderPolicy}getDescription(){const e=po.get(this.code());return e||null}}const po=new Map([["CrossOriginEmbedderPolicyIssue::CorpNotSameOriginAfterDefaultedToSameOriginByCoep",{file:"issues/descriptions/CoepCorpNotSameOriginAfterDefaultedToSameOriginByCoep.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/coop-coep/",linkTitle:n`COOP and COEP`},{link:"https://web.dev/same-site-same-origin/",linkTitle:n`Same-Site and Same-Origin`}]}],["CrossOriginEmbedderPolicyIssue::CoepFrameResourceNeedsCoepHeader",{file:"issues/descriptions/CoepFrameResourceNeedsCoepHeader.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/coop-coep/",linkTitle:n`COOP and COEP`}]}],["CrossOriginEmbedderPolicyIssue::CoopSandboxedIframeCannotNavigateToCoopPage",{file:"issues/descriptions/CoepCoopSandboxedIframeCannotNavigateToCoopPage.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/coop-coep/",linkTitle:n`COOP and COEP`}]}],["CrossOriginEmbedderPolicyIssue::CorpNotSameSite",{file:"issues/descriptions/CoepCorpNotSameSite.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/coop-coep/",linkTitle:n`COOP and COEP`},{link:"https://web.dev/same-site-same-origin/",linkTitle:n`Same-Site and Same-Origin`}]}],["CrossOriginEmbedderPolicyIssue::CorpNotSameOrigin",{file:"issues/descriptions/CoepCorpNotSameOrigin.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/coop-coep/",linkTitle:n`COOP and COEP`},{link:"https://web.dev/same-site-same-origin/",linkTitle:n`Same-Site and Same-Origin`}]}]]);class _o extends Hi{constructor(e,t){super(Protocol.Audits.InspectorIssueCode.MixedContentIssue,t),this._issueDetails=e}static translateStatus(e){return bo.get(e)||e}requests(){return this._issueDetails.request?[this._issueDetails.request]:[]}mixedContents(){return[this._issueDetails]}getCategory(){return qi.MixedContent}getDescription(){return{file:"issues/descriptions/mixedContent.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/what-is-mixed-content/",linkTitle:n`Preventing mixed content`}]}}primaryKey(){return JSON.stringify(this._issueDetails)}}const bo=new Map([["MixedContentBlocked",n`blocked`],["MixedContentAutomaticallyUpgraded",n`automatically upgraded`],["MixedContentWarning",n`warned`]]);var fo=Object.freeze({__proto__:null,MixedContentIssue:_o});class vo extends Hi{constructor(e,t,s){super(e,s),this._issueDetails=t}primaryKey(){const{domain:e,path:t,name:s}=this._issueDetails.cookie,i=`${e};${t};${s}`,r=this._issueDetails.request?this._issueDetails.request.requestId:"no-request";return`${this.code()}-(${i})-(${r})`}static createIssuesFromSameSiteDetails(e,t){const s=[];if(e.cookieExclusionReasons&&e.cookieExclusionReasons.length>0){for(const i of e.cookieExclusionReasons){const r=vo.codeForSameSiteDetails(i,e.cookieWarningReasons,e.operation,e.cookieUrl);r&&s.push(new vo(r,e,t))}return s}if(e.cookieWarningReasons)for(const i of e.cookieWarningReasons){const r=vo.codeForSameSiteDetails(i,[],e.operation,e.cookieUrl);r&&s.push(new vo(r,e,t))}return s}static codeForSameSiteDetails(e,t,s,i){const r=i&&(i.startsWith("https://")||i.startsWith("wss://"))?"Secure":"Insecure";if(e===Protocol.Audits.SameSiteCookieExclusionReason.ExcludeSameSiteStrict||e===Protocol.Audits.SameSiteCookieExclusionReason.ExcludeSameSiteLax||e===Protocol.Audits.SameSiteCookieExclusionReason.ExcludeSameSiteUnspecifiedTreatedAsLax){if(t&&t.length>0){if(t.includes(Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteStrictLaxDowngradeStrict))return[Protocol.Audits.InspectorIssueCode.SameSiteCookieIssue,"ExcludeNavigationContextDowngrade",r].join("::");if(t.includes(Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteStrictCrossDowngradeStrict)||t.includes(Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteStrictCrossDowngradeLax)||t.includes(Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteLaxCrossDowngradeStrict)||t.includes(Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteLaxCrossDowngradeLax))return[Protocol.Audits.InspectorIssueCode.SameSiteCookieIssue,"ExcludeContextDowngrade",s,r].join("::")}return e===Protocol.Audits.SameSiteCookieExclusionReason.ExcludeSameSiteUnspecifiedTreatedAsLax?[Protocol.Audits.InspectorIssueCode.SameSiteCookieIssue,e,s].join("::"):null}return e===Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteStrictLaxDowngradeStrict?[Protocol.Audits.InspectorIssueCode.SameSiteCookieIssue,e,r].join("::"):e===Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteStrictCrossDowngradeStrict||e===Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteStrictCrossDowngradeLax||e===Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteLaxCrossDowngradeLax||e===Protocol.Audits.SameSiteCookieWarningReason.WarnSameSiteLaxCrossDowngradeStrict?[Protocol.Audits.InspectorIssueCode.SameSiteCookieIssue,"WarnCrossDowngrade",s,r].join("::"):[Protocol.Audits.InspectorIssueCode.SameSiteCookieIssue,e,s].join("::")}cookies(){return[this._issueDetails.cookie]}requests(){return this._issueDetails.request?[this._issueDetails.request]:[]}getCategory(){return qi.SameSiteCookie}getDescription(){const e=Do.get(this.code());return e||null}isCausedByThirdParty(){return yo(Ct.instance().getTopFrame(),this._issueDetails.cookieUrl)}}function yo(e,s){if(!e)return!0;if(!s||""===e.domainAndRegistry())return!1;const i=t.ParsedURL.fromString(s);return!!i&&!function(e,t){if(e.length<=t.length)return e===t;if(!e.endsWith(t))return!1;return e.substr(0,e.length-t.length).endsWith(".")}(i.domain(),e.domainAndRegistry())}const ko={file:"issues/descriptions/SameSiteUnspecifiedTreatedAsLaxRead.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},So={file:"issues/descriptions/SameSiteUnspecifiedTreatedAsLaxSet.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},wo={file:"issues/descriptions/SameSiteUnspecifiedLaxAllowUnsafeRead.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},Co={file:"issues/descriptions/SameSiteUnspecifiedLaxAllowUnsafeSet.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},Io={file:"issues/descriptions/SameSiteNoneInsecureErrorRead.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},Ro={file:"issues/descriptions/SameSiteNoneInsecureErrorSet.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},To={file:"issues/descriptions/SameSiteNoneInsecureWarnRead.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},xo={file:"issues/descriptions/SameSiteNoneInsecureWarnSet.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/samesite-cookies-explained/",linkTitle:k`SameSite cookies explained`}]},Mo=[{link:"https://web.dev/schemeful-samesite/",linkTitle:k`How Schemeful Same-Site Works`}];function Po(e){return{file:"issues/descriptions/SameSiteWarnStrictLaxDowngradeStrict.md",substitutions:new Map([["PLACEHOLDER_destination",e?k`a secure`:k`an insecure`],["PLACEHOLDER_origin",e?k`an insecure`:k`a secure`]]),issueKind:Ui.BreakingChange,links:Mo}}function Lo(e){return{file:"issues/descriptions/SameSiteExcludeNavigationContextDowngrade.md",substitutions:new Map([["PLACEHOLDER_destination",e?k`a secure`:k`an insecure`],["PLACEHOLDER_origin",e?k`an insecure`:k`a secure`]]),issueKind:Ui.BreakingChange,links:Mo}}function Eo(e){return{file:"issues/descriptions/SameSiteWarnCrossDowngradeRead.md",substitutions:new Map([["PLACEHOLDER_destination",e?k`a secure`:k`an insecure`],["PLACEHOLDER_origin",e?k`an insecure`:k`a secure`]]),issueKind:Ui.BreakingChange,links:Mo}}function No(e){return{file:"issues/descriptions/SameSiteExcludeContextDowngradeRead.md",substitutions:new Map([["PLACEHOLDER_destination",e?k`a secure`:k`an insecure`],["PLACEHOLDER_origin",e?k`an insecure`:k`a secure`]]),issueKind:Ui.BreakingChange,links:Mo}}function Ao(e){return{file:"issues/descriptions/SameSiteWarnCrossDowngradeSet.md",substitutions:new Map([["PLACEHOLDER_ORIGIN",e?k`a secure`:k`an insecure`],["PLACEHOLDER_DESTINATION",e?k`an insecure`:k`a secure`]]),issueKind:Ui.BreakingChange,links:Mo}}function Oo(e){return{file:"issues/descriptions/SameSiteExcludeContextDowngradeSet.md",substitutions:new Map([["PLACEHOLDER_destination",e?k`a secure`:k`an insecure`],["PLACEHOLDER_origin",e?k`an insecure`:k`a secure`]]),issueKind:Ui.BreakingChange,links:Mo}}const Do=new Map([["SameSiteCookieIssue::ExcludeSameSiteUnspecifiedTreatedAsLax::ReadCookie",ko],["SameSiteCookieIssue::ExcludeSameSiteUnspecifiedTreatedAsLax::SetCookie",So],["SameSiteCookieIssue::WarnSameSiteUnspecifiedLaxAllowUnsafe::ReadCookie",wo],["SameSiteCookieIssue::WarnSameSiteUnspecifiedLaxAllowUnsafe::SetCookie",Co],["SameSiteCookieIssue::WarnSameSiteUnspecifiedCrossSiteContext::ReadCookie",wo],["SameSiteCookieIssue::WarnSameSiteUnspecifiedCrossSiteContext::SetCookie",Co],["SameSiteCookieIssue::ExcludeSameSiteNoneInsecure::ReadCookie",Io],["SameSiteCookieIssue::ExcludeSameSiteNoneInsecure::SetCookie",Ro],["SameSiteCookieIssue::WarnSameSiteNoneInsecure::ReadCookie",To],["SameSiteCookieIssue::WarnSameSiteNoneInsecure::SetCookie",xo],["SameSiteCookieIssue::WarnSameSiteStrictLaxDowngradeStrict::Secure",Po(!0)],["SameSiteCookieIssue::WarnSameSiteStrictLaxDowngradeStrict::Insecure",Po(!1)],["SameSiteCookieIssue::WarnCrossDowngrade::ReadCookie::Secure",Eo(!0)],["SameSiteCookieIssue::WarnCrossDowngrade::ReadCookie::Insecure",Eo(!1)],["SameSiteCookieIssue::WarnCrossDowngrade::SetCookie::Secure",Ao(!0)],["SameSiteCookieIssue::WarnCrossDowngrade::SetCookie::Insecure",Ao(!1)],["SameSiteCookieIssue::ExcludeNavigationContextDowngrade::Secure",Lo(!0)],["SameSiteCookieIssue::ExcludeNavigationContextDowngrade::Insecure",Lo(!1)],["SameSiteCookieIssue::ExcludeContextDowngrade::ReadCookie::Secure",No(!0)],["SameSiteCookieIssue::ExcludeContextDowngrade::ReadCookie::Insecure",No(!1)],["SameSiteCookieIssue::ExcludeContextDowngrade::SetCookie::Secure",Oo(!0)],["SameSiteCookieIssue::ExcludeContextDowngrade::SetCookie::Insecure",Oo(!1)]]);var Bo=Object.freeze({__proto__:null,SameSiteCookieIssue:vo,isCausedByThirdParty:yo});class Fo extends Hi{constructor(e,t){super(Protocol.Audits.InspectorIssueCode.SharedArrayBufferTransferIssue,t),this.issueDetails=e}getCategory(){return qi.Other}sharedArrayBufferTransfers(){return[this.issueDetails]}details(){return this.issueDetails}getDescription(){return{file:"issues/descriptions/sharedArrayBufferTransfer.md",substitutions:void 0,issueKind:Ui.BreakingChange,links:[{link:"https://web.dev/enabling-shared-array-buffer/",linkTitle:n`Enabling Shared Array Buffer`}]}}primaryKey(){return JSON.stringify(this.issueDetails)}}var qo=Object.freeze({__proto__:null,SharedArrayBufferTransferIssue:Fo});class Uo extends N{constructor(e){super(e),this._enabled=!1,this._auditsAgent=null,this.ensureEnabled(),this._disposed=!1}ensureEnabled(){this._enabled||(this._enabled=!0,this.target().registerAuditsDispatcher(this),this._auditsAgent=this.target().auditsAgent(),this._auditsAgent.invoke_enable())}issueAdded(e){const t=this._createIssuesFromProtocolIssue(e.issue);for(const e of t)this.addIssue(e)}addIssue(e){this.dispatchEventToListeners(jo.IssueAdded,{issuesModel:this,issue:e})}_createIssuesFromProtocolIssue(e){const t=Ho.get(e.code);return t?t(this,e.details):(console.warn("No handler registered for issue code "+e.code),[])}dispose(){super.dispose(),this._disposed=!0}getTargetIfNotDisposed(){return this._disposed?null:this.target()}}const Ho=new Map([[Protocol.Audits.InspectorIssueCode.SameSiteCookieIssue,function(e,t){const s=t.sameSiteCookieIssueDetails;return s?vo.createIssuesFromSameSiteDetails(s,e):(console.warn("SameSite issue without details received."),[])}],[Protocol.Audits.InspectorIssueCode.MixedContentIssue,function(e,t){const s=t.mixedContentIssueDetails;return s?[new _o(s,e)]:(console.warn("Mixed content issue without details received."),[])}],[Protocol.Audits.InspectorIssueCode.HeavyAdIssue,function(e,t){const s=t.heavyAdIssueDetails;return s?[new io(s,e)]:(console.warn("Heavy Ad issue without details received."),[])}],[Protocol.Audits.InspectorIssueCode.ContentSecurityPolicyIssue,function(e,t){const s=t.contentSecurityPolicyIssueDetails;return s?[new zi(s,e)]:(console.warn("Content security policy issue without details received."),[])}],[Protocol.Audits.InspectorIssueCode.BlockedByResponseIssue,function(e,t){const s=t.blockedByResponseIssueDetails;return s?function(e){switch(e){case Protocol.Audits.BlockedByResponseReason.CoepFrameResourceNeedsCoepHeader:case Protocol.Audits.BlockedByResponseReason.CoopSandboxedIFrameCannotNavigateToCoopPage:case Protocol.Audits.BlockedByResponseReason.CorpNotSameOrigin:case Protocol.Audits.BlockedByResponseReason.CorpNotSameOriginAfterDefaultedToSameOriginByCoep:case Protocol.Audits.BlockedByResponseReason.CorpNotSameSite:return!0}return!1}(s.reason)?[new mo(s,e)]:[]:(console.warn("BlockedByResponse issue without details received."),[])}],[Protocol.Audits.InspectorIssueCode.SharedArrayBufferTransferIssue,function(e,t){const s=t.sharedArrayBufferTransferIssueDetails;return s?[new Fo(s,e)]:(console.warn("SAB transfer issue without details received."),[])}]]),jo={IssueAdded:Symbol("IssueAdded")};N.register(Uo,O.Audits,!0);var zo=Object.freeze({__proto__:null,IssuesModel:Uo,Events:jo});class Vo{id(){throw new Error("Not implemented")}parentId(){throw new Error("Not implemented")}parent(){throw new Error("Not implemented")}isRoot(){throw new Error("Not implemented")}children(){throw new Error("Not implemented")}addChild(e){}node(){throw new Error("Not implemented")}nodeForSelfOrAncestor(){throw new Error("Not implemented")}offsetX(){throw new Error("Not implemented")}offsetY(){throw new Error("Not implemented")}width(){throw new Error("Not implemented")}height(){throw new Error("Not implemented")}transform(){throw new Error("Not implemented")}quad(){throw new Error("Not implemented")}anchorPoint(){throw new Error("Not implemented")}invisible(){throw new Error("Not implemented")}paintCount(){throw new Error("Not implemented")}lastPaintRect(){throw new Error("Not implemented")}scrollRects(){throw new Error("Not implemented")}stickyPositionConstraint(){throw new Error("Not implemented")}gpuMemoryUsage(){throw new Error("Not implemented")}requestCompositingReasonIds(){throw new Error("Not implemented")}drawsContent(){throw new Error("Not implemented")}snapshots(){throw new Error("Not implemented")}}Vo.ScrollRectType={NonFastScrollable:"NonFastScrollable",TouchEventHandler:"TouchEventHandler",WheelEventHandler:"WheelEventHandler",RepaintsOnScroll:"RepaintsOnScroll",MainThreadScrollingReason:"MainThreadScrollingReason"};var Wo=Object.freeze({__proto__:null,Layer:Vo,StickyPositionConstraint:class{constructor(e,t){this._stickyBoxRect=t.stickyBoxRect,this._containingBlockRect=t.containingBlockRect,this._nearestLayerShiftingStickyBox=null,e&&t.nearestLayerShiftingStickyBox&&(this._nearestLayerShiftingStickyBox=e.layerById(t.nearestLayerShiftingStickyBox)),this._nearestLayerShiftingContainingBlock=null,e&&t.nearestLayerShiftingContainingBlock&&(this._nearestLayerShiftingContainingBlock=e.layerById(t.nearestLayerShiftingContainingBlock))}stickyBoxRect(){return this._stickyBoxRect}containingBlockRect(){return this._containingBlockRect}nearestLayerShiftingStickyBox(){return this._nearestLayerShiftingStickyBox}nearestLayerShiftingContainingBlock(){return this._nearestLayerShiftingContainingBlock}},LayerTreeBase:class{constructor(e){this._target=e,this._domModel=e?e.model(_s):null,this.layersById=new Map,this._root=null,this._contentRoot=null,this._backendNodeIdToNode=new Map}target(){return this._target}root(){return this._root}setRoot(e){this._root=e}contentRoot(){return this._contentRoot}setContentRoot(e){this._contentRoot=e}forEachLayer(e,t){return!(!t&&!(t=this.root()))&&(e(t)||t.children().some(this.forEachLayer.bind(this,e)))}layerById(e){return this.layersById.get(e)||null}async resolveBackendNodeIds(e){if(!e.size||!this._domModel)return;const t=await this._domModel.pushNodesByBackendIdsToFrontend(e);if(t)for(const e of t.keys())this._backendNodeIdToNode.set(e,t.get(e)||null)}backendNodeIdToNode(){return this._backendNodeIdToNode}setViewportSize(e){this._viewportSize=e}viewportSize(){return this._viewportSize}_nodeForId(e){return this._domModel?this._domModel.nodeForId(e):null}}});class Go extends N{constructor(e){super(e),this._layerTreeAgent=e.layerTreeAgent()}async loadSnapshotFromFragments(e){const{snapshotId:t}=await this._layerTreeAgent.invoke_loadSnapshot({tiles:e});return t?new $o(this,t):null}loadSnapshot(e){const t={x:0,y:0,picture:e};return this.loadSnapshotFromFragments([t])}async makeSnapshot(e){const{snapshotId:t}=await this._layerTreeAgent.invoke_makeSnapshot({layerId:e});return t?new $o(this,t):null}}class $o{constructor(e,t){this._paintProfilerModel=e,this._id=t,this._refCount=1}release(){console.assert(this._refCount>0,"release is already called on the object"),--this._refCount||this._paintProfilerModel._layerTreeAgent.invoke_releaseSnapshot({snapshotId:this._id})}addReference(){++this._refCount,console.assert(this._refCount>0,"Referencing a dead object")}async replay(e,t,s){return(await this._paintProfilerModel._layerTreeAgent.invoke_replaySnapshot({snapshotId:this._id,fromStep:t,toStep:s,scale:e||1})).dataURL}async profile(e){return(await this._paintProfilerModel._layerTreeAgent.invoke_profileSnapshot({snapshotId:this._id,minRepeatCount:5,minDuration:1,clipRect:e||void 0})).timings}async commandLog(){const e=await this._paintProfilerModel._layerTreeAgent.invoke_snapshotCommandLog({snapshotId:this._id});return e.commandLog?e.commandLog.map(((e,t)=>new Ko(e,t))):null}}class Ko{constructor(e,t){this.method=e.method,this.params=e.params,this.commandIndex=t}}N.register(Go,O.DOM,!1);var Xo=Object.freeze({__proto__:null,PaintProfilerModel:Go,PaintProfilerSnapshot:$o,PaintProfilerLogItem:Ko,SnapshotWithRect:undefined,PictureFragment:undefined,RawPaintProfilerLogItem:undefined});class Jo extends N{constructor(e){super(e),this._agent=e.performanceAgent();const t=Qo;this._metricModes=new Map([["TaskDuration",t.CumulativeTime],["ScriptDuration",t.CumulativeTime],["LayoutDuration",t.CumulativeTime],["RecalcStyleDuration",t.CumulativeTime],["LayoutCount",t.CumulativeCount],["RecalcStyleCount",t.CumulativeCount]]),this._metricData=new Map}enable(){return this._agent.invoke_enable({})}disable(){return this._agent.invoke_disable()}async requestMetrics(){const e=await this._agent.invoke_getMetrics()||[],t=new Map,s=performance.now();for(const i of e.metrics){let e,r=this._metricData.get(i.name);switch(r||(r={lastValue:void 0,lastTimestamp:void 0},this._metricData.set(i.name,r)),this._metricModes.get(i.name)){case Qo.CumulativeTime:e=r.lastTimestamp&&r.lastValue?C.clamp(1e3*(i.value-r.lastValue)/(s-r.lastTimestamp),0,1):0,r.lastValue=i.value,r.lastTimestamp=s;break;case Qo.CumulativeCount:e=r.lastTimestamp&&r.lastValue?Math.max(0,1e3*(i.value-r.lastValue)/(s-r.lastTimestamp)):0,r.lastValue=i.value,r.lastTimestamp=s;break;default:e=i.value}t.set(i.name,e)}return{metrics:t,timestamp:s}}}const Qo={CumulativeTime:Symbol("CumulativeTime"),CumulativeCount:Symbol("CumulativeCount")};N.register(Jo,O.DOM,!1);var Yo=Object.freeze({__proto__:null,PerformanceMetricsModel:Jo});class Zo extends N{constructor(e){super(e),this._agent=e.pageAgent(),this._onScreencastFrame=null,this._onScreencastVisibilityChanged=null,e.registerPageDispatcher(this)}startScreencast(e,t,s,i,r,o,n){this._onScreencastFrame=o,this._onScreencastVisibilityChanged=n,this._agent.invoke_startScreencast({format:e,quality:t,maxWidth:s,maxHeight:i,everyNthFrame:r})}stopScreencast(){this._onScreencastFrame=null,this._onScreencastVisibilityChanged=null,this._agent.invoke_stopScreencast()}async captureScreenshot(e,t,s){await as.muteHighlight();const i=await this._agent.invoke_captureScreenshot({format:e,quality:t,clip:s,fromSurface:!0,captureBeyondViewport:!0});return await as.unmuteHighlight(),i.data}async fetchLayoutMetrics(){const e=await this._agent.invoke_getLayoutMetrics();return e.getError()?null:{viewportX:e.visualViewport.pageX,viewportY:e.visualViewport.pageY,viewportScale:e.visualViewport.scale,contentWidth:e.contentSize.width,contentHeight:e.contentSize.height}}screencastFrame({data:e,metadata:t,sessionId:s}){this._agent.invoke_screencastFrameAck({sessionId:s}),this._onScreencastFrame&&this._onScreencastFrame.call(null,e,t)}screencastVisibilityChanged({visible:e}){this._onScreencastVisibilityChanged&&this._onScreencastVisibilityChanged.call(null,e)}domContentEventFired(e){}loadEventFired(e){}lifecycleEvent(e){}navigatedWithinDocument(e){}frameAttached(e){}frameNavigated(e){}documentOpened(e){}frameDetached(e){}frameStartedLoading(e){}frameStoppedLoading(e){}frameRequestedNavigation(e){}frameScheduledNavigation(e){}frameClearedScheduledNavigation(e){}frameResized(){}javascriptDialogOpening(e){}javascriptDialogClosed(e){}interstitialShown(){}interstitialHidden(){}windowOpen(e){}fileChooserOpened(e){}compilationCacheProduced(e){}downloadWillBegin(e){}downloadProgress(){}}N.register(Zo,O.ScreenCapture,!1);var en=Object.freeze({__proto__:null,ScreenCaptureModel:Zo});class tn extends N{constructor(e){super(e),e.registerStorageDispatcher(this),this._caches=new Map,this._cacheAgent=e.cacheStorageAgent(),this._storageAgent=e.storageAgent(),this._securityOriginManager=e.model(Cs),this._originsUpdated=new Set,this._throttler=new c.Throttler(2e3),this._enabled=!1}enable(){if(!this._enabled){this._securityOriginManager.addEventListener(Is.SecurityOriginAdded,this._securityOriginAdded,this),this._securityOriginManager.addEventListener(Is.SecurityOriginRemoved,this._securityOriginRemoved,this);for(const e of this._securityOriginManager.securityOrigins())this._addOrigin(e);this._enabled=!0}}clearForOrigin(e){this._removeOrigin(e),this._addOrigin(e)}refreshCacheNames(){for(const e of this._caches.values())this._cacheRemoved(e);this._caches.clear();const e=this._securityOriginManager.securityOrigins();for(const t of e)this._loadCacheNames(t)}async deleteCache(e){const t=await this._cacheAgent.invoke_deleteCache({cacheId:e.cacheId});t.getError()?console.error(`ServiceWorkerCacheAgent error deleting cache ${e.toString()}: ${t.getError()}`):(this._caches.delete(e.cacheId),this._cacheRemoved(e))}async deleteCacheEntry(e,t){const s=await this._cacheAgent.invoke_deleteEntry({cacheId:e.cacheId,request:t});s.getError()&&a.Console.instance().error(o.UIString("ServiceWorkerCacheAgent error deleting cache entry %s in cache: %s",e.toString(),s.getError()))}loadCacheData(e,t,s,i,r){this._requestEntries(e,t,s,i,r)}loadAllCacheData(e,t,s){this._requestAllEntries(e,t,s)}caches(){const e=new Array;for(const t of this._caches.values())e.push(t);return e}dispose(){for(const e of this._caches.values())this._cacheRemoved(e);this._caches.clear(),this._enabled&&(this._securityOriginManager.removeEventListener(Is.SecurityOriginAdded,this._securityOriginAdded,this),this._securityOriginManager.removeEventListener(Is.SecurityOriginRemoved,this._securityOriginRemoved,this))}_addOrigin(e){this._loadCacheNames(e),this._isValidSecurityOrigin(e)&&this._storageAgent.invoke_trackCacheStorageForOrigin({origin:e})}_removeOrigin(e){for(const[t,s]of this._caches.entries())s.securityOrigin===e&&(this._caches.delete(t),this._cacheRemoved(s));this._isValidSecurityOrigin(e)&&this._storageAgent.invoke_untrackCacheStorageForOrigin({origin:e})}_isValidSecurityOrigin(e){const s=t.ParsedURL.fromString(e);return null!==s&&s.scheme.startsWith("http")}async _loadCacheNames(e){const t=await this._cacheAgent.invoke_requestCacheNames({securityOrigin:e});t.getError()||this._updateCacheNames(e,t.caches)}_updateCacheNames(e,t){const s=new Set,i=new Map,r=new Map;for(const e of t){const t=new rn(this,e.securityOrigin,e.cacheName,e.cacheId);s.add(t.cacheId),this._caches.has(t.cacheId)||(i.set(t.cacheId,t),this._caches.set(t.cacheId,t))}this._caches.forEach((function(t){t.securityOrigin!==e||s.has(t.cacheId)||(r.set(t.cacheId,t),this._caches.delete(t.cacheId))}),this),i.forEach(this._cacheAdded,this),r.forEach(this._cacheRemoved,this)}_securityOriginAdded(e){const t=e.data;this._addOrigin(t)}_securityOriginRemoved(e){const t=e.data;this._removeOrigin(t)}_cacheAdded(e){this.dispatchEventToListeners(sn.CacheAdded,{model:this,cache:e})}_cacheRemoved(e){this.dispatchEventToListeners(sn.CacheRemoved,{model:this,cache:e})}async _requestEntries(e,t,s,i,r){const o=await this._cacheAgent.invoke_requestEntries({cacheId:e.cacheId,skipCount:t,pageSize:s,pathFilter:i});o.getError()?console.error("ServiceWorkerCacheAgent error while requesting entries: ",o.getError()):r(o.cacheDataEntries,o.returnCount)}async _requestAllEntries(e,t,s){const i=await this._cacheAgent.invoke_requestEntries({cacheId:e.cacheId,pathFilter:t});i.getError()?console.error("ServiceWorkerCacheAgent error while requesting entries: ",i.getError()):s(i.cacheDataEntries,i.returnCount)}cacheStorageListUpdated({origin:e}){this._originsUpdated.add(e),this._throttler.schedule((()=>{const e=Array.from(this._originsUpdated,(e=>this._loadCacheNames(e)));return this._originsUpdated.clear(),Promise.all(e)}))}cacheStorageContentUpdated({origin:e,cacheName:t}){this.dispatchEventToListeners(sn.CacheStorageContentUpdated,{origin:e,cacheName:t})}indexedDBListUpdated(e){}indexedDBContentUpdated(e){}}const sn={CacheAdded:Symbol("CacheAdded"),CacheRemoved:Symbol("CacheRemoved"),CacheStorageContentUpdated:Symbol("CacheStorageContentUpdated")};class rn{constructor(e,t,s,i){this._model=e,this.securityOrigin=t,this.cacheName=s,this.cacheId=i}equals(e){return this.cacheId===e.cacheId}toString(){return this.securityOrigin+this.cacheName}async requestCachedResponse(e,t){const s=await this._model._cacheAgent.invoke_requestCachedResponse({cacheId:this.cacheId,requestURL:e,requestHeaders:t});return s.getError()?null:s.response}}N.register(tn,O.Storage,!1);var on=Object.freeze({__proto__:null,ServiceWorkerCacheModel:tn,Events:sn,Cache:rn});class nn extends N{constructor(e){super(e),e.registerServiceWorkerDispatcher(new ln(this)),this._lastAnonymousTargetId=0,this._agent=e.serviceWorkerAgent(),this._registrations=new Map,this._enabled=!1,this.enable(),this._forceUpdateSetting=i.Settings.instance().createSetting("serviceWorkerUpdateOnReload",!1),this._forceUpdateSetting.get()&&this._forceUpdateSettingChanged(),this._forceUpdateSetting.addChangeListener(this._forceUpdateSettingChanged,this),new hn(e,this),this.serviceWorkerNetworkRequestsPanelStatus={isOpen:!1,openedAt:0}}async enable(){this._enabled||(this._enabled=!0,await this._agent.invoke_enable())}async disable(){this._enabled&&(this._enabled=!1,this._registrations.clear(),await this._agent.invoke_enable())}registrations(){return this._registrations}hasRegistrationForURLs(e){for(const t of this._registrations.values())if(e.filter((e=>e&&e.startsWith(t.scopeURL))).length===e.length)return!0;return!1}findVersion(e){for(const t of this.registrations().values()){const s=t.versions.get(e);if(s)return s}return null}deleteRegistration(e){const t=this._registrations.get(e);if(t){if(t._isRedundant())return this._registrations.delete(e),void this.dispatchEventToListeners(an.RegistrationDeleted,t);t._deleting=!0;for(const e of t.versions.values())this.stopWorker(e.id);this._unregister(t.scopeURL)}}async updateRegistration(e){const t=this._registrations.get(e);t&&await this._agent.invoke_updateRegistration({scopeURL:t.scopeURL})}async deliverPushMessage(e,s){const i=this._registrations.get(e);if(!i)return;const r=t.ParsedURL.extractOrigin(i.scopeURL);await this._agent.invoke_deliverPushMessage({origin:r,registrationId:e,data:s})}async dispatchSyncEvent(e,s,i){const r=this._registrations.get(e);if(!r)return;const o=t.ParsedURL.extractOrigin(r.scopeURL);await this._agent.invoke_dispatchSyncEvent({origin:o,registrationId:e,tag:s,lastChance:i})}async dispatchPeriodicSyncEvent(e,s){const i=this._registrations.get(e);if(!i)return;const r=t.ParsedURL.extractOrigin(i.scopeURL);await this._agent.invoke_dispatchPeriodicSyncEvent({origin:r,registrationId:e,tag:s})}async _unregister(e){await this._agent.invoke_unregister({scopeURL:e})}async startWorker(e){await this._agent.invoke_startWorker({scopeURL:e})}async skipWaiting(e){await this._agent.invoke_skipWaiting({scopeURL:e})}async stopWorker(e){await this._agent.invoke_stopWorker({versionId:e})}async inspectWorker(e){await this._agent.invoke_inspectWorker({versionId:e})}_workerRegistrationUpdated(e){for(const t of e){let e=this._registrations.get(t.registrationId);e?(e._update(t),e._shouldBeRemoved()?(this._registrations.delete(e.id),this.dispatchEventToListeners(an.RegistrationDeleted,e)):this.dispatchEventToListeners(an.RegistrationUpdated,e)):(e=new cn(t),this._registrations.set(t.registrationId,e),this.dispatchEventToListeners(an.RegistrationUpdated,e))}}_workerVersionUpdated(e){const t=new Set;for(const s of e){const e=this._registrations.get(s.registrationId);e&&(e._updateVersion(s),t.add(e))}for(const e of t)e._shouldBeRemoved()?(this._registrations.delete(e.id),this.dispatchEventToListeners(an.RegistrationDeleted,e)):this.dispatchEventToListeners(an.RegistrationUpdated,e)}_workerErrorReported(e){const t=this._registrations.get(e.registrationId);t&&(t.errors.push(e),this.dispatchEventToListeners(an.RegistrationErrorAdded,{registration:t,error:e}))}forceUpdateOnReloadSetting(){return this._forceUpdateSetting}_forceUpdateSettingChanged(){const e=this._forceUpdateSetting.get();this._agent.invoke_setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e})}}const an={RegistrationUpdated:Symbol("RegistrationUpdated"),RegistrationErrorAdded:Symbol("RegistrationErrorAdded"),RegistrationDeleted:Symbol("RegistrationDeleted")};class ln{constructor(e){this._manager=e}workerRegistrationUpdated({registrations:e}){this._manager._workerRegistrationUpdated(e)}workerVersionUpdated({versions:e}){this._manager._workerVersionUpdated(e)}workerErrorReported({errorMessage:e}){this._manager._workerErrorReported(e)}}class dn{constructor(e,t){this.id,this.scriptURL,this.parsedURL,this.securityOrigin,this.runningStatus,this.status,this.scriptLastModified,this.scriptResponseTime,this.controlledClients,this.targetId,this.registration=e,this._update(t)}_update(e){this.id=e.versionId,this.scriptURL=e.scriptURL;const s=new t.ParsedURL(e.scriptURL);this.securityOrigin=s.securityOrigin(),this.runningStatus=e.runningStatus,this.status=e.status,this.scriptLastModified=e.scriptLastModified,this.scriptResponseTime=e.scriptResponseTime,e.controlledClients?this.controlledClients=e.controlledClients.slice():this.controlledClients=[],this.targetId=e.targetId||null}isStartable(){return!this.registration.isDeleted&&this.isActivated()&&this.isStopped()}isStoppedAndRedundant(){return this.runningStatus===Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopped&&this.status===Protocol.ServiceWorker.ServiceWorkerVersionStatus.Redundant}isStopped(){return this.runningStatus===Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopped}isStarting(){return this.runningStatus===Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Starting}isRunning(){return this.runningStatus===Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Running}isStopping(){return this.runningStatus===Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopping}isNew(){return this.status===Protocol.ServiceWorker.ServiceWorkerVersionStatus.New}isInstalling(){return this.status===Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installing}isInstalled(){return this.status===Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installed}isActivating(){return this.status===Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activating}isActivated(){return this.status===Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activated}isRedundant(){return this.status===Protocol.ServiceWorker.ServiceWorkerVersionStatus.Redundant}mode(){return this.isNew()||this.isInstalling()?dn.Modes.Installing:this.isInstalled()?dn.Modes.Waiting:this.isActivating()||this.isActivated()?dn.Modes.Active:dn.Modes.Redundant}}dn.RunningStatus={[Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Running]:k`running`,[Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Starting]:k`starting`,[Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopped]:k`stopped`,[Protocol.ServiceWorker.ServiceWorkerVersionRunningStatus.Stopping]:k`stopping`},dn.Status={[Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activated]:k`activated`,[Protocol.ServiceWorker.ServiceWorkerVersionStatus.Activating]:k`activating`,[Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installed]:k`installed`,[Protocol.ServiceWorker.ServiceWorkerVersionStatus.Installing]:k`installing`,[Protocol.ServiceWorker.ServiceWorkerVersionStatus.New]:k`new`,[Protocol.ServiceWorker.ServiceWorkerVersionStatus.Redundant]:k`redundant`},dn.Modes={Installing:"installing",Waiting:"waiting",Active:"active",Redundant:"redundant"};class cn{constructor(e){this._fingerprint,this.id,this.scopeURL,this.securityOrigin,this.isDeleted,this._update(e),this.versions=new Map,this._deleting=!1,this.errors=[]}_update(e){this._fingerprint=Symbol("fingerprint"),this.id=e.registrationId,this.scopeURL=e.scopeURL;const s=new t.ParsedURL(e.scopeURL);this.securityOrigin=s.securityOrigin(),this.isDeleted=e.isDeleted}fingerprint(){return this._fingerprint}versionsByMode(){const e=new Map;for(const t of this.versions.values())e.set(t.mode(),t);return e}_updateVersion(e){this._fingerprint=Symbol("fingerprint");let t=this.versions.get(e.versionId);return t?(t._update(e),t):(t=new dn(this,e),this.versions.set(e.versionId,t),t)}_isRedundant(){for(const e of this.versions.values())if(!e.isStoppedAndRedundant())return!1;return!0}_shouldBeRemoved(){return this._isRedundant()&&(!this.errors.length||this._deleting)}canBeRemoved(){return this.isDeleted||this._deleting}clearErrors(){this._fingerprint=Symbol("fingerprint"),this.errors=[]}}class hn{constructor(e,t){this._target=e,this._serviceWorkerManager=t,this._versionByTargetId=new Map,t.addEventListener(an.RegistrationUpdated,this._registrationsUpdated,this),t.addEventListener(an.RegistrationDeleted,this._registrationsUpdated,this),F.instance().addModelListener(ti,ii.ExecutionContextCreated,this._executionContextCreated,this)}_registrationsUpdated(e){this._versionByTargetId.clear();const t=this._serviceWorkerManager.registrations().values();for(const e of t)for(const t of e.versions.values())t.targetId&&this._versionByTargetId.set(t.targetId,t);this._updateAllContextLabels()}_executionContextCreated(e){const t=e.data,s=this._serviceWorkerTargetId(t.target());s&&this._updateContextLabel(t,this._versionByTargetId.get(s)||null)}_serviceWorkerTargetId(e){return e.parentTarget()!==this._target||e.type()!==D.ServiceWorker?null:e.id()}_updateAllContextLabels(){for(const e of F.instance().targets()){const t=this._serviceWorkerTargetId(e);if(!t)continue;const s=this._versionByTargetId.get(t)||null,i=e.model(ti),r=i?i.executionContexts():[];for(const e of r)this._updateContextLabel(e,s)}}_updateContextLabel(e,s){if(!s)return void e.setLabel("");const i=t.ParsedURL.fromString(e.origin),r=i?i.lastPathComponentWithFragment():e.name,o=dn.Status[s.status];e.setLabel(k`${r} #${s.id} (${o})`)}}N.register(nn,O.ServiceWorker,!0);var un=Object.freeze({__proto__:null,ServiceWorkerManager:nn,Events:an,ServiceWorkerVersion:dn,ServiceWorkerRegistration:cn});class gn extends N{constructor(e){super(e),this._tracingAgent=e.tracingAgent(),e.registerTracingDispatcher(new mn(this)),this._activeClient=null,this._eventBufferSize=0,this._eventsRetrieved=0}_bufferUsage(e,t,s){this._eventBufferSize=void 0===t?null:t,this._activeClient&&this._activeClient.tracingBufferUsage(e||s||0)}_eventsCollected(e){this._activeClient&&(this._activeClient.traceEventsCollected(e),this._eventsRetrieved+=e.length,this._eventBufferSize?(this._eventsRetrieved>this._eventBufferSize&&(this._eventsRetrieved=this._eventBufferSize),this._activeClient.eventsRetrievalProgress(this._eventsRetrieved/this._eventBufferSize)):this._activeClient.eventsRetrievalProgress(0))}_tracingComplete(){this._eventBufferSize=0,this._eventsRetrieved=0,this._activeClient&&(this._activeClient.tracingComplete(),this._activeClient=null),this._finishing=!1}async start(e,t,s){if(this._activeClient)throw new Error("Tracing is already started");this._activeClient=e;const i={bufferUsageReportingInterval:500,categories:t,options:s,transferMode:Protocol.Tracing.StartRequestTransferMode.ReportEvents},r=await this._tracingAgent.invoke_start(i);return r.getError()&&(this._activeClient=null),r}stop(){if(!this._activeClient)throw new Error("Tracing is not started");if(this._finishing)throw new Error("Tracing is already being stopped");this._finishing=!0,this._tracingAgent.invoke_end()}}class mn{constructor(e){this._tracingManager=e}bufferUsage({value:e,eventCount:t,percentFull:s}){this._tracingManager._bufferUsage(e,t,s)}dataCollected({value:e}){this._tracingManager._eventsCollected(e)}tracingComplete(){this._tracingManager._tracingComplete()}}N.register(gn,O.Tracing,!1);var pn=Object.freeze({__proto__:null,TracingManager:gn,TracingManagerClient:class{traceEventsCollected(e){}tracingComplete(){}tracingBufferUsage(e){}eventsRetrievalProgress(e){}},EventPayload:undefined});class _n extends N{constructor(e){super(e),this._agent=e.webAuthnAgent()}setVirtualAuthEnvEnabled(e){return e?this._agent.invoke_enable():this._agent.invoke_disable()}async addAuthenticator(e){return(await this._agent.invoke_addVirtualAuthenticator({options:e})).authenticatorId}async removeAuthenticator(e){await this._agent.invoke_removeVirtualAuthenticator({authenticatorId:e})}async setAutomaticPresenceSimulation(e,t){await this._agent.invoke_setAutomaticPresenceSimulation({authenticatorId:e,enabled:t})}async getCredentials(e){return(await this._agent.invoke_getCredentials({authenticatorId:e})).credentials}async removeCredential(e,t){await this._agent.invoke_removeCredential({authenticatorId:e,credentialId:t})}}N.register(_n,O.WebAuthn,!1);var bn=Object.freeze({__proto__:null,WebAuthnModel:_n});export{ci as AccessibilityModel,or as CPUProfileDataModel,Ri as CPUProfilerModel,et as CSSFontFace,yt as CSSMatchedStyles,rt as CSSMedia,ne as CSSMetadata,ss as CSSModel,nt as CSSProperty,ur as CSSPropertyParser,pt as CSSRule,dt as CSSStyleDeclaration,St as CSSStyleSheetHeader,wi as ChildTargetManager,Ot as CompilerSourceMappingContentProvider,_i as Connections,Fi as ConsoleModel,tr as ContentSecurityPolicyIssue,ge as Cookie,ir as CookieModel,_e as CookieParser,wr as DOMDebuggerModel,ks as DOMModel,Js as DebuggerModel,Tr as EmulationModel,Gr as FilmStripModel,Rt as FrameManager,so as HARLog,ei as HeapProfilerModel,oo as HeavyAdIssue,xt as IOModel,go as IsolateManager,ji as Issue,zo as IssuesModel,Wo as LayerTreeBase,Mi as LogModel,fo as MixedContentIssue,Zr as NetworkLog,Le as NetworkManager,Ue as NetworkRequest,rs as OverlayColorGenerator,hs as OverlayModel,ns as OverlayPersistentHighlighter,Nt as PageResourceLoader,Xo as PaintProfiler,Yo as PerformanceMetricsModel,de as ProfileTreeModel,Ye as RemoteObject,ws as Resource,Ls as ResourceTreeModel,ni as RuntimeModel,U as SDKModel,Bo as SameSiteCookieIssue,en as ScreenCaptureModel,Os as Script,Rs as SecurityOriginManager,Ne as ServerTiming,on as ServiceWorkerCacheModel,un as ServiceWorkerManager,qo as SharedArrayBufferTransferIssue,Ht as SourceMap,Vt as SourceMapManager,pn as TracingManager,jr as TracingModel,bn as WebAuthnModel};
